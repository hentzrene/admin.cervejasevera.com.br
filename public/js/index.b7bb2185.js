(function(e){const t=e["en"]=e["en"]||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"%0 of %1","Align cell text to the bottom":"Align cell text to the bottom","Align cell text to the center":"Align cell text to the center","Align cell text to the left":"Align cell text to the left","Align cell text to the middle":"Align cell text to the middle","Align cell text to the right":"Align cell text to the right","Align cell text to the top":"Align cell text to the top","Align center":"Align center","Align left":"Align left","Align right":"Align right","Align table to the left":"Align table to the left","Align table to the right":"Align table to the right",Alignment:"Alignment",Aquamarine:"Aquamarine",Background:"Background",Big:"Big",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold",Border:"Border","Break text":"Break text","Bulleted List":"Bulleted List","Bulleted list styles toolbar":"Bulleted list styles toolbar",Cancel:"Cancel","Cell properties":"Cell properties","Center table":"Center table","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Circle:"Circle",Code:"Code",Color:"Color","Color picker":"Color picker",Column:"Column",Dashed:"Dashed",Decimal:"Decimal","Decimal with leading zero":"Decimal with leading zero","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey",Dimensions:"Dimensions",Disc:"Disc","Document colors":"Document colors",Dotted:"Dotted",Double:"Double",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Edit source":"Edit source","Editor toolbar":"Editor toolbar","Empty snippet content":"Empty snippet content","Enter image caption":"Enter image caption","Enter table caption":"Enter table caption",Find:"Find","Find and replace":"Find and replace","Find in text…":"Find in text…","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Size":"Font Size","Full size image":"Full size image",Green:"Green",Grey:"Grey",Groove:"Groove","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Height:"Height","Horizontal line":"Horizontal line","Horizontal text alignment toolbar":"Horizontal text alignment toolbar","HTML object":"HTML object","HTML snippet":"HTML snippet",Huge:"Huge","Image resize list":"Image resize list","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line","Increase indent":"Increase indent",Insert:"Insert","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert HTML":"Insert HTML","Insert image":"Insert image","Insert image via URL":"Insert image via URL","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table",Inset:"Inset",Italic:"Italic",Justify:"Justify","Justify cell text":"Justify cell text","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link image":"Link image","Link URL":"Link URL","Lower-latin":"Lower-latin","Lower–roman":"Lower–roman","Match case":"Match case","Media toolbar":"Media toolbar","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Next result":"Next result","No preview available":"No preview available",None:"None","Numbered List":"Numbered List","Numbered list styles toolbar":"Numbered list styles toolbar","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Original:"Original",Outset:"Outset",Padding:"Padding",Paragraph:"Paragraph","Paste raw HTML here...":"Paste raw HTML here...","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous","Previous result":"Previous result",Purple:"Purple",Red:"Red",Redo:"Redo","Remove color":"Remove color",Replace:"Replace","Replace all":"Replace all","Replace with…":"Replace with…","Resize image":"Resize image","Resize image to %0":"Resize image to %0","Resize image to the original size":"Resize image to the original size","Restore default":"Restore default","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0",Ridge:"Ridge","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Save changes":"Save changes","Select all":"Select all","Select column":"Select column","Select row":"Select row","Show more items":"Show more items","Show options":"Show options","Side image":"Side image",Small:"Small",Solid:"Solid",Source:"Source","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Square:"Square",Style:"Style","Table alignment toolbar":"Table alignment toolbar","Table cell text alignment":"Table cell text alignment","Table properties":"Table properties","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","Text to find must not be empty.":"Text to find must not be empty.",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".',"The URL must not be empty.":"The URL must not be empty.",'The value is invalid. Try "10px" or "2em" or simply "2".':'The value is invalid. Try "10px" or "2em" or simply "2".',"This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Find some text first in order to replace it.":"Tip: Find some text first in order to replace it.","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on","Toggle the circle list style":"Toggle the circle list style","Toggle the decimal list style":"Toggle the decimal list style","Toggle the decimal with leading zero list style":"Toggle the decimal with leading zero list style","Toggle the disc list style":"Toggle the disc list style","Toggle the lower–latin list style":"Toggle the lower–latin list style","Toggle the lower–roman list style":"Toggle the lower–roman list style","Toggle the square list style":"Toggle the square list style","Toggle the upper–latin list style":"Toggle the upper–latin list style","Toggle the upper–roman list style":"Toggle the upper–roman list style",Turquoise:"Turquoise",Underline:"Underline",Undo:"Undo",Unlink:"Unlink",Update:"Update","Update image URL":"Update image URL","Upload failed":"Upload failed","Upload in progress":"Upload in progress","Upper-latin":"Upper-latin","Upper-roman":"Upper-roman","Vertical text alignment toolbar":"Vertical text alignment toolbar",White:"White","Whole words only":"Whole words only","Widget toolbar":"Widget toolbar",Width:"Width","Wrap text":"Wrap text",Yellow:"Yellow"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e){function t(t){for(var i,n,o=t[0],r=t[1],d=t[2],c=0,m=[];c<o.length;c++)n=o[c],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(m.length)m.shift()();return l.push.apply(l,d||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,o=1;o<a.length;o++){var r=a[o];0!==s[r]&&(i=!1)}i&&(l.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={index:0},l=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=r;l.push([0,"chunk-vendors"]),a()}({0:function(e,t,a){e.exports=a("56d7")},"0006":function(e,t,a){},"0217":function(e,t,a){"use strict";a("205f")},"04db":function(e,t,a){"use strict";a("828c")},"06df":function(e,t,a){},"0aa1":function(e,t,a){"use strict";a("36df")},"0dca":function(e,t,a){"use strict";a("ed62")},"0e26":function(e,t,a){"use strict";a("7991")},"0ee0":function(e,t,a){"use strict";a("a7c3")},"13bc":function(e,t,a){},"205f":function(e,t,a){},"22dd":function(e,t,a){},"25b8":function(e,t,a){"use strict";a("86d7")},"28ca":function(e,t,a){},"2ab1":function(e,t,a){},"2c9d":function(e,t,a){"use strict";a("4ea4")},"2d82":function(e,t,a){},"36df":function(e,t,a){},3853:function(e,t,a){"use strict";a("daca")},"3bce":function(e,t,a){"use strict";a("e05c")},"3de7":function(e,t,a){"use strict";a("b6e6")},"3ed8":function(e,t,a){"use strict";a("a4d7")},4002:function(e,t,a){"use strict";a("7b98")},"40cc":function(e,t,a){},"433a":function(e,t,a){"use strict";a("4aeb")},"467d":function(e,t,a){"use strict";a("40cc")},4840:function(e,t,a){"use strict";a("d060")},"48e3":function(e,t,a){},"4aeb":function(e,t,a){},"4e04":function(e,t,a){},"4ea4":function(e,t,a){},"53b3":function(e,t,a){"use strict";a("7160")},"55d0":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),s=a("7496"),l=a("f6c4"),n=a("8dd9"),o=function(){var e=this,t=e._self._c;return t(s["a"],[e.checking?t(n["a"],{staticClass:"d-flex justify-center align-center",attrs:{color:"transparent",height:"100%",width:"100%"}},[t("loading")],1):[["/error404","/entrar","/setup"].includes(e.$route.path)?e._e():t("main-nav"),t(l["a"],[t("router-view")],1)],t("float-alert",{attrs:{value:e.lastRequestError,color:"red"}},[t("span",[e._v(e._s(e.lastRequestError))])]),t("float-alert",{attrs:{value:e.lastRequestSuccess,color:"green"}},[t("span",[e._v(e._s(e.lastRequestSuccess))])])],2)},r=[],d=function(){var e=this,t=e._self._c;return t("div",[t("app-bar",{on:{toggledrawer:function(t){e.drawer=!e.drawer}}}),t("navigation-drawer",{model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}})],1)},u=[],c=a("40dc"),m=a("5bc1"),p=a("8212"),f=a("8336"),h=a("b0af"),g=a("ce7e"),v=a("132d"),b=a("5d23"),y=a("e449"),x=a("2fa4"),k=function(){var e=this,t=e._self._c;return t(c["a"],{attrs:{color:"primary lighten-2",fixed:"fixed",app:"app",dense:"dense"}},[e.sm?t("router-link",{staticClass:"h-100 white--text",attrs:{to:"/"}},[t("img",{staticClass:"py-2",attrs:{src:e.prefixPath+"/img/logo.svg",height:"100%",contain:"contain"}})]):e._e(),t("div",{staticClass:"grey--text text--lighten-3 text-center text-caption ml-3"},[e._v(" MRX CMS Headless v"+e._s(e.version)+" ")]),t(x["a"]),t(y["a"],{attrs:{"close-on-content-click":!1,"min-width":"200px",rounded:"rounded","offset-y":"offset-y",bottom:"bottom"},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(f["a"],e._g({attrs:{icon:"icon","x-large":"x-large"}},a),[t(p["a"],{attrs:{color:"accent",size:"42"}},[t("span",{staticClass:"white--text"},[e._v(e._s(e.userInitial))])])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(h["a"],[t(b["a"],{staticClass:"justify-center pb-0 primary lighten-2 white--text"},[t("div",{staticClass:"mx-auto text-center"},[t(p["a"],{staticClass:"mb-2",attrs:{color:"accent"}},[t("span",{staticClass:"white--text"},[e._v(e._s(e.userInitial))])]),t("h4",[e._v(e._s(e.user.name))]),t("p",{staticClass:"caption mt-1"},[e._v(e._s(e.user.email))]),t(g["a"]),1==e.user.type?[t(f["a"],{staticClass:"text-none",attrs:{to:"/accounts",color:"white",depressed:"depressed",text:"text",block:"block",tile:"tile"}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-users")]),t("span",[e._v("Contas")])],1),t(g["a"]),t(f["a"],{staticClass:"text-none",attrs:{to:"/modules",color:"white",depressed:"depressed",text:"text",block:"block",tile:"tile"}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-cogs")]),t("span",[e._v("Módulos")])],1),t(g["a"]),t(f["a"],{staticClass:"text-none",attrs:{to:"/email",color:"white",depressed:"depressed",text:"text",block:"block",tile:"tile"}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-envelope")]),t("span",[e._v("E-mail")])],1),t(g["a"]),t(f["a"],{staticClass:"text-none",attrs:{to:"/tags",color:"white",depressed:"depressed",text:"text",block:"block",tile:"tile"}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-code")]),t("span",[e._v("Tags")])],1),t(g["a"])]:e._e(),t(f["a"],{staticClass:"text-none",attrs:{loading:e.loading,color:"white",depressed:"depressed",text:"text",block:"block",tile:"tile"},on:{click:e.logout}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-sign-out-alt")]),t("span",[e._v("Sair")])],1)],2)])],1)],1),e.sm?t(m["a"],{attrs:{color:"grey lighten-2"},on:{click:()=>e.$emit("toggledrawer")}}):e._e()],1)},_=[],C={data:()=>({loading:!1,menu:!1}),computed:{sm(){return this.$vuetify.breakpoint.smAndDown},user(){return this.$store.state.user},userInitial(){return this.user.name.slice(0,1)}},watch:{$route(){this.menu=!1}},methods:{logout(){this.loading=!0,this.$auth.logout().then(()=>this.$router.push("/entrar")).finally(()=>this.loading=!1)}}},w=C,I=a("2877"),$=Object(I["a"])(w,k,_,!1,null,null,null),T=$.exports,S=a("8860"),O=a("56b0"),D=a("da13"),j=a("1baa"),A=a("34c3"),q=a("f774"),L=function(){var e=this,t=e._self._c;return t(q["a"],{attrs:{value:e.value,temporary:e.sm,permanent:!e.sm,color:"primary lighten-2",width:"240px",fixed:"fixed",app:"app",dark:"dark"},on:{input:()=>e.$emit("input")}},[t("div",{staticClass:"pa-4 align-content-center"},[t("router-link",{staticClass:"white--text h-100",attrs:{to:"/"}},[t("img",{staticClass:"logo",attrs:{src:e.prefixPath+"/img/logo.svg",contain:"contain"}})])],1),t(g["a"]),e.modules.length?[t(j["a"],{staticClass:"mt-2",model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},[t(S["a"],{attrs:{dense:"dense",nav:"nav"}},[e._l(e.nav,(function(a,i){return["$"===i?e._l(e.nav.$.$,(function({to:a,icon:i,text:s},l){return t(D["a"],{key:l,attrs:{to:a,link:"link"}},[t(A["a"],{staticClass:"mr-3"},[t(v["a"],{attrs:{size:"20"}},[e._v(e._s(i))])],1),t(b["a"],[t(b["b"],{staticClass:"body-2"},[e._v(e._s(s))])],1)],1)})):t(O["a"],{key:i,attrs:{"no-action":"no-action",color:"white"},scopedSlots:e._u([{key:"activator",fn:function(){return[t(b["b"],{staticClass:"body-2 text-uppercase font-weight-bold"},[e._v(e._s(i))])]},proxy:!0}],null,!0)},[e._l(a,(function(i,s){return["$"===s?e._l(a.$,(function({to:a,icon:i,text:s},l){return t(D["a"],{key:l,staticClass:"pl-4",attrs:{to:a,link:"link"}},[t(A["a"],{staticClass:"mr-3"},[t(v["a"],{attrs:{size:"20"}},[e._v(e._s(i))])],1),t(b["a"],[t(b["b"],{staticClass:"body-2"},[e._v(e._s(s))])],1)],1)})):t(O["a"],{key:s,attrs:{"no-action":"no-action","sub-group":"sub-group",color:"white"},scopedSlots:e._u([{key:"activator",fn:function(){return[t(b["b"],{staticClass:"body-2 text-uppercase font-weight-bold pl-0"},[e._v(e._s(s))])]},proxy:!0}],null,!0)},e._l(a[s],(function({to:a,icon:i,text:s},l){return t(D["a"],{key:l,staticClass:"pl-14",attrs:{to:a,link:"link"}},[t(A["a"],{staticClass:"mr-3"},[t(v["a"],{attrs:{size:"20"}},[e._v(e._s(i))])],1),t(b["a"],[t(b["b"],{staticClass:"body-2"},[e._v(e._s(s))])],1)],1)})),1)]}))],2)]}))],2)],1)]:t("div",{staticClass:"pa-2 mx-2 mt-10 white--text font-weight-bold primary rounded-pill text-body-2 text-center"},[e._v(" Nenhum módulo adicionado. ")])],2)},F=[];const M=["getFullYear","getMonth","getDate"],R=[...M,"getHours"],P=[...R,"getMinutes"],N=e=>e.normalize("NFD").replace(/\s+/g,"-").replace(/([\u0300-\u036f]|[^0-9a-zA-Z-])/g,"").toLocaleLowerCase(),B=(e,t)=>e.reduce((e,a)=>((e[a[t]]=e[a[t]]||[]).push(a),e),{});var E={props:{value:Boolean},data(){return{current:this.$route.path}},computed:{nav(){let e=this.modules.map(e=>{let t={...e};return t.menuId||(t.menuTitle="$"),t.submenuId||(t.submenuTitle="$"),t});e=B(e,"menuTitle");for(let t in e)e[t]=B(e[t],"submenuTitle");for(let t in e)for(let a in e[t])e[t][a]=e[t][a].map(({name:e,key:t,icon:a})=>({text:e,to:"/"+t,icon:a}));return e},modules(){return this.$rest("modules").list},sm(){return this.$vuetify.breakpoint.smAndDown}}},H=E,U=(a("7b2a"),Object(I["a"])(H,L,F,!1,null,null,null)),K=U.exports,z={data:()=>({drawer:!1}),components:{AppBar:T,NavigationDrawer:K}},V=z,W=Object(I["a"])(V,d,u,!1,null,null,null),J=W.exports,G=a("2db4"),Z=function(){var e=this,t=e._self._c;return t(G["a"],{attrs:{value:e.value&&e.visible,color:e.color,top:"top",timeout:e.timeout}},[t(v["a"],{attrs:{color:"white",left:"left",size:"16"}},[e._v("fas fa-info-circle")]),t("span",[e._t("default")],2),t(x["a"])],1)},Y=[],Q={props:{timeout:{type:Number,default:4e3},value:{default:!1},color:{type:String,default:"red"}},data:()=>({visible:null}),watch:{value(e){e?(this.visible=!0,this.timetoutId=window.setTimeout(()=>this.visible=!1,this.timeout)):(window.clearInterval(this.timetoutId),this.visible=!1),this.$emit("input")}},mounted(){this.value?this.visible=!0:this.visible=!1}},X=Q,ee=Object(I["a"])(X,Z,Y,!1,null,null,null),te=ee.exports,ae=function(){var e=this,t=e._self._c;return t("svg",{staticClass:"mrx-loading",attrs:{viewBox:"0 0 105 76"}},[t("path",{attrs:{d:"M104.4,0 L46,35.6 L105,50.6 L62.4,35.6 z M0.6,76 L59,40.3 L0,25.3 L42.6,40.3 z"}})])},ie=[],se=(a("68ce"),{}),le=Object(I["a"])(se,ae,ie,!1,null,null,null),ne=le.exports,oe=a("bc3a"),re=a.n(oe);const de={getByProperty:e=>(t,a)=>e.list.find(e=>e[t]==a),getById:e=>t=>de.getByProperty(e)("id",t),filterByProperty:e=>(t,a)=>e.list.filter(e=>e[t]==a)};var ue=de;const ce={updateList:(e,{data:t,keepCache:a,cacheItemKey:i})=>{if(Array.isArray(t))if(a&&e.list.length)for(let s of t)e.list.find(e=>e[i]==s[i])||e.list.push(s);else e.list=t;else window.console.warn("VuexRest: a mutação updateList deve ter um array como seu parâmetro de dados.")},refreshItem:(e,t)=>{const a=e.list.find(e=>e.id==t);a&&(e.item=a)},updateItem:(e,{id:t,data:a,keepCache:i})=>{e.itemId=t,e.item=a;const s=e.list.find(e=>e.id==t);if(s)for(let l in a)i&&s[l]||(s[l]=a[l]);else e.list.push({...a,id:t})},setProperty:(e,{id:t,prop:a,data:i})=>{const s=e.list.find(e=>e.id==t);s&&(s[a]=i)},remove:(e,t)=>e.list.splice(e.list.findIndex(e=>e.id==t),1),function:(e,t)=>t(e)};var me=ce;const pe=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLocaleLowerCase());var fe=pe;const he=(e,{id:t,prop:a,params:i})=>{let s="/"+e;return i=i&&new URLSearchParams(i).toString(),t&&(s+="/"+t),a&&(s+="/"+fe(a)),i&&(s+="?"+i),s},ge={get:async({state:e,commit:t},{id:a,params:i,save:s=!0,keepCache:l=!1,cacheItemKey:n="id"})=>{a&&t("refreshItem",a);const o=he(e.group,{id:a,params:i}),r=await Ce.get(o);if(!r)return null;const{data:d}=r;return d&&(s&&"function"===typeof s?t("function",e=>s(e,d)):a?t("updateItem",{id:a,data:d,keepCache:l,cacheItemKey:n}):t("updateList",{data:d,keepCache:l,cacheItemKey:n})),d},post:async({state:e,commit:t},{prop:a,data:i,params:s,save:l=!0})=>{let n=he(e.group,{prop:a,data:i,params:s});i&&"object"!==typeof i&&(i={value:i});const o=await Ce.post(n,i);return l&&"function"===typeof l?t("function",e=>l(e)):o.data&&t("updateList",{data:o.data}),o.data},put:async({state:e,commit:t},{id:a,prop:i,data:s,params:l,save:n=!0})=>{if(a&&i){let t=e.list.find(e=>e.id==a);if(t&&(t=t[i]),s==t)return}else if(a){const t=e.list.find(e=>e.id==a);if(s==t)return}let o=he(e.group,{id:a,prop:i,params:l});return s instanceof FormData?s=Object.fromEntries(s.entries()):"object"!==typeof s&&(s={value:s}),await Ce.put(o,s),n&&"function"===typeof n?t("function",e=>n(e)):a&&i?t("setProperty",{id:a,prop:i,data:"object"===typeof s?s.value:s}):a&&t("updateItem",{id:a,data:s}),!0},upload:async({state:e,commit:t},{id:a,prop:i,file:s,params:l,data:n,onUploadProgress:o,save:r=!0})=>{let d=he(e.group,{id:a,prop:i,params:l});const u={onUploadProgress:o},c=new FormData;c.append(i,s);for(let p in n)c.append(p,n[p]);const m=await Ce.post(d,c,u);return m.data.file?r&&"function"===typeof r?t("function",e=>r(e,m.data)):a&&i?t("setProperty",{id:a,prop:i,data:m.data.file}):a&&t("updateItem",{id:a,data:m.data.file}):window.console.warn(`VuexRest: a requisição para a rota "${d}" não teve como resposta um\n        objeto json com a propiedade file especificando a url para o caminho\n        do arquivo que foi feito upload.`),m.data},delete:async({state:e,commit:t},{id:a,params:i,save:s=!0})=>{const l=he(e.group,{id:a,params:i});return await Ce.delete(l),s&&"function"===typeof s?t("function",e=>s(e)):a&&t("remove",a),!0}};var ve=ge;const be=e=>({namespaced:!0,state:{list:[],itemId:null,item:{},group:e||""},getters:ue,mutations:me,actions:ve}),ye={id:"A propiedade options.id deve ser um número ou uma string.",prop:"A propiedade options.prop deve ser uma string.",data:"A propiedade options.data deve ser um objeto.",params:"A propiedade options.params deve ser um objeto.",file:"A propiedade options.params deve ser um objeto File.",onUploadProgress:"A propiedade options.onUploadProgress deve ser uma função.",save:"A propiedade options.save deve ser booleana ou uma função.",keepCache:"A propiedade options.save deve ser booleana."},xe={id:e=>"string"===typeof e||"number"===typeof e,prop:e=>"string"===typeof e,data:e=>"object"===typeof e,params:e=>"object"===typeof e,file:e=>e instanceof File,onUploadProgress:e=>"function"===typeof e,save:e=>"boolean"===typeof e||"function"===typeof e,keepCache:e=>"boolean"===typeof e},ke=e=>{if("object"!==typeof e)throw new TypeError("O parâmetro <options> deve ser um objeto.");for(let t in e)if(!xe[t](e[t]))throw new TypeError(ye[t])};var _e=ke;const Ce=re.a.create(),we=Object.keys(ue),Ie=Object.keys(ve),$e={install:(e,{base:t})=>{Ce.defaults.baseURL=t||"/",e.prototype.$rest=function(e){if("string"!==typeof e)throw new TypeError("O parâmetro <module> deve ser uma string.");const t=this.$store,a=(a,i)=>(_e(i||{}),t.dispatch(`${"_rest_"+e}/${a}`,i||{}));t.hasModule("_rest_"+e)||t.registerModule("_rest_"+e,be(fe(e)));const{item:i,list:s}=t.state["_rest_"+e],l={item:i,list:s,getters:{}};for(let n of we)l.getters[n]=t.getters[`${"_rest_"+e}/${n}`];for(let n of Ie)l[n]=e=>a(n,e);return l}}};var Te=$e,Se=a("2f62"),Oe={data:()=>({checking:!0}),computed:{...Object(Se["b"])(["lastRequestError","lastRequestSuccess"])},beforeCreate(){Ce.interceptors.request.use(e=>(this.$store.dispatch("startRequest"),e.headers["Authorization"]=localStorage.getItem("token")||"",e),e=>this.$store.dispatch("connectionStatusChange",{ok:!1,error:e})&&Promise.reject(e),{synchronous:!0}),Ce.interceptors.response.use(e=>this.$store.dispatch("endRequest",e.data||{})&&e,e=>303===e.response.status?(this.$router.push(new URL(e.response.data.redirect).pathname),this.$store.dispatch("endRequest",{})):403===e.response.status||401===e.response.status?(this.$auth.setStateProp("on",!1),this.$router.replace("/entrar"),this.$store.dispatch("endRequest",{})):this.$store.dispatch("endRequest",e.response.data||{})&&Promise.reject(e),{synchronous:!0})},created(){if(this.installed){if(!this.$auth.on){this.checking=!0;const e=window.localStorage.getItem("token"),t=["/entrar"].includes(this.$route.path);e?this.$auth.checkIn().then(e=>{this.$store.dispatch("setInfoUser",e),t&&this.$router.replace("/")}).catch(()=>!t&&this.$router.replace("/entrar")).finally(()=>this.checking=!1):t?this.checking=!1:(this.checking=!1,this.$router.replace("/entrar"))}}else"/setup"!==this.$route.path&&this.$router.replace("/setup"),this.checking=!1},components:{MainNav:J,FloatAlert:te,Loading:ne}},De=Oe,je=(a("6273"),Object(I["a"])(De,o,r,!1,null,null,null)),Ae=je.exports,qe=a("8c4f"),Le=function(){var e=this,t=e._self._c;return t(n["a"],{staticClass:"d-flex justify-center align-center pa-3",attrs:{color:"transparent",height:"100%"}},[t(h["a"],{staticClass:"pa-4",attrs:{height:"max-content",width:"320px",color:"primary lighten-2",outlined:"outlined"}},[t("div",{staticClass:"d-flex justify-center"},[t("img",{staticClass:"page-login-logo mb-3",attrs:{src:e.prefixPath+"/img/logo.svg"}})]),t("div",{staticClass:"grey--text text--lighten-3 text-center mb-4"},[t("div",{staticClass:"title"},[e._v("Painel de Administração")]),t("div",{staticClass:"text-body-1"},[e._v("v"+e._s(e.version))])]),t("login-form",{attrs:{loading:e.loading},on:{send:e.send}})],1)],1)},Fe=[],Me=a("4bd4"),Re=a("8654"),Pe=function(){var e=this,t=e._self._c;return t(Me["a"],{ref:"form"},[t(Re["a"],{attrs:{rules:[e.rules.required,e.rules.email],loading:e.loading,"prepend-inner-icon":"fas fa-user",type:"email",label:"E-mail",name:"email",autocomplete:"email",dense:"dense",outlined:"outlined",dark:"dark"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send.apply(null,arguments)}}}),t(Re["a"],{attrs:{rules:[e.rules.required],loading:e.loading,"append-icon":e.show?"fas fa-eye":"fas fa-eye-slash",type:e.show?"text":"password","prepend-inner-icon":"fas fa-lock",label:"Senha",name:"password",autocomplete:"password",dense:"dense",outlined:"outlined",dark:"dark"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send.apply(null,arguments)},"click:append":function(t){e.show=!e.show}}}),t(f["a"],{staticClass:"text-none d-block ml-auto",attrs:{loading:e.loading,color:"secondary",depressed:"depressed",block:"block"},on:{click:e.send}},[e._v("Entrar")])],1)},Ne=[];const Be=e=>!!e||"Requerido.",Ee=e=>!e||/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"E-mail inválido.",He=e=>!e||/^[a-z0-9_]+$/.test(e)||"Apenas caracteres alfanuméricos minúsculos e underline.",Ue=e=>!e||/^(https?:\/\/)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)$/.test(e)||"URL inválida.",Ke=e=>{if(!e)return!0;let t;try{e.replace(/\/([^/]+)\/(.+)?/,(e,a,i)=>{t=new RegExp(a,i)})}catch{return!1}return!!t};var ze={props:{loading:{type:Boolean,default:!1}},data:()=>({rules:{required:Be,email:Ee},show:!1}),methods:{send(){const e=this.$refs.form;if(e.validate()){const t=Object.fromEntries(new FormData(e.$el).entries());this.$emit("send",t)}}}},Ve=ze,We=(a("ccf5"),Object(I["a"])(Ve,Pe,Ne,!1,null,null,null)),Je=We.exports,Ge={data:()=>({loading:!1}),methods:{send(e){this.loading=!0,this.$auth.login(e).then(e=>{this.$store.dispatch("setInfoUser",e),this.$router.push("/")}).finally(()=>this.loading=!1)}},created(){this.$auth.on&&this.$router.replace("/")},components:{LoginForm:Je}},Ze=Ge,Ye=(a("04db"),Object(I["a"])(Ze,Le,Fe,!1,null,null,null)),Qe=Ye.exports,Xe=a("6b53"),et=function(){var e=this,t=e._self._c;return t(n["a"],{staticClass:"mx-auto pa-4 d-flex align-center",attrs:{color:"transparent","max-width":"960px","min-height":"100%"}},[e.loading?t("loading",{staticClass:"mx-auto"}):e.modules.length?t("div",{staticClass:"mx-auto"},[t("grid-container",{staticClass:"py-4",attrs:{cols:"125px 125px","cols-sm":"repeat(4, 125px)","cols-lg":"repeat(5, 125px)",gap:"16px"}},[e._l(e.nav,(function(a,i){return["$"===i?e._l(e.nav.$.$,(function({to:e,icon:a,text:i},s){return t(Xe["a"],{key:s,attrs:{"aspect-ratio":1,width:"125px"}},[t("module-card",{attrs:{to:e,title:i,icon:a}})],1)})):t("grid-item",{key:i,attrs:{"col-end":"span 2","col-end-sm":"span 4","col-end-lg":"span 5"}},[t("div",{staticClass:"white--text text-body-1 text-uppercase font-weight-bold"},[e._v(" "+e._s(i)+" ")]),t("grid-container",{attrs:{cols:"100px 100px 100px","cols-sm":"repeat(5, 120px)","cols-lg":"repeat(6, 125px)",gap:"16px"}},[e._l(a,(function(a,i){return e._l(a,(function({to:e,icon:a,text:s},l){return t(Xe["a"],{key:i+l,attrs:{"aspect-ratio":1,width:"125"}},[t("module-card",{attrs:{to:e,title:"$"!==i?`${i}${s}`:s,icon:a}})],1)}))}))],2)],1)]}))],2)],1):t("div",{staticClass:"pa-4 white--text font-weight-bold primary rounded-pill text-body-1 mx-auto"},[e._v(" Nenhum módulo adicionado. ")])],1)},tt=[],at=function(){var e=this,t=e._self._c;return t(h["a"],{staticClass:"module-card",attrs:{to:e.to,height:"100%",color:"primary lighten-1",outlined:"outlined"}},[t(v["a"],{attrs:{size:"50",color:"grey lighten-3"}},[e._v(e._s(e.icon))]),t("span",{staticClass:"font-weight-medium mt-2 grey--text text--lighten-5 text-center module-card-title"},[e._v(e._s(e.title))])],1)},it=[],st={props:{title:{type:String,required:!0},to:{type:String,required:!0},icon:{type:String,required:!0}}},lt=st,nt=(a("8420"),Object(I["a"])(lt,at,it,!1,null,null,null)),ot=nt.exports,rt={data:()=>({loading:!0}),computed:{modules(){return this.$rest("modules").list},nav(){let e=this.modules.map(e=>{let t={...e};return t.menuId||(t.menuTitle="$"),t.submenuId||(t.submenuTitle="$"),t});e=B(e,"menuTitle");for(let t in e)e[t]=B(e[t],"submenuTitle");for(let t in e)for(let a in e[t])e[t][a]=e[t][a].map(({name:e,key:t,icon:a})=>({text:e,to:"/"+t,icon:a}));return e}},beforeCreate(){this.$rest("modules").get().finally(()=>this.loading=!1)},components:{Loading:ne,ModuleCard:ot}},dt=rt,ut=Object(I["a"])(dt,et,tt,!1,null,null,null),ct=ut.exports,mt=function(){var e=this,t=e._self._c;return t(n["a"],{staticClass:"d-flex justify-center align-center pa-3",attrs:{color:"transparent",height:"100%"}},[t(h["a"],{staticClass:"pa-4",attrs:{height:"max-content",width:"320px",color:"primary lighten-2",outlined:"outlined"}},[t("div",{staticClass:"d-flex justify-center"},[t("img",{staticClass:"page-login-logo mb-3",attrs:{src:e.prefixPath+"/img/logo.svg"}})]),t("div",{staticClass:"title grey--text text--lighten-3 text-center mb-4"},[e._v(" Configurar Banco de Dados ")]),t("setup-form",{attrs:{loading:e.loading},on:{send:e.send}})],1)],1)},pt=[],ft=function(){var e=this,t=e._self._c;return t(Me["a"],{ref:"form"},[t(Re["a"],{attrs:{rules:[e.rules.required],loading:e.loading,disabled:e.loading,value:"localhost",type:"text",label:"HOST",name:"host",dense:"dense",outlined:"outlined",dark:"dark"}}),t(Re["a"],{attrs:{rules:[e.rules.required],loading:e.loading,disabled:e.loading,type:"text",label:"BANCO DE DADOS",name:"database",dense:"dense",outlined:"outlined",dark:"dark"}}),t(Re["a"],{attrs:{rules:[e.rules.required],loading:e.loading,disabled:e.loading,type:"text",label:"USUÁRIO",name:"user",dense:"dense",outlined:"outlined",dark:"dark"}}),t(Re["a"],{attrs:{loading:e.loading,disabled:e.loading,type:"password",label:"SENHA",name:"password",dense:"dense",outlined:"outlined",dark:"dark"}}),t(f["a"],{staticClass:"text-none d-block ml-auto",attrs:{loading:e.loading,color:"secondary",depressed:"depressed",block:"block"},on:{click:e.send}},[e._v("Confirmar")])],1)},ht=[],gt={props:{loading:{type:Boolean,default:!1}},data:()=>({rules:{required:Be}}),methods:{send(){const e=this.$refs.form;if(e.validate()){const t=Object.fromEntries(new FormData(e.$el).entries());this.$emit("send",t)}}}},vt=gt,bt=Object(I["a"])(vt,ft,ht,!1,null,null,null),yt=bt.exports,xt={data:()=>({loading:!1}),created(){(this.$auth.on||this.installed)&&this.$router.replace("/")},methods:{send(e){this.loading=!0,this.$rest("setup").post({data:e}).then(()=>{this.installed=!0,this.$router.push("/entrar")}).finally(()=>this.loading=!1)}},components:{SetupForm:yt}},kt=xt,_t=(a("a10f"),Object(I["a"])(kt,mt,pt,!1,null,null,null)),Ct=_t.exports,wt=a("99d9"),It=a("8fea"),$t=a("169a"),Tt=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:"Módulos"},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("toolbar-button",{attrs:{tip:"Menu",icon:"fas fa-bars",dark:"dark"},on:{click:function(t){e.dialogMenu=!0}}}),t("toolbar-button",{attrs:{tip:"Importar",icon:"fas fa-file-import",dark:"dark"},on:{click:function(t){return e.$refs.importInput.click()}}}),t("input",{ref:"importInput",attrs:{type:"file",hidden:"hidden"},on:{input:e.importFile}}),t("toolbar-button",{attrs:{to:e.$route.path+"/adicionar",tip:"Adicionar",icon:"fas fa-plus",dark:"dark"}})]},proxy:!0}])},[t(It["a"],{attrs:{headers:e.headers,items:e.items,loading:e.loading,height:"calc(100vh - 114px)","sort-by":"id","loading-text":"Carregado dados.","no-data-text":"Não há registros.","no-results-text":"Não há registros.","sort-desc":"sort-desc","fixed-header":"fixed-header","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer",dark:"dark"},on:{"click:row":t=>e.$router.push(e.$route.path+"/"+t.id)},scopedSlots:e._u([{key:"item.action",fn:function({item:a}){return[t(f["a"],{attrs:{color:"blue",icon:"icon",small:"small"},on:{click:function(t){return t.stopPropagation(),e.editMenuTitle(a)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-exchange-alt")])],1),t(f["a"],{staticClass:"ml-2",attrs:{disabled:0==a.removable,color:"red",icon:"icon",small:"small"},on:{click:function(t){return t.stopPropagation(),e.remove(a.id)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-trash")])],1)]}}])}),t($t["a"],{attrs:{"max-width":"400",persistent:"persistent"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[t(h["a"],{attrs:{dark:"dark"}},[t(wt["c"],{staticClass:"d-flex justify-center"},[e._v("Confirmar remoção")]),t(wt["b"],[t("p",[e._v(" Ao excluir um módulo, será excluído todos os posts e outros e registros vinculados à ele. ")]),t("p",{staticClass:"mb-0"},[e._v("Tem certeza que deseja continuar?")])]),t(wt["a"],{staticClass:"d-flex justify-space-between"},[t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",text:"text"},on:{click:function(t){return e.$emit("cancel")}}},[e._v("Cancelar")]),t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed"},on:{click:function(t){return e.$emit("confirm")}}},[e._v("Confirmar")])],1)],1)],1),t("menu-config-dialog",{attrs:{menus:e.menus},model:{value:e.dialogMenu,callback:function(t){e.dialogMenu=t},expression:"dialogMenu"}}),e.moduleItem?t("menu-edit-dialog",{attrs:{menus:e.menus,"module-item":e.moduleItem},model:{value:e.dialogEditMenu,callback:function(t){e.dialogEditMenu=t},expression:"dialogEditMenu"}}):e._e()],1)},St=[],Ot=function(){var e=this,t=e._self._c;return t("div",[t("tooltip",{attrs:{tip:e.tip,top:"top"}},[e.sm?t(f["a"],e._g(e._b({attrs:{icon:"icon",exact:"exact",small:"small"}},"v-btn",e.$attrs,!1),e.$listeners),[t(v["a"],{attrs:{small:"small"}},[e._v(e._s(e.icon))])],1):t(f["a"],e._g(e._b({staticClass:"toolbar-button-desktop",attrs:{text:"text",exact:"exact",small:"small"}},"v-btn",e.$attrs,!1),e.$listeners),[t(v["a"],{attrs:{small:"small"}},[e._v(e._s(e.icon))])],1)],1)],1)},Dt=[],jt=a("3a2f"),At=function(){var e=this,t=e._self._c;return t(jt["a"],{attrs:{top:e.top,right:e.right,left:e.left,bottom:e.bottom},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("div",e._g(e._b({},"div",i,!1),a),[e._t("default")],2)]}}],null,!0)},[t("span",[e._v(e._s(e.tip))])])},qt=[],Lt={props:{tip:{type:String,default:""},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1}}},Ft=Lt,Mt=Object(I["a"])(Ft,At,qt,!1,null,null,null),Rt=Mt.exports,Pt={props:{icon:{type:String,required:!0},tip:{type:String,default:""}},computed:{sm(){return this.$vuetify.breakpoint.smAndDown}},components:{Tooltip:Rt}},Nt=Pt,Bt=(a("85f4"),Object(I["a"])(Nt,Ot,Dt,!1,null,null,null)),Et=Bt.exports,Ht=a("71d9"),Ut=function(){var e=this,t=e._self._c;return t(n["a"],{staticClass:"mx-auto module-page pa-2",attrs:{width:e.width,"max-width":e.maxWidth,color:"transparent"}},[t(Ht["a"],{staticClass:"elevation-0 rounded-t",attrs:{color:"accent darken-1",width:"100%",dark:"dark",dense:"dense"}},[t("h4",[e._v(e._s(e.title))]),t(x["a"]),t("div",{staticClass:"module-page-toolbar"},[e._t("toolbar"),e.prev&&!e.sm?t("toolbar-button",{attrs:{to:e.prev,tip:"Voltar",icon:"fas fa-undo-alt",dark:"dark"}}):e._e()],2)],1),e._t("default")],2)},Kt=[],zt={props:{title:{type:String,required:!0},width:{type:String,default:"100%"},maxWidth:{type:String,default:"100%"}},computed:{sm(){return this.$vuetify.breakpoint.smAndDown},prev(){const e=this.$route.path;return/^\/[^/]+\/.+/.test(e)&&e.replace(/(\/[^/]+)(.*)$/,"$1")}},beforeCreate(){this.$rest("modules").get({keepCache:!0})},components:{ToolbarButton:Et}},Vt=zt,Wt=(a("0aa1"),Object(I["a"])(Vt,Ut,Kt,!1,null,null,null)),Jt=Wt.exports,Gt=a("a797"),Zt=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"500px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 d-flex flex-column flex-sm-row justify-space-between"},[t("div",[e._v("Menu")]),t("div",[t(f["a"],{staticClass:"mr-2 text-none",attrs:{color:"secondary",disabled:!e.selecteds.length,depressed:"depressed",small:"small"},on:{click:e.remove}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-trash")]),t("span",[e._v("Remover")])],1),t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed",small:"small"},on:{click:function(t){e.addDialog=!0}}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-plus")]),t("span",[e._v("Adicionar")])],1)],1)]),e.menus.length?t(It["a"],{attrs:{headers:e.headers,items:e.menus,"mobile-breakpoint":0,"no-data-text":"Não há registros.","sort-by":"id","sort-desc":"sort-desc","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},on:{"click:row":t=>e.openEditDialog(t)},model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}}):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum menu foi adicionada. ")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e(),t("add",{model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}}),e.menuSelectedToEdit?t("edit",{attrs:{menu:e.menuSelectedToEdit},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}}):e._e()],1)},Yt=[],Qt=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Adicionar menu")]),t(Re["a"],{staticClass:"mb-3",attrs:{label:"Título",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.addMenuTitle,callback:function(t){e.addMenuTitle=t},expression:"addMenuTitle"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.addMenuTitle,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.add}},[e._v("Adicionar")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},Xt=[],ea={props:{value:Boolean},data:()=>({loading:!1,addMenuTitle:null}),methods:{add(){this.loading=!0,this.$rest("modulesMenu").post({data:{title:this.addMenuTitle}}).then(e=>this.$emit("add",e)).finally(()=>{this.addMenuTitle=null,this.loading=!1})}},components:{Loading:ne}},ta=ea,aa=Object(I["a"])(ta,Qt,Xt,!1,null,null,null),ia=aa.exports,sa=a("1800"),la=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Editar menu")]),t(Me["a"],{ref:"form"},[t(Re["a"],{staticClass:"mb-3",attrs:{value:e.menu.title,label:"Título",name:"title",outlined:"outlined",dense:"dense","hide-details":"hide-details"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t=>e.edit(t.target.value)).apply(null,arguments)}}}),t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold text-caption"},[e._v(" Submenus ")]),t(h["a"],{staticClass:"mb-4",attrs:{outlined:"outlined"}},[t(S["a"],{staticClass:"py-0"},[e._l(e.menu.submenus,(function(a){return[t(D["a"],{key:a.id,staticClass:"submenuitem"},[t(b["b"],{staticClass:"text-body-2 submenuitem-title",attrs:{contenteditable:"contenteditable"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t=>e.editSubmenu(a,t.target.textContent)).apply(null,arguments)}}},[e._v(e._s(a.title))]),t(sa["a"],[t(f["a"],{attrs:{icon:"icon",small:"small"},on:{click:function(t){return e.removeSubmenu(a.id)}}},[t(v["a"],{attrs:{size:"14"}},[e._v("fas fa-trash")])],1)],1)],1),t(g["a"],{key:a.id})]}))],2),t("div",{staticClass:"submenu-add-input py-1"},[t(v["a"],{staticClass:"pa-3",attrs:{small:"small"}},[e._v("fas fa-plus")]),t("input",{attrs:{placeholder:"Adicionar Submenu"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSubmenu.apply(null,arguments)},blur:e=>e.target.value=""}})],1)],1)],1)],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},na=[],oa={props:{value:Boolean,menu:{type:Object,required:!0}},data:()=>({loading:!1}),methods:{edit(e){this.loading=!0,this.$rest("modulesMenu").put({id:this.menu.id,data:{title:e}}).finally(()=>{this.loading=!1})},addSubmenu(e){this.loading=!0,this.$rest("modulesSubmenu").post({data:{title:e.target.value},params:{menuId:this.menu.id}}).then(e=>{this.menu.submenus.push(e)}).finally(()=>{this.loading=!1})},editSubmenu(e,t){this.loading=!0,this.$rest("modulesSubmenu").put({id:e.id,data:{title:t}}).then(()=>{e.title=t}).finally(()=>{this.loading=!1})},removeSubmenu(e){this.loading=!0,this.$rest("modulesSubmenu").delete({id:e}).finally(()=>{const t=this.menu.submenus.findIndex(t=>t.id===e);this.menu.submenus.splice(t,1),this.loading=!1})}},components:{Loading:ne}},ra=oa,da=(a("56e7"),Object(I["a"])(ra,la,na,!1,null,null,null)),ua=da.exports,ca={props:{value:Boolean,menus:Array},data:()=>({addDialog:!1,editDialog:!1,loading:!1,headers:[{text:"Título",value:"title",align:"left"}],editMenuTitle:null,rules:{required:Be},selecteds:[],menuSelectedToEdit:null}),methods:{remove(){this.loading=!0,Promise.all(this.selecteds.map(({id:e})=>this.$rest("modulesMenu").delete({id:e}))).finally(()=>{this.selecteds=[],this.loading=!1})},editTitle(e){const t=this.menus.find(({id:t})=>t==e).title;this.editMenuTitle&&t!==this.editMenuTitle&&(this.loading=!0,this.$rest("modulesMenu").put({id:e,prop:"title",data:{value:this.editMenuTitle}}).then(()=>this.loading=!1))},openEditDialog(e){this.menuSelectedToEdit=e,this.editDialog=!0}},components:{Loading:ne,Add:ia,Edit:ua}},ma=ca,pa=Object(I["a"])(ma,Zt,Yt,!1,null,null,null),fa=pa.exports,ha=a("b974"),ga=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Definir menu")]),t(Me["a"],{ref:"form"},[t(ha["a"],{staticClass:"mb-3",attrs:{items:e.menuItems,label:"Menu",name:"menuId",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.menuSelected,callback:function(t){e.menuSelected=t},expression:"menuSelected"}}),t(ha["a"],{staticClass:"mb-3",attrs:{value:e.submenuId,items:e.submenusItems,label:"Submenu",name:"submenuId",outlined:"outlined",dense:"dense","hide-details":"hide-details"}})],1),t(f["a"],{staticClass:"text-none",attrs:{disabled:e.loading,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.save}},[e._v("Salvar")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},va=[],ba={props:{value:Boolean,menus:Array,moduleItem:Object},data:()=>({loading:!1,menuSelected:null}),computed:{menuId(){return this.moduleItem.menuId},submenuId(){return this.moduleItem.submenuId},menuItems(){const e=this.$rest("modulesMenu").list.map(({id:e,title:t})=>({text:t,value:e}));return e.unshift({text:"(Nenhum)",value:null}),e},submenusItems(){let e=[{text:"(Nenhum)",value:null}];if(!this.menuSelected)return e;const t=this.$rest("modulesMenu").list.find(e=>e.id===this.menuSelected);return t&&t.submenus.forEach(({id:t,title:a})=>{e.push({text:a,value:t})}),e}},methods:{save(){this.loading=!0;const e=this.$refs.form,t=new FormData(e.$el);this.$rest("modules").put({id:this.moduleItem.id,prop:"menu",data:t}).then(()=>{this.loading=!1;const e=t.get("menuId"),a=t.get("submenuId");if(e){const t=this.menus.find(({id:t})=>e==t);if(this.moduleItem.menuId=e,this.moduleItem.menuTitle=t.title,a){const e=t.submenus.find(({id:e})=>a==e);this.moduleItem.submenuId=a,this.moduleItem.submenuTitle=e.title}else this.moduleItem.submenuId=null,this.moduleItem.submenuTitle=null}else this.moduleItem.menuId=null,this.moduleItem.menuTitle=null,this.moduleItem.submenuId=null,this.moduleItem.submenuTitle=null;this.$emit("input",!1)})}},watch:{moduleItem(){this.menuSelected=this.menuId}},created(){this.menuSelected=this.menuId},components:{Loading:ne}},ya=ba,xa=Object(I["a"])(ya,ga,va,!1,null,null,null),ka=xa.exports,_a={data:()=>({loading:!1,headers:[{text:"Id",value:"id",align:"left"},{text:"Nome",value:"name"},{text:"View",value:"viewName"},{text:"Menu",value:"menuTitle"},{text:"Submenu",value:"submenuTitle"},{text:"",value:"action",align:"right"}],dialogConfirm:!1,dialogMenu:!1,dialogEditMenu:!1,moduleItem:null}),computed:{items(){return this.$rest("modules").list},sm(){return this.$vuetify.breakpoint.smAndDown},menus(){return this.$rest("modulesMenu").list}},methods:{remove(e){this.confirmation().then(()=>this.$rest("modules").delete({id:e}))},confirmation(){return this.dialogConfirm=!0,new Promise((e,t)=>{this.$once("confirm",()=>{this.dialogConfirm=!1,e()}),this.$once("cancel",()=>{this.dialogConfirm=!1,t()})})},editMenuTitle(e){this.moduleItem=e,this.dialogEditMenu=!0},importFile({target:e}){if(!e.files.length)return;this.loading=!0;const t=new FileReader;t.onload=t=>{this.$rest("modules").post({data:JSON.parse(t.target.result)}).finally(()=>{e.value="",this.loading=!1})},t.readAsText(e.files[0])}},created(){1==this.$store.state.user.type?(this.loading=!0,this.$rest("modulesMenu").get(),this.$rest("modules").get().finally(()=>this.loading=!1)):this.$router.replace("/error404")},components:{ToolbarButton:Et,ModuleTemplate:Jt,MenuConfigDialog:fa,MenuEditDialog:ka}},Ca=_a,wa=Object(I["a"])(Ca,Tt,St,!1,null,null,null),Ia=wa.exports,$a=a("62ad"),Ta=a("0fd9"),Sa=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:"Adicionar módulo"}},[t(h["a"],{staticClass:"pa-4 pb-0 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form",staticClass:"pt-4"},[t(Ta["a"],[t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"12",lg:"3"}},[t(Re["a"],{attrs:{rules:[e.rules.required],label:"Nome",outlined:"outlined",dense:"dense"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[t(ha["a"],{attrs:{items:e.views,rules:[e.rules.required],label:"Tipo",outlined:"outlined",dense:"dense"},model:{value:e.viewSelected,callback:function(t){e.viewSelected=t},expression:"viewSelected"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[t(Re["a"],{attrs:{rules:[e.rules.required],"append-icon":e.icon,label:"Ícone",outlined:"outlined",dense:"dense"},model:{value:e.icon,callback:function(t){e.icon=t},expression:"icon"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[t(Re["a"],{attrs:{rules:[e.rules.required,e.rules.alphaNumUnderline],label:"Chave",outlined:"outlined",dense:"dense"},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}})],1)],1),e.viewSelected?t(e.viewSelected+"-add",{ref:"view",tag:"component"}):e._e(),e.viewSelected&&"custom"!==e.viewSelected?t("div",{staticClass:"d-flex justify-end py-4"},[t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed",loading:e.loading,disabled:e.loading},on:{click:e.add}},[e._v("Adicionar")])],1):e._e()],1)],1)],1)},Oa=[],Da=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pa-4 text-body-2 text-center font-weight-bold"},[e._v(' Módulos do tipo "Customizado" apenas podem ser adicionados no código fonte. ')])},ja=[],Aa={},qa=Object(I["a"])(Aa,Da,ja,!1,null,null,null),La=qa.exports,Fa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pa-4 text-body-2 text-center font-weight-bold"},[e._v(' O módulo "'+e._s(e.data.name)+'" apenas pode ser alterado no código fonte. ')])},Ma=[],Ra={props:{data:{type:Object,required:!0}}},Pa=Ra,Na=Object(I["a"])(Pa,Fa,Ma,!1,null,null,null),Ba=Na.exports,Ea={moduleConfig:{components:{add:La,edit:Ba}},modules:[]},Ha=function(){var e=this,t=e._self._c;return t("ModuleTemplate",{attrs:{title:e.data.name},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("RemoveItemButton",{attrs:{"module-key":e.moduleKey,disabled:!e.selecteds.length,selecteds:e.selecteds,items:e.items},on:{loading:t=>e.loading=t}}),t("AddItemButton",{attrs:{"module-key":e.moduleKey},on:{loading:t=>e.loading=t}}),t("PrintButton"),t("ExportButton",{attrs:{"module-key":e.data.key,fields:e.fields}})]},proxy:!0}])},[t("div",[t("div",{staticClass:"pa-2 primary lighten-1 module-search"},[t(Re["a"],{attrs:{"append-icon":"fas fa-search",label:"Pesquisar","single-line":"single-line","hide-details":"hide-details",dense:"dense",outlined:"outlined",dark:"dark"},on:{"click:append":function(t){return e.get(1)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.get(1)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(It["a"],{attrs:{headers:e.headers,items:e.items,loading:e.loading,"server-items-length":e.totalItems,"items-per-page":e.itemsPerPage,height:"calc(100vh - 226px)","sort-by":"id","loading-text":"Carregando dados.","no-data-text":"Não há registros.","no-results-text":"Não há registros.","show-select":"","sort-desc":"","fixed-header":"",dark:""},on:{"click:row":e.showItem,"update:page":e.changePage},scopedSlots:e._u([e._l(e.headersWithFilter,(function(a){return{key:"header."+a.value,fn:function(){return[t(a.fieldFilterComponent,{key:a.value,tag:"component",attrs:{text:a.text,field:a.field,options:e.filtersOptions[a.value]},on:{filter:e.filter}})]},proxy:!0}})),e._l(e.columnsWithDisplay,(function({key:a}){return{key:"item."+a,fn:function({item:i}){return["string"===typeof i[a]?t("span",{key:a},[e._v(e._s(i[a]))]):i[a]&&"object"===typeof i[a]?[i[a].innerHTML?t("div",{key:a,domProps:{innerHTML:e._s(i[a].innerHTML)}}):i[a].component?t(i[a].component,{key:a,tag:"component",attrs:{item:i,name:a,value:i[a].value}}):e._e()]:e._e()]}}})),{key:"item.action",fn:function({item:a}){return[t("ToggleActiveButton",{attrs:{"module-key":e.moduleKey,item:a,items:e.items}})]}}],null,!0),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}})],1),t(Gt["a"],{attrs:{absolute:"absolute"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("Loading")],1)],1)},Ua=[],Ka=function(){var e=this,t=e._self._c;return t("ToolbarButton",{attrs:{tip:"Adicionar",icon:"fas fa-plus",dark:"dark"},on:{click:e.add}})},za=[],Va={props:{moduleKey:{type:String,required:!0}},methods:{add(){this.$emit("loading",!0),this.$rest(this.moduleKey).post().then(({id:e})=>this.$router.push(this.$route.path+"/"+e)).finally(()=>this.$emit("loading",!1))}},components:{ToolbarButton:Et}},Wa=Va,Ja=Object(I["a"])(Wa,Ka,za,!1,null,null,null),Ga=Ja.exports,Za=function(){var e=this,t=e._self._c;return t("ToolbarButton",{attrs:{disabled:e.disabled,tip:"Remover",icon:"fas fa-trash",dark:"dark"},on:{click:e.remove}})},Ya=[],Qa={props:{moduleKey:{type:String,required:!0},items:{type:Array,required:!0},selecteds:{type:Array,required:!0},disabled:{type:Boolean,defautl:!1}},methods:{remove(){this.$emit("loading",!0),Promise.all(this.selecteds.map(({id:e})=>this.$rest(this.moduleKey).delete({id:e}).then(()=>{this.items.splice(this.items.findIndex(t=>t.id==e),1)}))).finally(()=>this.$emit("loading",!1))}},components:{ToolbarButton:Et}},Xa=Qa,ei=Object(I["a"])(Xa,Za,Ya,!1,null,null,null),ti=ei.exports,ai=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex justify-end"},[t(f["a"],{attrs:{color:e.color,icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.toggleActive(e.item.id,!e.itemActive)}}},[t(v["a"],{attrs:{small:""}},[e._v(e._s(e.icon))])],1)],1)},ii=[],si={props:{moduleKey:{type:String,required:!0},items:{type:Array,required:!0},item:{type:Object,required:!0}},computed:{itemActive(){return+this.item.active},color(){return this.itemActive?"green":"blue"},icon(){return this.itemActive?"fas fa-eye":"fas fa-eye-slash"}},methods:{toggleActive(e,t){this.$rest(this.moduleKey).put({id:e,prop:"active",data:{value:0|t}}).then(()=>this.items.find(t=>t.id==e).active=0|t)}}},li=si,ni=Object(I["a"])(li,ai,ii,!1,null,null,null),oi=ni.exports,ri=function(){var e=this,t=e._self._c;return t("toolbar-button",{attrs:{tip:"Imprimir",icon:"fas fa-print",dark:"dark"},on:{click:e.print}})},di=[],ui={components:{ToolbarButton:Et},methods:{print(){window.print()}}},ci=ui,mi=Object(I["a"])(ci,ri,di,!1,null,null,null),pi=mi.exports,fi=function(){var e=this,t=e._self._c;return t("div",[t("toolbar-button",{attrs:{tip:"Exportar",icon:"fas fa-file-export",dark:"dark"},on:{click:function(t){e.dialog=!0}}}),t($t["a"],{attrs:{"max-width":"300px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 d-flex flex-column flex-sm-row justify-center"},[e._v(" Exportar Itens Ativos ")]),t("div",[t(ha["a"],{staticClass:"mb-3",attrs:{items:e.types,rules:[e.rules.required],label:"Tipo",name:"type",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.typeSelected,callback:function(t){e.typeSelected=t},expression:"typeSelected"}}),t(ha["a"],{staticClass:"mb-3",attrs:{items:e.parsedFields,rules:[e.rules.required],label:"Campos",name:"fields",multiple:"multiple",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.fieldsSelecteds,callback:function(t){e.fieldsSelecteds=t},expression:"fieldsSelecteds"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:e.submitDisabled,loading:e.loading,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.exportation}},[e._v("Exportar")])],1)])],1),t("a",{ref:"link",attrs:{download:"export"}})],1)},hi=[],gi={props:{moduleKey:{type:String,required:!0},fields:{type:Array,required:!0}},data:()=>({dialog:!1,types:["Excel"],typeSelected:"Excel",fieldsSelecteds:[],rules:{required:Be},loading:!1}),computed:{parsedFields(){const e=this.fields.map(({name:e,key:t})=>({text:e,value:t}));return e.unshift({text:"Id",value:"id"}),e},submitDisabled(){return!this.typeSelected||!this.fieldsSelecteds.length}},components:{ToolbarButton:Et},methods:{async exportation(){this.loading=!0;const e={type:this.typeSelected,fields:this.fieldsSelecteds},t=await fetch(`${this.server}/rest/${this.moduleKey}/export`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:localStorage.getItem("token")}});if(this.loading=!1,t.ok){const e=await t.blob(),a=URL.createObjectURL(e),i=this.$refs.link;i.href=a,i.click(),i.href="",URL.revokeObjectURL(a)}else{const e=await t.json();this.$store.dispatch("endRequest",e)}}}},vi=gi,bi=Object(I["a"])(vi,fi,hi,!1,null,null,null),yi=bi.exports,xi=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2"}},[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold text-caption"},[e._v(" "+e._s(e.label)+" ")]),t("div",{class:[e.disabled?"disabled":"","view-big-text-field"]},[t("ckeditor",{staticClass:"elevation-1",attrs:{value:e.value,editor:e.editor,config:e.config,disabled:e.disabled},on:{input:t=>e.editorData=t}}),t(Re["a"],{attrs:{name:e.name,type:"hidden"},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1)])},ki=[],_i=a("0469"),Ci=a("c4b1"),wi=a("8a91"),Ii=a("a20b"),$i=a("3d63"),Ti=a("85a9"),Si=a("2d79"),Oi=a("271b"),Di=a("290f"),ji=a("f518"),Ai=a("e195"),qi=a("8352"),Li=a("2566"),Fi=a("2430"),Mi=a("8b25"),Ri=a("7e0c"),Pi=a("0062"),Ni=a("39a0"),Bi=a("233a"),Ei=a("34ab"),Hi=a("64f1"),Ui=a("0bf6"),Ki=a("56b3"),zi=a("7212"),Vi=a("6fa7"),Wi=a("2914"),Ji=a("d4c1"),Gi=a("8068"),Zi=a("63ee"),Yi=a("4801"),Qi=a("1b4b"),Xi=a("0e17"),es=a("25ca"),ts=a("f61b"),as=a("2b10"),is=a("e1ed"),ss=a("643c"),ls=a("1cdd"),ns=a("2bea"),os=a("9813"),rs=a("f4e9"),ds=a("9799"),us=a("7041"),cs=a("32ea"),ms={props:{name:{type:String,required:!0},label:{type:String,required:!0},fieldTypeKey:{type:String,required:!0},value:String},computed:{isAdminUser(){return 1==this.$store.state.user.type}}},ps={props:{disabled:{type:Boolean,default:!1},fieldId:{type:Number}},data:()=>({editor:_i["a"],editorData:""}),computed:{moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub},config(){const e={plugins:[Ci["a"],wi["a"],Ii["a"],$i["a"],Ti["a"],Si["a"],Oi["a"],Di["a"],ji["a"],Ai["a"],qi["a"],Li["a"],Fi["a"],Mi["a"],Ri["a"],Pi["a"],Ni["a"],Bi["a"],Ei["a"],Hi["a"],Ui["a"],Ki["a"],zi["a"],Vi["a"],Wi["a"],Ji["a"],Gi["a"],Zi["a"],Yi["a"],Qi["a"],Xi["a"],es["a"],ts["a"],as["a"],is["a"],ss["a"],ls["a"],ns["a"],os["a"],rs["a"],ds["a"],us["a"],cs["a"]],toolbar:{items:["heading","|","alignment","|","bold","italic","underline","|","fontSize","fontColor","fontBackgroundColor","|","link","bulletedList","numberedList","|","outdent","indent","|",...(()=>{const e=["mediaEmbed","|"];return this.fieldId&&e.unshift("imageInsert"),e})(),"insertTable","blockQuote","code","horizontalLine","|","htmlEmbed","sourceEditing","|","undo","redo","|","findAndReplace"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},htmlEmbed:{showPreviews:!0}};return this.fieldId&&(e.extraPlugins=[this.upload],e.image={toolbar:["imageTextAlternative","imageStyle:alignLeft","imageStyle:block","imageStyle:alignRight","linkImage"]}),e},upload(){const e=this;return function(t){t.plugins.get("FileRepository").createUploadAdapter=t=>({loader:t,upload:()=>t.file.then(t=>e.$rest("modulesImages").upload({file:t,prop:"image",params:{itemId:e.itemId,moduleId:e.moduleId,fieldId:e.fieldId}}).then(({file:t})=>({default:e.files+t})).catch(()=>{throw"Não foi possível fazer upload do arquivo."}))})}}},mounted(){this.editorData=this.value},mixins:[ms]},fs=ps,hs=(a("b96f"),Object(I["a"])(fs,xi,ki,!1,null,null,null)),gs=hs.exports,vs={name:"bigtextfield",component:gs},bs=a("c6a6"),ys=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"d-flex"},[t(bs["a"],{attrs:{label:e.label,name:e.name,items:e.categoriesSelect,"no-data-text":"Nenhuma categoria adicionada",dense:"",outlined:"",dark:""},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}}),t(f["a"],{staticClass:"ml-1",attrs:{icon:"icon",small:"small"},on:{click:function(t){e.listDialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1)],1),t("ListDialog",{attrs:{"field-id":e.fieldId,categories:e.categories,"link-module":e.linkModule,"is-admin-user":e.isAdminUser},model:{value:e.listDialog,callback:function(t){e.listDialog=t},expression:"listDialog"}})],1)},xs=[],ks=a("7679"),_s=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Categorias","max-width":"500px"},on:{input:t=>e.$emit("input",t)},scopedSlots:e._u([{key:"actions",fn:function(){return[e.isAdminUser?t("template-dialog-header-button",{attrs:{icon:e.linkModule?"fas fa-unlink":"fas fa-link",text:(e.linkModule?"Desvincular":"Vincular")+" Módulo",disabled:!e.linkModule&&Boolean(e.categories.length)},on:{click:function(t){e.linkModule?e.unlink():e.linkModuleDialog=!0}}}):e._e(),e.linkModule?e._e():[t("template-dialog-header-button",{attrs:{disabled:!e.selecteds.length,icon:"fas fa-trash",text:"Remover"},on:{click:e.remove}}),t("template-dialog-header-button",{attrs:{icon:"fas fa-plus",text:"Adicionar"},on:{click:function(t){e.addDialog=!0}}})]]},proxy:!0}])},[e.linkModule?t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(' Esse campo foi vinculado ao módulo de chave "'+e._s(e.linkModule)+'". ')]):e.categories.length?t(It["a"],{attrs:{headers:e.headers,items:e.categories,"mobile-breakpoint":0,"no-data-text":"Não há registros.","sort-by":"id","sort-desc":"sort-desc","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.title",fn:function({item:a}){return[t(ks["a"],{staticClass:"primary lighten-4",attrs:{"return-value":e.editCategoryTitle,dark:"dark"},on:{save:function(t){return e.editTitle(a.id)},"update:returnValue":function(t){e.editCategoryTitle=t},"update:return-value":function(t){e.editCategoryTitle=t}},scopedSlots:e._u([{key:"input",fn:function(){return[t(Re["a"],{attrs:{value:a.title,rules:[e.rules.required],label:"Renomear","single-line":"single-line",counter:"counter"},on:{input:t=>e.editCategoryTitle=t}})]},proxy:!0}],null,!0)},[e._v(e._s(a.title)+" ")])]}}]),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}}):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhuma categoria foi adicionada. ")]),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e(),t("add",{attrs:{"field-id":e.fieldId},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}}),t("link-module",{attrs:{"field-id":e.fieldId,"link-module":e.linkModule},model:{value:e.linkModuleDialog,callback:function(t){e.linkModuleDialog=t},expression:"linkModuleDialog"}})],1)},Cs=[],ws=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":e.maxWidth},on:{input:t=>e.$emit("input",t)}},[e.loading?e._e():t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 d-flex flex-column flex-sm-row",class:e.simple?"justify-center":"justify-space-between"},[t("div",[e._v(e._s(e.title))]),e.simple?e._e():t("div",{staticClass:"field-dialog-actions d-flex"},[e._t("actions")],2)]),e._t("default")],2),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},Is=[],$s={props:{value:Boolean,maxWidth:[String,Number],title:String,loading:Boolean,simple:{type:Boolean,value:!1}},components:{Loading:ne}},Ts=$s,Ss=(a("3bce"),Object(I["a"])(Ts,ws,Is,!1,null,null,null)),Os=Ss.exports,Ds=function(){var e=this,t=e._self._c;return t("tooltip",{attrs:{tip:e.text,top:"top"}},[t(f["a"],{staticClass:"text-none",attrs:{disabled:e.disabled,color:"secondary",depressed:"depressed","x-small":"x-small",fab:"fab"},on:{click:t=>e.$emit("click",t)}},[t(v["a"],{attrs:{small:"small"}},[e._v(e._s(e.icon))])],1)],1)},js=[],As={props:{icon:{type:String,required:!0},text:{type:String,required:!0},disabled:Boolean},components:{Tooltip:Rt}},qs=As,Ls=Object(I["a"])(qs,Ds,js,!1,null,null,null),Fs=Ls.exports,Ms=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Adicionar categoria")]),t(Re["a"],{staticClass:"mb-3",attrs:{label:"Título",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.addCategoryTitle,callback:function(t){e.addCategoryTitle=t},expression:"addCategoryTitle"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.addCategoryTitle,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.add}},[e._v("Adicionar")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},Rs=[],Ps={props:{value:Boolean,fieldId:{type:Number,required:!0}},data:()=>({loading:!1,addCategoryTitle:null}),computed:{moduleId(){return this.$rest("modules").item.id}},methods:{add(){this.loading=!0,this.$rest("modulesCategories").post({data:{title:this.addCategoryTitle},params:{moduleId:this.moduleId,fieldId:this.fieldId}}).then(e=>this.$emit("add",e)).finally(()=>{this.addCategoryTitle=null,this.addDialog=!1,this.loading=!1})}},components:{Loading:ne}},Ns=Ps,Bs=Object(I["a"])(Ns,Ms,Rs,!1,null,null,null),Es=Bs.exports,Hs=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Vincular módulo")]),t(ha["a"],{staticClass:"mb-3",attrs:{items:e.modules,label:"Módulo",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.selectedModule,callback:function(t){e.selectedModule=t},expression:"selectedModule"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.selectedModule,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.link}},[e._v("Vincular")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},Us=[],Ks={props:{value:Boolean,fieldId:{type:Number,required:!0}},data:()=>({loading:!1,selectedModule:null}),computed:{moduleId(){return this.$rest("modules").item.id},modules(){return this.$rest("modules").list.filter(({id:e,viewKey:t})=>"table"===t&&e!=this.$rest("modules").item.id).map(({name:e,key:t})=>({text:e,value:t}))}},methods:{link(){this.loading=!0,this.$rest("modulesCategories").put({id:"link-module",data:{link:this.selectedModule},params:{fieldId:this.fieldId,moduleId:this.moduleId}}).finally(()=>{this.$router.go()})}},components:{Loading:ne}},zs=Ks,Vs=Object(I["a"])(zs,Hs,Us,!1,null,null,null),Ws=Vs.exports,Js={props:{value:Boolean,fieldId:{type:Number,required:!0},categories:{type:Array,default:()=>[]},isAdminUser:{type:Boolean,default:!1},linkModule:String},data:()=>({addDialog:!1,linkModuleDialog:!1,loading:!1,headers:[{text:"Título",value:"title",align:"left"}],editCategoryTitle:null,rules:{required:Be},selecteds:[]}),computed:{moduleKey(){return this.$rest("modules").item.key},moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub||1}},methods:{remove(){this.loading=!0,Promise.all(this.selecteds.map(({id:e})=>this.$rest("modulesCategories").delete({id:e,params:{moduleId:this.moduleId}}))).finally(()=>{this.selecteds=[],this.loading=!1})},editTitle(e){const t=this.categories.find(({id:t})=>t==e).title;this.editCategoryTitle&&t!==this.editCategoryTitle&&(this.loading=!0,this.$rest("modulesCategories").put({id:e,prop:"title",data:{value:this.editCategoryTitle},params:{moduleId:this.moduleId}}).then(()=>this.loading=!1))},unlink(){this.loading=!0,this.$rest("modulesCategories").put({id:"unlink-module",data:{link:null},params:{fieldId:this.fieldId,moduleId:this.moduleId}}).finally(()=>{this.$router.go()})}},components:{Loading:ne,Add:Es,LinkModule:Ws,TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs}},Gs=Js,Zs=Object(I["a"])(Gs,_s,Cs,!1,null,null,null),Ys=Zs.exports,Qs={mixins:[ms],props:{fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0},item:{type:Object,required:!0},itemId:{type:[String,Number],required:!0},moduleId:{type:[String,Number],required:!0}},data:()=>({listDialog:!1,value_:null}),computed:{linkModule(){return this.fieldOptions.linkModule},categories(){return this.linkModule?this.$rest(this.linkModule).list:this.$rest("modulesCategories").getters.filterByProperty("fieldId",this.fieldId)},categoriesSelect(){const e=this.categories.map(({title:e,id:t})=>({text:e,value:t}));return e.unshift({text:"",value:""}),e}},watch:{value(e){this.value_=e}},created(){this.linkModule?this.$rest(this.linkModule).get({params:{fields:"id,title"}}):this.$rest("modulesCategories").get({params:{moduleId:this.moduleId},keepCache:!0})},mounted(){this.value_=this.value},components:{ListDialog:Ys}},Xs=Qs,el=Object(I["a"])(Xs,ys,xs,!1,null,null,null),tl=el.exports,al=function(){var e=this,t=e._self._c;return t("div",[t(y["a"],{attrs:{left:"left","offset-y":"offset-y","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("div",e._g({staticClass:"category-table-filter-label"},a),[t("span",[e._v(e._s(e.text))]),t("button",e._b({staticClass:"category-table-filter-btn ml-2",attrs:{type:"button"}},"button",i,!1),[t(v["a"],{attrs:{size:"11"}},[e._v("fas fa-chevron-down")])],1)])]}}])},[t("div",{staticClass:"category-table-filter-wrap"},[t(bs["a"],{attrs:{items:e.categories,label:e.text,"background-color":"primary",multiple:"multiple","hide-details":"hide-details",chips:"chips",dark:"dark",solo:"solo",autofocus:"autofocus"},model:{value:e.selectedsCategories,callback:function(t){e.selectedsCategories=t},expression:"selectedsCategories"}})],1)])],1)},il=[],sl={props:{text:{type:String,required:!0},field:{type:Object,required:!0},options:{type:Object,default:()=>({active:!1,query:null})}},data:()=>({selectedsCategories:[]}),computed:{linkModule(){return this.field.options.linkModule},categories(){const e=this.linkModule?this.$rest(this.linkModule).list:this.$rest("modulesCategories").getters.filterByProperty("fieldId",this.field.id);return e.map(({title:e,id:t})=>({text:e,value:t})).sort((e,t)=>e.text.localeCompare(t.text))}},methods:{filter(){if(this.selectedsCategories.length){const e=new URLSearchParams;e.set(`filter_${this.field.key}_categories`,this.selectedsCategories.join(",")),this.options.query=e,this.options.active=!0,this.$emit("filter")}else this.options.active=!1,this.options.query=null,this.$emit("filter")}},watch:{selectedsCategories(){this.filter()}},created(){this.linkModule?this.$rest(this.linkModule).get({params:{fields:"id,title"}}):this.$rest("modulesCategories").get({params:{moduleId:this.moduleId},keepCache:!0})}},ll=sl,nl=(a("0217"),Object(I["a"])(ll,al,il,!1,null,null,null)),ol=nl.exports,rl={name:"categoryfield",component:tl,headerFilterComponent:ol,formatForDisplay:async({component:e,value:t,moduleId:a,fieldData:i})=>{const s=i.options.linkModule;let l,n;s?(l=s,n={params:{fields:"id,title"}}):(l="modulesCategories",n={params:{moduleId:a},keepCache:!0});let o=e.$rest(l).list.find(({id:e})=>e==t);if(o)return o.title;let r=await e.$rest(l).get(n);return o=r.find(({id:e})=>e==t),o?o.title:""}},dl=a("5607"),ul=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"mb-2",attrs:{"row-end":"span 2","col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold text-caption d-flex align-center mb-1"},[e._v(" "+e._s(e.label)+" ")]),t("tooltip",{attrs:{tip:e.label,top:"top"}},[t(Xe["a"],{directives:[{def:dl["a"],name:"ripple",rawName:"v-ripple",value:e.v-e.ripple,expression:"v - ripple"}],staticClass:"grey d-flex align-center rounded-lg primary cursor-pointer",attrs:{"aspect-ratio":38/9},on:{click:function(t){e.listDialog=!0}}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("div",{staticClass:"d-flex flex-column"},[t(v["a"],{staticClass:"d-block mx-auto",attrs:{size:30}},[e._v("fas fa-layer-group")]),t("div",{staticClass:"text-caption font-weight-bold mt-1"},[e._v("Alterar")])],1)])])],1),t("list",{attrs:{items:e.parsedValue,"input-name":e.name},on:{saved:function(t){e.listDialog=!1}},model:{value:e.listDialog,callback:function(t){e.listDialog=t},expression:"listDialog"}})],1)},cl=[],ml=a("a844"),pl=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"800px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 d-flex flex-column flex-sm-row justify-space-between"},[t("div",[e._v("Coleção")]),t("div",[t(f["a"],{staticClass:"mr-2 text-none",attrs:{color:"secondary",disabled:!e.selecteds.length,depressed:"depressed",small:"small"},on:{click:e.remove}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-trash")]),t("span",[e._v("Remover")])],1),t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed",small:"small"},on:{click:e.add}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-plus")]),t("span",[e._v("Adicionar")])],1)],1)]),e.mappedItems.length?t(Me["a"],{ref:"form"},[t(It["a"],{attrs:{headers:e.headers,items:e.mappedItems,"mobile-breakpoint":0,"no-data-text":"Não há registros.","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.item",fn:function({item:a}){return[t(ml["a"],{staticClass:"field-collection-list-item mt-1 py-2",attrs:{value:a.value,rows:1,dense:"dense","auto-grow":"auto-grow"},on:{input:t=>e.items_[a.id]=t}})]}}],null,!1,3221708630),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}})],1):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum item foi adicionado. ")]),t(f["a"],{staticClass:"text-none mt-2",attrs:{color:"secondary",block:"block",depressed:"depressed"},on:{click:e.save}},[e._v("Salvar")])],1),t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1)],1)},fl=[],hl={props:{value:Boolean,inputName:{type:String,required:!0},items:{type:Array,required:!0}},data:()=>({loading:!1,items_:[],selecteds:[],headers:[{text:"Item",value:"item",align:"left"}]}),computed:{moduleKey(){return this.$rest("modules").item.key},itemId(){return this.$route.params.sub||1},mappedItems(){return this.items_.map((e,t)=>({id:t,value:e}))}},methods:{add(){this.items_.push("")},remove(){this.items_=this.items_.filter((e,t)=>!this.selecteds.find(({id:e})=>e===t)),this.selecteds=[]},save(){const e=this.$refs.form;if(e&&!e.validate())return;const t=JSON.stringify(this.items_);this.loading=!0,this.$rest(this.moduleKey).put({id:this.itemId,prop:this.inputName,data:{value:t}}).then(()=>this.$emit("saved")).finally(()=>{this.selecteds=[],this.loading=!1})}},watch:{items(){this.items_=this.items}},mounted(){this.items_=this.items},components:{Loading:ne}},gl=hl,vl=(a("4002"),Object(I["a"])(gl,pl,fl,!1,null,null,null)),bl=vl.exports,yl={props:{fieldId:{type:Number,required:!0}},data:()=>({listDialog:!1}),computed:{moduleId(){return parseInt(this.$rest("modules").item.id)},parsedValue(){return JSON.parse(this.value||"[]")}},beforeCreate(){this.$rest("modulesFieldsTypes").get()},mixins:[ms],components:{Tooltip:Rt,List:bl}},xl=yl,kl=Object(I["a"])(xl,ul,cl,!1,null,null,null),_l=kl.exports,Cl={name:"collectionfield",component:_l,formatForDisplay:({value:e})=>{if(!e)return;const t=JSON.parse(e);let a="<ul style='padding: 4px 0px'>";for(let i of t)a+=`<li>${i.length>50?i.slice(0,50)+"...":i}</li>`;return{innerHTML:a}}},wl=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"mb-2",attrs:{"row-end":"span 2","col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold text-caption d-flex align-center mb-1"},[e._v(" "+e._s(e.label)+" ")]),t("tooltip",{attrs:{tip:e.label,top:"top"}},[t(Xe["a"],{directives:[{def:dl["a"],name:"ripple",rawName:"v-ripple",value:e.v-e.ripple,expression:"v - ripple"}],staticClass:"grey d-flex align-center rounded-lg primary cursor-pointer",attrs:{"aspect-ratio":38/9},on:{click:function(t){e.listDialog=!0}}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("div",{staticClass:"d-flex flex-column"},[t(v["a"],{staticClass:"d-block mx-auto",attrs:{size:30}},[e._v("fas fa-layer-group")]),t("div",{staticClass:"text-caption font-weight-bold mt-1"},[e._v("Alterar")])],1)])])],1),t("list",{attrs:{items:e.parsedValue,"input-name":e.name},on:{saved:function(t){e.listDialog=!1}},model:{value:e.listDialog,callback:function(t){e.listDialog=t},expression:"listDialog"}})],1)},Il=[],$l=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"800px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 d-flex flex-column flex-sm-row justify-space-between"},[t("div",[e._v("Coleção com chave")]),t("div",[t(f["a"],{staticClass:"mr-2 text-none",attrs:{color:"secondary",disabled:!e.selecteds.length,depressed:"depressed",small:"small"},on:{click:e.remove}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-trash")]),t("span",[e._v("Remover")])],1),t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed",small:"small"},on:{click:e.add}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-plus")]),t("span",[e._v("Adicionar")])],1)],1)]),e.mappedItems.length?t(Me["a"],{ref:"form"},[t(It["a"],{attrs:{headers:e.headers,items:e.mappedItems,"mobile-breakpoint":0,"no-data-text":"Não há registros.","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.item",fn:function({item:a}){return[t("div",{staticClass:"field-collectionwithkey-list-item mt-1 py-2"},[t(ml["a"],{staticClass:"mb-2",attrs:{value:a.value[0],rows:1,dense:"dense","auto-grow":"auto-grow",outlined:"outlined"},on:{input:t=>e.items_[a.id][0]=t}}),t(ml["a"],{attrs:{value:a.value[1],rows:1,dense:"dense","auto-grow":"auto-grow"},on:{input:t=>e.items_[a.id][1]=t}})],1)]}}],null,!1,1743081937),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}})],1):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum item foi adicionado. ")]),t(f["a"],{staticClass:"text-none mt-2",attrs:{color:"secondary",block:"block",depressed:"depressed"},on:{click:e.save}},[e._v("Salvar")])],1),t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1)],1)},Tl=[],Sl={props:{value:Boolean,inputName:{type:String,required:!0},items:{type:Object,required:!0}},data:()=>({loading:!1,items_:[],selecteds:[],headers:[{text:"Item",value:"item",align:"left"}]}),computed:{moduleKey(){return this.$rest("modules").item.key},itemId(){return this.$route.params.sub||1},mappedItems(){return this.items_.map((e,t)=>({id:t,value:e}))}},methods:{add(){this.items_.push(["",""])},remove(){this.selecteds.map(({id:e})=>{this.items_.splice(this.items_.findIndex(t=>t.id==e),1)}),this.selecteds=[]},save(){const e=this.$refs.form;if(!e.validate())return;const t=JSON.stringify(Object.fromEntries(this.items_));this.loading=!0,this.$rest(this.moduleKey).put({id:this.itemId,prop:this.inputName,data:{value:t}}).then(()=>this.$emit("saved")).finally(()=>{this.items_=Object.entries(JSON.parse(t)),this.selecteds=[],this.loading=!1})}},watch:{items(){this.items_=Object.entries(this.items)}},mounted(){this.items_=Object.entries(this.items)},components:{Loading:ne}},Ol=Sl,Dl=(a("4840"),Object(I["a"])(Ol,$l,Tl,!1,null,null,null)),jl=Dl.exports,Al={props:{fieldId:{type:Number,required:!0}},data:()=>({listDialog:!1}),computed:{moduleId(){return parseInt(this.$rest("modules").item.id)},parsedValue(){return JSON.parse(this.value||"{}")}},beforeCreate(){this.$rest("modulesFieldsTypes").get()},mixins:[ms],components:{Tooltip:Rt,List:jl}},ql=Al,Ll=Object(I["a"])(ql,wl,Il,!1,null,null,null),Fl=Ll.exports,Ml={name:"collectionwithkeyfield",component:Fl},Rl=a("03a4"),Pl=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"d-flex",attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(y["a"],{attrs:{"offset-y":"offset-y","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(f["a"],e._g(e._b({staticClass:"mt-1 mr-2",attrs:{color:e.value_,fab:"fab",depressed:"depressed","x-small":"x-small"}},"v-btn",i,!1),a),[t(v["a"],[e._v("fas fa-tint")])],1)]}}])},[t(Rl["a"],{attrs:{mode:"hexa",dark:"dark"},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}})],1),t(Re["a"],{attrs:{label:e.label,value:e.value_,name:e.name,readonly:"readonly",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},Nl=[],Bl={data:()=>({picker:!1,value_:null}),mounted(){this.value_=this.value},watch:{value(e){this.value_=e}},mixins:[ms]},El=Bl,Hl=Object(I["a"])(El,Pl,Nl,!1,null,null,null),Ul=Hl.exports,Kl={name:"colorfield",component:Ul},zl=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"field-date",attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e._value,name:e.name,type:"date",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},Vl=[];const Wl=e=>{if("string"===typeof e)return new Date(e);if(e instanceof Date)return e;throw new Error(e+" não é um objeto data ou uma string.")},Jl=(new Intl.RelativeTimeFormat("pt-BR",{numeric:"auto"}),e=>Wl(e).toISOString().replace(/(\d{4}-\d{2}-\d{2}).+/,"$1")),Gl=e=>Wl(e).toISOString().replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}).+/,"$1"),Zl=e=>Wl(e).toLocaleTimeString("pt-BR",{timeStyle:"short"});var Yl={mixins:[ms],computed:{moduleKey(){return this.$rest("modules").item.key},item(){return this.$rest(this.moduleKey).item},_value(){return this.value?this.value:this.item.alteredAt?null:Jl(new Date)}}},Ql=Yl,Xl=(a("2c9d"),Object(I["a"])(Ql,zl,Vl,!1,null,null,null)),en=Xl.exports,tn={name:"datefield",component:en,formatForDisplay:({value:e})=>e&&new Date(e+"T12:00").toLocaleString("pt-BR",{dateStyle:"short"})},an=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"field-datetime",attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e._value,name:e.name,type:"datetime-local",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},sn=[],ln={mixins:[ms],computed:{moduleKey(){return this.$rest("modules").item.key},item(){return this.$rest(this.moduleKey).item},_value(){return this.value?Gl(this.value):this.item.alteredAt?null:Gl(new Date)}}},nn=ln,on=(a("9088"),Object(I["a"])(nn,an,sn,!1,null,null,null)),rn=on.exports,dn={name:"datetimefield",component:rn,formatForDisplay:({value:e})=>e&&new Date(e).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})},un=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e.value,name:e.name,dense:"dense",outlined:"outlined",dark:"dark"}})],1)},cn=[],mn={mixins:[ms]},pn=mn,fn=Object(I["a"])(pn,un,cn,!1,null,null,null),hn=fn.exports,gn={name:"emailfield",component:hn},vn=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"mb-2",attrs:{"row-end":"span 2","col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold text-caption"},[e._v(" "+e._s(e.label)+" ")]),t("tooltip",{attrs:{tip:e.label,top:"top"}},[t(Xe["a"],{directives:[{def:dl["a"],name:"ripple",rawName:"v-ripple",value:e.v-e.ripple,expression:"v - ripple"}],staticClass:"grey d-flex align-center rounded-lg primary cursor-pointer",attrs:{"aspect-ratio":38/9},on:{click:function(t){e.dialog=!0}}},[t("div",{staticClass:"d-flex justify-center align-center"},[t("div",{staticClass:"d-flex flex-column"},[t(v["a"],{staticClass:"d-block mx-auto",attrs:{size:30}},[e._v("fas fa-file")]),t("div",{staticClass:"text-caption font-weight-bold mt-1"},[e._v("Enviar")])],1)])])],1),t("list",{attrs:{"input-name":e.name,"highlighted-file":e.value,"field-id":e.fieldId},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}})],1)},bn=[],yn=a("490a"),xn=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"880px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 d-flex flex-column flex-sm-row justify-space-between"},[t("div",[e._v("Arquivos")]),t("div",[t(f["a"],{staticClass:"mr-2 text-none",attrs:{color:"secondary",disabled:!e.selecteds.length,depressed:"depressed",small:"small"},on:{click:e.remove}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-trash")]),t("span",[e._v("Remover")])],1),t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed",small:"small"},on:{click:function(t){return e.$refs.fileLabel.click()}}},[t(v["a"],{attrs:{left:"left",small:"small"}},[e._v("fas fa-upload")]),t("span",[e._v("Enviar")])],1)],1)]),e.files.length?t(It["a"],{attrs:{headers:e.headers,items:e.files,"mobile-breakpoint":0,"no-data-text":"Não há registros.","sort-by":"id","sort-desc":"sort-desc","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.title",fn:function({item:a}){return[t(ks["a"],{staticClass:"primary lighten-4",attrs:{"return-value":e.editFileTitle,dark:"dark"},on:{save:function(t){return e.editTitle(a.id)},"update:returnValue":function(t){e.editFileTitle=t},"update:return-value":function(t){e.editFileTitle=t}},scopedSlots:e._u([{key:"input",fn:function(){return[t(Re["a"],{attrs:{value:a.title,rules:[e.rules.required],label:"Renomear","single-line":"single-line",counter:"counter"},on:{input:t=>e.editFileTitle=t}})]},proxy:!0}],null,!0)},[e._v(e._s(a.title)+" ")])]}},{key:"item.action",fn:function({item:a}){return[a.path===e.highlightedFile?t(f["a"],{attrs:{color:"yellow",icon:"icon",small:"small"},on:{click:function(t){return e.highlight(a.id)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-star")])],1):t(f["a"],{attrs:{color:"yellow",icon:"icon",small:"small"},on:{click:function(t){return e.highlight(a.id)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("far fa-star")])],1)]}}],null,!1,294487675),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}}):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum arquivo foi enviado. ")])],1),t(Gt["a"],{model:{value:e.uploading,callback:function(t){e.uploading=t},expression:"uploading"}},[t(yn["a"],{staticClass:"font-weight-bold accent--text",attrs:{value:e.progress,size:120,rotate:-90,width:12,color:"secondary"}},[e._v(e._s(e.progress)+"%")])],1),t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1),t("label",{ref:"fileLabel",attrs:{for:"fileInput_"+e.fieldId}}),t("input",{ref:"fileInput",staticClass:"ma-0 pa-0",attrs:{id:"fileInput_"+e.fieldId,type:"file",multiple:"multiple","hide-details":"hide-details",hidden:"hidden"},domProps:{value:e.file},on:{input:e.upload}})],1)},kn=[],_n={props:{value:Boolean,inputName:{type:String,required:!0},highlightedFile:String,fieldId:{type:Number,required:!0}},data:()=>({file:null,uploading:!1,progress:0,loading:!1,files:[],selecteds:[],headers:[{text:"Título",value:"title",align:"left"},{text:"",value:"action",align:"right",sortable:!1}],editFileTitle:null,rules:{required:Be}}),computed:{moduleKey(){return this.$rest("modules").item.key},moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub||1}},methods:{get(){return this.$rest("modulesFiles").get({id:this.itemId,params:{moduleId:this.moduleId,fieldId:this.fieldId}}).then(e=>this.files=e)},remove(){this.loading=!0,Promise.all(this.selecteds.map(({id:e})=>this.$rest("modulesFiles").delete({id:e,params:{moduleId:this.moduleId}}))).finally(()=>{this.selecteds=[],this.get().then(()=>this.loading=!1)})},highlight(e){this.loading=!0;const t=this.files.find(({id:t})=>t==e)["path"],a={};a[this.inputName]=t,this.$rest(this.moduleKey).put({id:this.itemId,prop:this.inputName,data:a}).then(()=>this.$rest(this.moduleKey).get({id:this.itemId}).then(()=>{this.selecteds=[],this.loading=!1}))},editTitle(e){const t=this.files.find(({id:t})=>t==e).title;this.editFileTitle&&t!==this.editFileTitle&&(this.loading=!0,this.$rest("modulesFiles").put({id:e,prop:"title",data:{value:this.editFileTitle},params:{moduleId:this.moduleId}}).then(()=>this.get().then(()=>{this.loading=!1})))},async upload({target:e}){const t=e.files,a=({loaded:e,total:t})=>this.progress=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:0}).format(e/t*100);this.uploading=!0;try{for(const e of t)await this.$rest("modulesFiles").upload({file:e,prop:"file",data:{title:e.name},params:{itemId:this.itemId,moduleId:this.moduleId,fieldId:this.fieldId},onUploadProgress:a}).then(({file:e,title:t,id:a})=>{this.progress=0,this.files.push({path:e,title:t,id:a})}).finally(()=>this.uploading=!1);this.uploading=!1}catch(i){console.error(i),this.uploading=!1}this.$refs.fileInput.value=""}},created(){this.get()},components:{Loading:ne}},Cn=_n,wn=(a("433a"),Object(I["a"])(Cn,xn,kn,!1,null,null,null)),In=wn.exports,$n={props:{fieldId:{type:Number,required:!0}},data:()=>({dialog:!1}),mixins:[ms],components:{Tooltip:Rt,List:In}},Tn=$n,Sn=Object(I["a"])(Tn,vn,bn,!1,null,null,null),On=Sn.exports,Dn={name:"filefield",component:On},jn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-none"})},An=[],qn={},Ln=Object(I["a"])(qn,jn,An,!1,null,null,null),Fn=Ln.exports,Mn={name:"hiddenfield",component:Fn},Rn=a("adda"),Pn=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"mb-5",attrs:{"row-end":"span 4","col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold text-caption"},[e._v(" "+e._s(e.label)+" ")]),t(Rn["a"],{staticClass:"grey rounded-lg",class:(!e.featuredImage||!e.featuredImage.path)&&"d-flex align-center",attrs:{src:e.files.replace(e.prefixPath,"")+(e.featuredImage&&e.featuredImage.path),"aspect-ratio":19/9,contain:""}},[e.loading?e._e():[e.featuredImage&&e.featuredImage.path?t("div",{staticClass:"d-flex justify-end ma-3"},[t(f["a"],{staticClass:"text-none",attrs:{href:e.files.replace(e.prefixPath,"")+e.featuredImage.path,target:"_blank",download:"image",depressed:"",small:""}},[t(v["a"],{attrs:{"x-small":"",left:""}},[e._v("fas fa-download")]),e._v("Download ")],1),t(f["a"],{staticClass:"ml-2 text-none",attrs:{target:"_blank",download:"image",depressed:"",small:""},on:{click:function(t){e.dialog=!0}}},[t(v["a"],{attrs:{"x-small":"",left:""}},[e._v("fas fa-file-image")]),e._v("Alterar ")],1)],1):t("div",{staticClass:"d-flex justify-center align-center"},[t(n["a"],{directives:[{def:dl["a"],name:"ripple",rawName:"v-ripple"}],staticClass:"d-flex flex-column justify-center align-center primary rounded-circle cursor-pointer",attrs:{height:"80",width:"80"},on:{click:function(t){e.dialog=!0}}},[t(v["a"],{staticClass:"d-block mx-auto",attrs:{size:30}},[e._v("fas fa-file-image")]),t("div",{staticClass:"text-caption font-weight-bold mt-1"},[e._v("Enviar")])],1)],1)]],2),t("List",{attrs:{"input-name":e.name,images:e.imgs,"featured-image":e.featuredImage,"field-id":e.fieldId},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}})],1)},Nn=[],Bn=a("d903"),En=a("604c"),Hn=a("8e36"),Un=function(){var e=this,t=e._self._c;return t("TemplateDialogAny",{attrs:{value:e.value,title:"Galeria","max-width":"880px"},on:{input:t=>e.$emit("input",t)},scopedSlots:e._u([{key:"actions",fn:function(){return[t("OrderButton",{attrs:{items:e.images},on:{loading:t=>e.loadingOrder=t}}),t("TemplateDialogHeaderButton",{attrs:{disabled:1!==e.selecteds.length,icon:"fas fa-pencil-alt",text:"Editar Título"},on:{click:function(t){e.editDialog=!0}}}),t("TemplateDialogHeaderButton",{attrs:{disabled:1!==e.selecteds.length,icon:"fas fa-star",text:"Destacar"},on:{click:e.featured}}),t("TemplateDialogHeaderButton",{attrs:{disabled:!e.selecteds.length,icon:"fas fa-trash",text:"Remover"},on:{click:e.remove}}),t("UploadButton",{attrs:{"field-id":e.fieldId,items:e.images}})]},proxy:!0}])},[t(Hn["a"],{staticClass:"mb-1",class:!e.loadingOrder&&"opacity-0",attrs:{indeterminate:e.loadingOrder,color:"secondary"}}),e.images.length?t(En["b"],{staticClass:"view-field-list-wrap d-flex flex-wrap",attrs:{multiple:""},model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}},[t("draggable",{staticClass:"view-field-list d-flex flex-wrap",model:{value:e.images,callback:function(t){e.images=t},expression:"images"}},e._l(e.images,(function({id:a,path:i,loading:s,progress:l},n){return t(Bn["a"],{key:n,attrs:{value:a},scopedSlots:e._u([{key:"default",fn:function({active:o}){return[t("div",{directives:[{def:dl["a"],name:"ripple",rawName:"v-ripple"}],staticClass:"view-field-item rounded-sm",class:o?"active cyan":"grey",on:{click:t=>e.selectItem(a,n,t)}},[t("img",{staticClass:"view-field-item-img",attrs:{src:i&&e.files.replace(e.prefixPath,"")+i+"?resize=1&h=80"}}),e.featuredImage&&a===e.featuredImage.id?t(Gt["a"],{attrs:{absolute:"",opacity:"0.2"}},[t(v["a"],{attrs:{color:"yellow",size:"40"}},[e._v("fas fa-star")])],1):e._e(),s?t(Gt["a"],{attrs:{absolute:"",opacity:"0.8"}},[t(yn["a"],{staticClass:"font-weight-bold accent--text",attrs:{value:l<100?l:void 0,indeterminate:100===l,size:52,rotate:-90,width:4,color:"secondary"}},[e._v(" "+e._s(100!==l?l+"%":"")+" ")])],1):e._e()],1)]}}],null,!0)})})),1)],1):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhuma imagem foi enviada. ")]),t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("Loading")],1),e.selecteds[0]?t("Edit",{attrs:{img:e.findImgById(e.selecteds[0])},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}}):e._e()],1)},Kn=[],zn=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Alterar Título")]),t(Re["a"],{staticClass:"mb-3",attrs:{value:e.img.title,label:"Título",outlined:"outlined",dense:"dense","hide-details":"hide-details"},on:{input:t=>e.title=t}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.title,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.submit}},[e._v("Alterar")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("Loading")],1):e._e()],1)},Vn=[],Wn={props:{value:Boolean,img:{type:Object,required:!0}},data:()=>({loading:!1,title:null}),computed:{moduleId(){return this.$rest("modules").item.id}},methods:{submit(){this.loading=!0,this.$rest("modulesImages").put({id:this.img.id,prop:"title",data:{value:this.title}}).then(()=>{this.img.title=this.title,this.$emit("input",!1)}).finally(()=>this.loading=!1)}},components:{Loading:ne}},Jn=Wn,Gn=Object(I["a"])(Jn,zn,Vn,!1,null,null,null),Zn=Gn.exports,Yn=a("b76a"),Qn=a.n(Yn),Xn=function(){var e=this,t=e._self._c;return t("TemplateDialogHeaderButton",{attrs:{icon:"fas fa-save",text:"Salvar Ordem"},on:{click:e.order}})},eo=[],to={props:{items:{type:Array,required:!0}},computed:{moduleId(){return this.$rest("modules").item.id}},methods:{order(){this.$emit("loading",!0);const e=this.items.map(({id:e,path:t},a)=>({id:e,path:t,order:a}));this.$rest("modulesImages").put({id:"order",data:{images:e},params:{moduleId:this.moduleId}}).then(()=>this.$emit("loading",!1))}},components:{TemplateDialogHeaderButton:Fs}},ao=to,io=Object(I["a"])(ao,Xn,eo,!1,null,null,null),so=io.exports,lo=function(){var e=this,t=e._self._c;return t("div",[t("TemplateDialogHeaderButton",{attrs:{icon:"fas fa-upload",text:"Enviar"},on:{click:function(t){return e.$refs.imageFileLabel.click()}}}),t("label",{ref:"imageFileLabel",attrs:{for:"imageFileInput_"+e.fieldId}}),t("input",{ref:"imageFileInput",staticClass:"ma-0 pa-0",attrs:{id:"imageFileInput_"+e.fieldId,type:"file",accept:"image/*",multiple:"","hide-details":"",hidden:""},domProps:{value:e.file},on:{input:e.upload}})],1)},no=[],oo={props:{fieldId:{type:Number,required:!0},items:{type:Array,required:!0}},data:()=>({progress:0,file:null}),computed:{moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub||1}},methods:{upload({target:e}){this.disabled=!0;const t=e.files;Array.from(t).map(e=>{const t={loading:!0,progress:0},a=({loaded:e,total:a})=>{t.progress=parseInt(e/a*100)};return this.items.push(t),this.$rest("modulesImages").upload({file:e,prop:"image",params:{itemId:this.itemId,moduleId:this.moduleId,fieldId:this.fieldId},onUploadProgress:a}).then(({file:e,id:a})=>{t.loading=!1,t.id=a,t.path=e}).catch(()=>{const e=this.items.indexOf(t);this.items.splice(e,1)})}),this.$refs.imageFileInput.value=""}},components:{TemplateDialogHeaderButton:Fs}},ro=oo,uo=(a("467d"),Object(I["a"])(ro,lo,no,!1,null,"182d5b05",null)),co=uo.exports,mo={props:{value:Boolean,inputName:{type:String,required:!0},featuredImage:Object,fieldId:{type:Number,required:!0},images:{type:Array,default:()=>[]}},data:()=>({loading:!1,loadingOrder:!1,selecteds:[],lastSelectedIndex:0,editDialog:!1}),computed:{moduleKey(){return this.$rest("modules").item.key},moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub||1}},methods:{remove(){this.loading=!0,Promise.all(this.selecteds.map(e=>this.$rest("modulesImages").delete({id:e,params:{moduleId:this.moduleId}}))).finally(()=>{this.selecteds=[],this.$parent.$parent.get().then(()=>this.loading=!1)})},featured(){this.loading=!0;const e=this.images.find(({id:e})=>e==this.selecteds[0])["id"],t={};t[this.inputName]=e,this.$rest(this.moduleKey).put({id:this.itemId,prop:this.inputName,data:t}).then(()=>this.$rest(this.moduleKey).get({id:this.itemId}).then(()=>{this.selecteds=[],this.loading=!1}))},findImgById(e){return this.images.find(t=>t.id===e)},cleanSelecteds(){this.selecteds.splice(0,this.selecteds.length)},isSelectedItem(e){return this.selecteds.includes(e)},unselectItem(e){const t=this.selecteds.indexOf(e);this.selecteds.splice(t,1),this.lastSelectedIndex=null},selectItem(e,t,a){if(a.shiftKey){this.cleanSelecteds();const e=this.lastSelectedIndex,a=t;if(a>=e)for(let t=e;t<=a;t++)this.selecteds.push(this.images[t].id);else for(let t=e;t>=a;t--)this.selecteds.push(this.images[t].id)}else a.ctrlKey?(this.selecteds.push(e),this.lastSelectedIndex=t):(this.cleanSelecteds(),this.selecteds.push(e),this.lastSelectedIndex=t)}},watch:{editDialog(e){e||(this.selecteds=[])}},created(){document.addEventListener("click",e=>{const t=e.target.classList;t.contains("view-field-item-img")||t.contains("view-field-item")||this.cleanSelecteds()})},components:{Edit:Zn,Loading:ne,draggable:Qn.a,TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs,OrderButton:so,UploadButton:co}},po=mo,fo=(a("0dca"),Object(I["a"])(po,Un,Kn,!1,null,"7b44224c",null)),ho=fo.exports,go={props:{fieldId:{type:Number,required:!0}},data:()=>({dialog:!1,imgs:[],loading:!0}),computed:{moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub||1},featuredImage(){return this.imgs.find(e=>e.id==this.value)}},methods:{get(){return this.$rest("modulesImages").get({id:this.itemId,params:{moduleId:this.moduleId,fieldId:this.fieldId}}).then(e=>{this.imgs=e.map(({id:e,path:t,title:a,order:i})=>({id:e,path:t,title:a,order:parseInt(i),loading:!1,progress:0})).sort((e,t)=>e.order-t.order)}).finally(()=>this.loading=!1)}},mounted(){this.get()},mixins:[ms],components:{List:ho}},vo=go,bo=Object(I["a"])(vo,Pn,Nn,!1,null,null,null),yo=bo.exports,xo={name:"imagefilefield",component:yo,formatForDisplay:({component:e,value:t,id:a})=>{if(!t)return;const s=i["default"].observable({innerHTML:null});return e.$rest("modulesImages").get({id:`${a}/${t}`,save:(t,{path:a})=>{const i=e.files.replace(e.prefixPath,""),l=i+a+"?resize=1&w=106";s.innerHTML=`<img style="height: 60px; width: 106px; object-fit: contain; margin-top: 6px; border-radius: 4px;" src="${l}">`}}),s}},ko=function(){var e=this,t=e._self._c;return t("div",[t("span",[e._v(e._s(e.value))]),t(f["a"],{staticClass:"ml-1",attrs:{icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.copy.apply(null,arguments)}}},[t(v["a"],{attrs:{small:""}},[e._v("fas fa-copy")])],1)],1)},_o=[],Co={props:{value:{type:String}},methods:{copy(){navigator.clipboard.writeText(this.value||"")}}},wo=Co,Io=Object(I["a"])(wo,ko,_o,!1,null,null,null),$o=Io.exports,To=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"d-flex"},[t(Re["a"],{attrs:{label:e.label,value:e.value_,name:e.name,readonly:"readonly",dense:"dense",outlined:"outlined",dark:"dark"}}),t(f["a"],{staticClass:"ml-1",attrs:{icon:"icon",small:"small"},on:{click:function(t){e.optionsDialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1)],1),t("options",{attrs:{"field-id":e.fieldId,"field-options":e.fieldOptions},model:{value:e.optionsDialog,callback:function(t){e.optionsDialog=t},expression:"optionsDialog"}})],1)},So=[],Oo=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Opções","max-width":"500px"},on:{input:t=>e.$emit("input",t)}},[t("div",{staticClass:"mb-4 text-caption"},[e._v(" Para utilizar o valor de outro campo utilize a chave do campo entre colchetes."),t("br"),e._v(" Ex.: {id}"),t("br"),t("br"),e._v(" Funções:"),t("br"),e._v(" math[expression] currency[str] zerofill[str;num] url[str]"),t("br"),t("br")]),t("div",{staticClass:"d-flex"},[t(Re["a"],{ref:"pattern",staticClass:"mr-2",attrs:{disabled:e.loading.pattern,loading:e.loading.pattern,label:"Padrão",outlined:"outlined",dense:"dense",dark:"dark"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save("pattern")}},model:{value:e.options.pattern,callback:function(t){e.$set(e.options,"pattern",t)},expression:"options.pattern"}}),t("div",{staticClass:"pt-1"},[t("template-dialog-header-button",{attrs:{icon:"fas fa-save",text:"Salvar"},on:{click:function(t){return e.save("pattern")}}})],1)],1)])},Do=[],jo={props:{value:Boolean,fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0}},data:()=>({rules:{url:Ue},loading:{pattern:!1},options:{pattern:null}}),computed:{moduleId(){return this.$rest("modules").item.id}},methods:{save(e){const t=this.$refs[e];t.validate()&&(this.loading[e]=!0,this.$rest("modulesFields").put({id:this.fieldId,prop:"options",data:{option:e,value:this.options[e]},params:{moduleId:this.moduleId}}).then(()=>{this.fieldOptions[e]=this.options[e],this.loading[e]=!1}))}},watch:{fieldOptions(e){this.options={...e}}},mounted(){this.options={...this.fieldOptions}},components:{TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs}},Ao=jo,qo=Object(I["a"])(Ao,Oo,Do,!1,null,null,null),Lo=qo.exports,Fo=a("acbe"),Mo=a.n(Fo),Ro={props:{fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0}},data:()=>({optionsDialog:!1}),computed:{moduleKey(){return this.$rest("modules").item.key},moduleItem(){return this.$rest(this.moduleKey).item},itemProp(){return e=>{if("id"===e)return this.moduleItem["id"];const t=this.$parent.$children.find(({name:t})=>t===e);return t&&t.value_||""}},value_(){const e=this.fieldOptions.pattern;if(!e)return;const t=e.replace(/({([^}]+)})/g,(e,t,a)=>this.itemProp(a)),a=new Mo.a,i=t.replace(/(math\[([^\]]*)\])/,(e,t,i)=>{try{return a.eval(i)}catch{return""}}),s=i.replace(/(currency\[([^\]]*)\])/,(e,t,a)=>{if(!a)return"";try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(a))}catch{return""}}),l=s.replace(/(zerofill\[([^\]]*);([0-9]+)])/,(e,t,a,i)=>{if(!a||!i)return"";try{return a.padStart(+i,"0")}catch{return""}}),n=l.replace(/(url\[([^\]]*)\])/,(e,t,a)=>{try{return N(a)}catch{return""}});return n}},mixins:[ms],components:{Options:Lo}},Po=Ro,No=Object(I["a"])(Po,To,So,!1,null,null,null),Bo=No.exports,Eo={name:"computedfield",component:Bo,formatForDisplay:({value:e})=>({value:e,component:$o})},Ho=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2"}},[t(ml["a"],{attrs:{label:e.label,value:e.value,name:e.name,counter:"300",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},Uo=[],Ko={mixins:[ms]},zo=Ko,Vo=Object(I["a"])(zo,Ho,Uo,!1,null,null,null),Wo=Vo.exports,Jo={name:"mediumtextfield",component:Wo},Go=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e.value,name:e.name,type:"number",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},Zo=[],Yo={mixins:[ms]},Qo=Yo,Xo=Object(I["a"])(Qo,Go,Zo,!1,null,null,null),er=Xo.exports,tr={name:"numberfield",component:er},ar=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e.value,name:e.name,dense:"dense",outlined:"outlined",dark:"dark"}})],1)},ir=[],sr={mixins:[ms]},lr=sr,nr=Object(I["a"])(lr,ar,ir,!1,null,null,null),or=nr.exports,rr={name:"passwordfield",component:or},dr=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{directives:[{name:"mask",rawName:"v-mask",value:["R$ #,##","R$ ##,##","R$ ###,##","R$ ####,##","R$ #####,##","R$ ######,##","R$ #######,##","R$ ########,##","R$ #########,##","R$ ##########,##","R$ ###########,##","R$ ############,##"],expression:"[\n      'R$ #,##',\n      'R$ ##,##',\n      'R$ ###,##',\n      'R$ ####,##',\n      'R$ #####,##',\n      'R$ ######,##',\n      'R$ #######,##',\n      'R$ ########,##',\n      'R$ #########,##',\n      'R$ ##########,##',\n      'R$ ###########,##',\n      'R$ ############,##',\n    ]"}],attrs:{label:e.label,dense:"",outlined:"",dark:""},model:{value:e.showValue,callback:function(t){e.showValue=t},expression:"showValue"}}),t("input",{attrs:{name:e.name,type:"hidden"},domProps:{value:e.value_}})],1)},ur=[],cr=a("3a60"),mr={mixins:[ms],data:()=>({showValue:null}),computed:{value_(){return this.toFormValue(this.showValue)}},methods:{toFormValue(e){return e?e.replace("R$ ","").replace(",","."):""},toShowValue(e){return e?"R$ "+e.replace(".",","):""}},watch:{value(e){this.showValue=this.toShowValue(e)}},directives:{mask:cr["mask"]},mounted(){this.showValue=this.toShowValue(this.value)}},pr=mr,fr=Object(I["a"])(pr,dr,ur,!1,null,null,null),hr=fr.exports,gr={name:"pricefield",component:hr,formatForDisplay:({value:e})=>e&&new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},vr=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e.value,readonly:"readonly",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},br=[],yr={mixins:[ms]},xr=yr,kr=Object(I["a"])(xr,vr,br,!1,null,null,null),_r=kr.exports,Cr={name:"readonlyfield",component:_r},wr=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"field-source-code",attrs:{"col-end":"span 2"}},[t(ml["a"],{staticClass:"rounded-0",attrs:{label:e.label,value:e.value,name:e.name,rows:10,dense:"dense",outlined:"outlined",dark:"dark"}})],1)},Ir=[],$r={mixins:[ms]},Tr=$r,Sr=(a("6e6c"),Object(I["a"])(Tr,wr,Ir,!1,null,null,null)),Or=Sr.exports,Dr={name:"sourcecodefield",component:Or},jr=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"d-flex"},[t(ha["a"],{attrs:{label:e.label,name:e.name,items:e.subcategoriesToSelect,dense:"dense",outlined:"outlined",dark:"dark"},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}}),t(f["a"],{staticClass:"ml-1",attrs:{icon:"icon",small:"small"},on:{click:function(t){e.listDialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1)],1),t("list",{attrs:{"module-id":e.moduleId,"field-id":e.fieldId,items:e.allSubcategoriesField,"field-category":e.linkedCategoryId},model:{value:e.listDialog,callback:function(t){e.listDialog=t},expression:"listDialog"}})],1)},Ar=[],qr=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Subcategorias","max-width":"500px"},on:{input:t=>e.$emit("input",t)},scopedSlots:e._u([{key:"actions",fn:function(){return[t("TemplateDialogHeaderButton",{attrs:{disabled:!e.tableSelecteds.length,icon:"fas fa-trash",text:"Remover"},on:{click:e.removeItem}}),t("TemplateDialogHeaderButton",{attrs:{icon:"fas fa-plus",text:"Adicionar"},on:{click:function(t){e.addDialog=!0}}})]},proxy:!0}])},[t(Ta["a"],[t($a["a"],{attrs:{cols:"12",sm:"6"}},[t("SelectFieldCategory",{attrs:{value:e.fieldCategory,"field-id":e.fieldId,"module-id":e.moduleId,items:e.categoryTypeFieldsToSelect},on:{input:t=>e.fieldCategory_=t}})],1),t($a["a"],{attrs:{cols:"12",sm:"6"}},[t(ha["a"],{attrs:{items:e.categoriesFromCurrentCategoryTypeField,label:"Campo",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}})],1)],1),e.items.length&&e.selectedCategory?t(It["a"],{attrs:{headers:e.tableHeaders,items:e.items,"mobile-breakpoint":0,loading:e.loading,search:e.selectedCategory,"custom-filter":e.filterItems,"no-data-text":"Não há registros.","no-results-text":"Não há registros.","sort-by":"id","sort-desc":"sort-desc","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.title",fn:function({item:a}){return[t(ks["a"],{staticClass:"primary lighten-4",attrs:{"return-value":e.itemTitle,dark:"dark"},on:{save:function(t){return e.updateItemTitle(a.id)},"update:returnValue":function(t){e.itemTitle=t},"update:return-value":function(t){e.itemTitle=t}},scopedSlots:e._u([{key:"input",fn:function(){return[t(Re["a"],{attrs:{value:a.title,rules:[e.rules.required],label:"Renomear","single-line":"single-line",counter:"counter"},on:{input:t=>e.itemTitle=t}})]},proxy:!0}],null,!0)},[e._v(e._s(a.title)+" ")])]}}],null,!1,248782108),model:{value:e.tableSelecteds,callback:function(t){e.tableSelecteds=t},expression:"tableSelecteds"}}):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhuma categoria disponível . ")]),t("add",{attrs:{"field-id":e.fieldId,"module-id":e.moduleId,categories:e.categoriesFromCurrentCategoryTypeField},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}})],1)},Lr=[],Fr=function(){var e=this,t=e._self._c;return t(ha["a"],{attrs:{items:e.items,loading:e.loading,label:"Campo",outlined:"outlined",dense:"dense","hide-details":"hide-details"},on:{change:t=>e.update(t)},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}})},Mr=[],Rr={props:{moduleId:{type:[String,Number],required:!0},fieldId:{type:Number,required:!0},value:Number,items:{type:Array,default:()=>[]}},data:()=>({value_:null,loading:!1}),methods:{update(e){this.loading=!0,this.$rest("modules-fields").put({id:this.fieldId,prop:"options",data:{value:e},params:{moduleId:this.moduleId,option:"category"},save:!1}).then(()=>{this.$emit("input",e)}).finally(()=>this.loading=!1)}},mounted(){this.value_=this.value}},Pr=Rr,Nr=Object(I["a"])(Pr,Fr,Mr,!1,null,null,null),Br=Nr.exports,Er=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Adicionar subcategoria","max-width":"330px",simple:"simple"},on:{input:t=>e.$emit("input",t)}},[t(ha["a"],{staticClass:"mb-3",attrs:{items:e.categories,disabled:e.loading,label:"Categoria",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),t(Re["a"],{staticClass:"mb-3",attrs:{disabled:e.loading,label:"Título",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.title||!e.category||e.loading,loading:e.loading,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.add}},[e._v("Adicionar")])],1)},Hr=[],Ur={props:{value:Boolean,moduleId:{type:[String,Number],required:!0},fieldId:{type:Number,required:!0},categories:{type:Array,required:!0}},data:()=>({loading:!1,category:null,title:null}),methods:{add(){this.loading=!0,this.$rest("modulesSubcategories").post({data:{title:this.title},params:{moduleId:this.moduleId,fieldId:this.fieldId,categoryId:this.category}}).finally(()=>{this.title=null,this.loading=!1})}},components:{TemplateDialogAny:Os}},Kr=Ur,zr=Object(I["a"])(Kr,Er,Hr,!1,null,null,null),Vr=zr.exports,Wr={props:{value:Boolean,moduleId:{type:[String,Number],required:!0},fieldId:{type:Number,required:!0},fieldCategory:{type:Number,required:!0},items:{type:Array,default:()=>[]}},data:()=>({addDialog:!1,loading:!1,tableSelecteds:[],tableHeaders:[{text:"Título",value:"title",align:"left"}],itemTitle:null,rules:{required:Be},fieldCategory_:null,selectedCategory:null}),computed:{categoryTypeFields(){return this.$rest("modules").item.fields.filter(({typeKey:e})=>"category"===e)},categoryTypeFieldsToSelect(){const e=this.categoryTypeFields.map(({id:e,name:t})=>({text:t,value:parseInt(e)}));return e.unshift({text:"",value:""}),e},categoriesFromCurrentCategoryTypeField(){const e=this.$rest("modulesCategories").getters.filterByProperty("fieldId",this.fieldCategory_).map(({id:e,title:t})=>({text:t,value:e}));return e.unshift({text:"",value:""}),e}},methods:{removeItem(){this.loading=!0,Promise.all(this.tableSelecteds.map(({id:e})=>this.$rest("modulesSubcategories").delete({id:e,params:{moduleId:this.moduleId}}))).finally(()=>{this.tableSelecteds=[],this.loading=!1})},updateItemTitle(e){const t=this.items.find(({id:t})=>t==e).title;this.itemTitle&&t!==this.itemTitle&&(this.loading=!0,this.$rest("modulesSubcategories").put({id:e,prop:"title",data:{value:this.itemTitle},params:{moduleId:this.moduleId}}).then(()=>this.$parent.get().then(()=>this.loading=!1)))},filterItems(e,t,a){return a.categoryId==t}},watch:{fieldCategory_(){this.selectedCategory=null}},mounted(){this.fieldCategory_=this.fieldCategory},components:{TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs,SelectFieldCategory:Br,Add:Vr}},Jr=Wr,Gr=Object(I["a"])(Jr,qr,Lr,!1,null,null,null),Zr=Gr.exports,Yr={mixins:[ms],props:{fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0},moduleId:{type:[String,Number],required:!0},moduleKey:{type:String,required:!0}},data:()=>({listDialog:!1,value_:null}),computed:{allSubcategoriesField(){return this.$rest("modulesSubcategories").getters.filterByProperty("fieldId",this.fieldId)},linkedCategoryId(){return parseInt(this.fieldOptions.category)},linkedCategoryFieldComponent(){const e=this.$rest("modules").item.fields.find(({id:e})=>e==this.linkedCategoryId);return e?this.$parent.$children.find(({name:t})=>t===e.key):null},currentLinkedCategoryValue(){return this.linkedCategoryFieldComponent?this.linkedCategoryFieldComponent.value_:null},savedLinkedCategoryValue(){return this.linkedCategoryFieldComponent?this.linkedCategoryFieldComponent.value:null},subcategoriesFromLinkedCategory(){return this.currentLinkedCategoryValue?this.allSubcategoriesField.filter(({categoryId:e})=>e==this.currentLinkedCategoryValue):[]},subcategoriesToSelect(){const e=this.subcategoriesFromLinkedCategory.map(({id:e,title:t})=>({text:t,value:e}));return e.unshift({text:"",value:""}),e}},watch:{value(e){this.value_=e},currentLinkedCategoryValue(e){e!==this.savedLinkedCategoryValue?this.value_=null:this.value_=this.value}},mounted(){this.value_=this.value},created(){this.$rest("modulesSubcategories").get({params:{moduleId:this.moduleId,fieldId:this.fieldId},keepCache:!0})},components:{List:Zr}},Qr=Yr,Xr=Object(I["a"])(Qr,jr,Ar,!1,null,null,null),ed=Xr.exports,td={name:"subcategoryfield",component:ed},ad=a("b73d"),id=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(ad["a"],{attrs:{label:e.label,color:"accent",dense:"dense",outlined:"outlined",dark:"dark"},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}}),t("input",{attrs:{type:"hidden",name:e.name},domProps:{value:parseInt(0|e.value_)}})],1)},sd=[],ld={data:()=>({value_:null}),watch:{value(e){this.value_=!!parseInt(e)}},created(){this.value_=!!parseInt(this.value)},mixins:[ms]},nd=ld,od=Object(I["a"])(nd,id,sd,!1,null,null,null),rd=od.exports,dd=function(){var e=this,t=e._self._c;return t("div",[t(y["a"],{attrs:{left:"left","offset-y":"offset-y","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("div",e._g({staticClass:"switchboolean-table-filter-label"},a),[t("span",[e._v(e._s(e.text))]),t("button",e._b({staticClass:"switchboolean-table-filter-btn ml-2",attrs:{type:"button"}},"button",i,!1),[t(v["a"],{attrs:{size:"11"}},[e._v("fas fa-chevron-down")])],1)])]}}])},[t("div",{staticClass:"switchboolean-table-filter-wrap"},[t(bs["a"],{attrs:{items:e.items,label:e.text,"background-color":"primary","hide-details":"",dark:"",solo:"",autofocus:""},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}})],1)])],1)},ud=[],cd={props:{text:{type:String,required:!0},field:{type:Object,required:!0},options:{type:Object,default:()=>({active:!1,query:null})}},data:()=>({selectedItem:null,items:[{text:"",value:null},{text:"Sim",value:1},{text:"Não",value:0}]}),methods:{filter(){if(null!==this.selectedItem){const e=new URLSearchParams;e.set(`filter_${this.field.key}_value`,this.selectedItem),this.options.query=e,this.options.active=!0,this.$emit("filter")}else this.options.active=!1,this.options.query=null,this.$emit("filter")}},watch:{selectedItem(){this.filter()}}},md=cd,pd=(a("e4f4"),Object(I["a"])(md,dd,ud,!1,null,null,null)),fd=pd.exports,hd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex"},[t("div",{on:{click:function(e){e.stopPropagation()}}},[t(ad["a"],{attrs:{loading:e.loading,disabled:e.loading,color:"accent",dense:"dense",outlined:"outlined",dark:"dark"},on:{change:e.update},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}})],1)])},gd=[],vd={props:{item:{type:Object},name:{type:String},value:{type:String}},data:()=>({value_:null,loading:!1}),computed:{moduleKey(){return this.$rest("modules").item.key}},methods:{update(){this.loading=!0,this.$rest(this.moduleKey).put({id:this.item.id,data:{[this.name]:this.value_?"1":"0"}}).finally(()=>{this.loading=!1})}},mounted(){this.value_=+this.value}},bd=vd,yd=Object(I["a"])(bd,hd,gd,!1,null,null,null),xd=yd.exports,kd={name:"switchbooleanfield",component:rd,headerFilterComponent:fd,formatForDisplay:({value:e})=>({value:e,component:xd})},_d=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"d-flex"},[t(ha["a"],{attrs:{label:e.label,items:e.tagsSelect,"no-data-text":"Nenhuma tag adicionada",dense:"dense",outlined:"outlined",dark:"dark",multiple:"multiple",chips:"chips"},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}}),t(f["a"],{staticClass:"ml-1",attrs:{icon:"icon",small:"small"},on:{click:function(t){e.listDialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1)],1),t("input",{attrs:{name:e.name,type:"hidden"},domProps:{value:e.valueParsed}}),t("list",{attrs:{"field-id":e.fieldId,tags:e.tags,"link-module":e.linkModule,"is-admin-user":e.isAdminUser},model:{value:e.listDialog,callback:function(t){e.listDialog=t},expression:"listDialog"}})],1)},Cd=[],wd=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Tags","max-width":"500px"},on:{input:t=>e.$emit("input",t)},scopedSlots:e._u([{key:"actions",fn:function(){return[e.isAdminUser?t("template-dialog-header-button",{attrs:{icon:e.linkModule?"fas fa-unlink":"fas fa-link",text:(e.linkModule?"Desvincular":"Vincular")+" Módulo",disabled:!e.linkModule&&Boolean(e.tags.length)},on:{click:function(t){e.linkModule?e.unlink():e.linkModuleDialog=!0}}}):e._e(),t("template-dialog-header-button",{attrs:{disabled:!e.selecteds.length,icon:"fas fa-trash",text:"Remover"},on:{click:e.remove}}),t("template-dialog-header-button",{attrs:{icon:"fas fa-plus",text:"Adicionar"},on:{click:function(t){e.addDialog=!0}}})]},proxy:!0}])},[e.tags.length?t(It["a"],{attrs:{headers:e.headers,items:e.tags,"mobile-breakpoint":0,"no-data-text":"Não há registros.","sort-by":"id","sort-desc":"sort-desc","show-select":"show-select","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.title",fn:function({item:a}){return[t(ks["a"],{staticClass:"primary lighten-4",attrs:{"return-value":e.editTagTitle,dark:"dark"},on:{save:function(t){return e.editTitle(a.id)},"update:returnValue":function(t){e.editTagTitle=t},"update:return-value":function(t){e.editTagTitle=t}},scopedSlots:e._u([{key:"input",fn:function(){return[t(Re["a"],{attrs:{value:a.title,rules:[e.rules.required],label:"Renomear","single-line":"single-line",counter:"counter"},on:{input:t=>e.editTagTitle=t}})]},proxy:!0}],null,!0)},[e._v(e._s(a.title)+" ")])]}}],null,!1,3718668516),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}}):t("div",{staticClass:"pt-8 pb-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhuma tag foi adicionada. ")]),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e(),t("add",{attrs:{"field-id":e.fieldId},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}}),t("link-module",{attrs:{"field-id":e.fieldId,"link-module":e.linkModule},model:{value:e.linkModuleDialog,callback:function(t){e.linkModuleDialog=t},expression:"linkModuleDialog"}})],1)},Id=[],$d=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Adicionar tag")]),t(Re["a"],{staticClass:"mb-3",attrs:{label:"Título",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.addTagTitle,callback:function(t){e.addTagTitle=t},expression:"addTagTitle"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.addTagTitle,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.add}},[e._v("Adicionar")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},Td=[],Sd={props:{value:Boolean,fieldId:{type:Number,required:!0}},data:()=>({loading:!1,addTagTitle:null}),computed:{moduleId(){return this.$rest("modules").item.id}},methods:{add(){this.loading=!0,this.$rest("modulesTags").post({data:{title:this.addTagTitle},params:{moduleId:this.moduleId,fieldId:this.fieldId}}).then(e=>this.$emit("add",e)).finally(()=>{this.addTagTitle=null,this.addDialog=!1,this.loading=!1})}},components:{Loading:ne}},Od=Sd,Dd=Object(I["a"])(Od,$d,Td,!1,null,null,null),jd=Dd.exports,Ad=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"330px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Vincular módulo")]),t(ha["a"],{staticClass:"mb-3",attrs:{items:e.modules,label:"Módulo",outlined:"outlined",dense:"dense","hide-details":"hide-details"},model:{value:e.selectedModule,callback:function(t){e.selectedModule=t},expression:"selectedModule"}}),t(f["a"],{staticClass:"text-none",attrs:{disabled:!e.selectedModule,color:"secondary",block:"block",depressed:"depressed"},on:{click:e.link}},[e._v("Vincular")])],1),e.value?t(Gt["a"],{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1):e._e()],1)},qd=[],Ld={props:{value:Boolean,fieldId:{type:Number,required:!0}},data:()=>({loading:!1,selectedModule:null}),computed:{moduleId(){return this.$rest("modules").item.id},modules(){return this.$rest("modules").list.filter(({id:e,viewKey:t})=>"table"===t&&e!=this.$rest("modules").item.id).map(({name:e,key:t})=>({text:e,value:t}))}},methods:{link(){this.loading=!0,this.$rest("modulesTags").put({id:"link-module",data:{link:this.selectedModule},params:{fieldId:this.fieldId,moduleId:this.moduleId}}).finally(()=>{this.$router.go()})}},components:{Loading:ne}},Fd=Ld,Md=Object(I["a"])(Fd,Ad,qd,!1,null,null,null),Rd=Md.exports,Pd={props:{value:Boolean,fieldId:{type:Number,required:!0},tags:{type:Array,default:()=>[]},isAdminUser:{type:Boolean,default:!1},linkModule:String},data:()=>({addDialog:!1,linkModuleDialog:!1,loading:!1,headers:[{text:"Título",value:"title",align:"left"}],editTagTitle:null,rules:{required:Be},selecteds:[]}),computed:{moduleKey(){return this.$rest("modules").item.key},moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub||1}},methods:{remove(){this.loading=!0,Promise.all(this.selecteds.map(({id:e})=>this.$rest("modulesTags").delete({id:e,params:{moduleId:this.moduleId}}))).finally(()=>{this.selecteds=[],this.loading=!1})},editTitle(e){const t=this.tags.find(({id:t})=>t==e).title;this.editTagTitle&&t!==this.editTagTitle&&(this.loading=!0,this.$rest("modulesTags").put({id:e,prop:"title",data:{value:this.editTagTitle},params:{moduleId:this.moduleId}}).then(()=>this.loading=!1))},unlink(){this.loading=!0,this.$rest("modulesCategories").put({id:"unlink-module",data:{link:null},params:{fieldId:this.fieldId,moduleId:this.moduleId}}).finally(()=>{this.$router.go()})}},components:{TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs,Loading:ne,Add:jd,LinkModule:Rd}},Nd=Pd,Bd=Object(I["a"])(Nd,wd,Id,!1,null,null,null),Ed=Bd.exports,Hd={props:{fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0}},data:()=>({listDialog:!1,value_:null}),computed:{moduleId(){return this.$rest("modules").item.id},itemId(){return this.$route.params.sub},linkModule(){return this.fieldOptions.linkModule},tags(){return this.linkModule?this.$rest(this.linkModule).list:this.$rest("modulesTags").getters.filterByProperty("fieldId",this.fieldId)},tagsSelect(){const e=this.tags.map(({title:e,id:t})=>({text:e,value:t}));return e},valueParsed(){return this.value_&&this.value_.length?JSON.stringify(this.value_):"[]"}},watch:{value(e){this.value_=e?JSON.parse(e):[]}},created(){this.linkModule?this.$rest(this.linkModule).get({params:{fields:"id,title"}}):this.$rest("modulesTags").get({params:{moduleId:this.moduleId},keepCache:!0})},mounted(){this.value_=this.value?JSON.parse(this.value):[]},mixins:[ms],components:{List:Ed}},Ud=Hd,Kd=Object(I["a"])(Ud,_d,Cd,!1,null,null,null),zd=Kd.exports,Vd={name:"tagsfield",component:zd,formatForDisplay:async({component:e,value:t,moduleId:a})=>{let i=e.$rest("modulesTags").list.find(({id:e})=>e==t);return i?i.title:e.$rest("modulesTags").get({params:{moduleId:a},keepCache:!0}).then(e=>{const a=e.find(({id:e})=>e==t);return a?a.title:""})}},Wd=function(){var e=this,t=e._self._c;return t("grid-item",{staticClass:"field-time",attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t(Re["a"],{attrs:{label:e.label,value:e._value,name:e.name,type:"time",dense:"dense",outlined:"outlined",dark:"dark"}})],1)},Jd=[],Gd={mixins:[ms],computed:{moduleKey(){return this.$rest("modules").item.key},item(){return this.$rest(this.moduleKey).item},_value(){return this.value?this.value:this.item.alteredAt?null:Zl(new Date)}}},Zd=Gd,Yd=(a("0ee0"),Object(I["a"])(Zd,Wd,Jd,!1,null,null,null)),Qd=Yd.exports,Xd={name:"timefield",component:Qd,formatForDisplay:({value:e})=>e&&e.slice(0,5)},eu=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"d-flex"},[t(Re["a"],{attrs:{label:e.label,name:e.name,rules:e.rules,dense:"dense",outlined:"outlined",dark:"dark"},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}}),e.isAdminUser&&e.fieldId?t(f["a"],{staticClass:"ml-1",attrs:{icon:"icon",small:"small"},on:{click:function(t){e.optionsDialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1):e._e()],1),e.fieldId?t("options",{attrs:{"field-id":e.fieldId,"field-options":e.fieldOptions},model:{value:e.optionsDialog,callback:function(t){e.optionsDialog=t},expression:"optionsDialog"}}):e._e()],1)},tu=[],au=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Opções","max-width":"500px"},on:{input:t=>e.$emit("input",t)},scopedSlots:e._u([{key:"actions",fn:function(){},proxy:!0}])},[t("div",{staticClass:"d-flex"},[t(Re["a"],{ref:"regexp",staticClass:"mr-2",attrs:{rules:[e.rules.regexp],disabled:e.loading.regexp,loading:e.loading.regexp,label:"RegExp",outlined:"outlined",dense:"dense",dark:"dark"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save("regexp")}},model:{value:e.options.regexp,callback:function(t){e.$set(e.options,"regexp",t)},expression:"options.regexp"}}),t("div",{staticClass:"pt-1"},[t("template-dialog-header-button",{attrs:{icon:"fas fa-save",text:"Salvar"},on:{click:function(t){return e.save("regexp")}}})],1)],1)])},iu=[],su={props:{value:Boolean,fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0}},data:()=>({rules:{regexp:Ke},loading:{regexp:!1},options:{regexp:null}}),computed:{moduleId(){return this.$rest("modules").item.id}},methods:{save(e){const t=this.$refs[e];t.validate()&&(this.loading[e]=!0,this.$rest("modulesFields").put({id:this.fieldId,prop:"options",data:{option:e,value:this.options[e]},params:{moduleId:this.moduleId}}).then(()=>{this.fieldOptions[e]=this.options[e],this.loading[e]=!1}))}},watch:{fieldOptions(e){this.options={...e}}},mounted(){this.options={...this.fieldOptions}},components:{TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs}},lu=su,nu=Object(I["a"])(lu,au,iu,!1,null,null,null),ou=nu.exports,ru={props:{fieldId:{type:Number},fieldOptions:{type:Object,default:()=>({})}},data:()=>({optionsDialog:!1,value_:null}),computed:{rules(){const e=[],t=this.fieldOptions.regexp;if(!t)return e;let a;t.replace(/\/([^/]+)\/(.+)?/,(e,t,i)=>{a=new RegExp(t,i)});const i=e=>!e||a.test(e)||"Valor inválido.";return e.push(i),e}},mixins:[ms],watch:{value(e){this.value_=e}},mounted(){this.value_=this.value},components:{Options:ou}},du=ru,uu=Object(I["a"])(du,eu,tu,!1,null,null,null),cu=uu.exports,mu={name:"tinytextfield",component:cu},pu=function(){var e=this,t=e._self._c;return t("grid-item",{attrs:{"col-end":"span 2","col-end-sm":"span 1"}},[t("div",{staticClass:"d-flex"},[t(Re["a"],{attrs:{label:e.label,rules:[e.url],prefix:e.fieldOptions.prefix,"append-icon":"fas fa-globe",type:"url",dense:"dense",outlined:"outlined",dark:"dark"},model:{value:e.value_,callback:function(t){e.value_=t},expression:"value_"}}),t("input",{attrs:{type:"hidden",name:e.name},domProps:{value:e.prefix?e.prefix+e.value_:e.value_}}),t(f["a"],{staticClass:"ml-1",attrs:{icon:"icon",small:"small"},on:{click:function(t){e.optionsDialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1)],1),t("options",{attrs:{"field-id":e.fieldId,"field-options":e.fieldOptions},model:{value:e.optionsDialog,callback:function(t){e.optionsDialog=t},expression:"optionsDialog"}})],1)},fu=[],hu=function(){var e=this,t=e._self._c;return t("template-dialog-any",{attrs:{value:e.value,title:"Opções","max-width":"500px"},on:{input:t=>e.$emit("input",t)},scopedSlots:e._u([{key:"actions",fn:function(){},proxy:!0}])},[t("div",{staticClass:"d-flex"},[t(Re["a"],{ref:"prefix",staticClass:"mr-2",attrs:{rules:[e.rules.url],disabled:e.loading.prefix,loading:e.loading.prefix,label:"Prefixo",type:"url",outlined:"outlined",dense:"dense",dark:"dark"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save("prefix")}},model:{value:e.options.prefix,callback:function(t){e.$set(e.options,"prefix",t)},expression:"options.prefix"}}),t("div",{staticClass:"pt-1"},[t("template-dialog-header-button",{attrs:{icon:"fas fa-save",text:"Salvar"},on:{click:function(t){return e.save("prefix")}}})],1)],1)])},gu=[],vu={props:{value:Boolean,fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0}},data:()=>({rules:{url:Ue},loading:{prefix:!1},options:{prefix:null}}),computed:{moduleId(){return this.$rest("modules").item.id}},methods:{save(e){const t=this.$refs[e];t.validate()&&(this.loading[e]=!0,this.$rest("modulesFields").put({id:this.fieldId,prop:"options",data:{option:e,value:this.options[e]},params:{moduleId:this.moduleId}}).then(()=>{this.fieldOptions[e]=this.options[e],this.loading[e]=!1}))}},watch:{fieldOptions(e){this.options={...e}}},mounted(){this.options={...this.fieldOptions}},components:{TemplateDialogAny:Os,TemplateDialogHeaderButton:Fs}},bu=vu,yu=Object(I["a"])(bu,hu,gu,!1,null,null,null),xu=yu.exports,ku={props:{fieldId:{type:Number,required:!0},fieldOptions:{type:Object,required:!0}},data:()=>({optionsDialog:!1,value_:null}),computed:{prefix(){return this.fieldOptions.prefix},moduleKey(){return this.$rest("modules").item.key}},methods:{url(e){return Ue(this.prefix?this.prefix+e:e)}},watch:{value(e){this.value_=this.prefix?e.replace(this.prefix,""):e}},mounted(){this.value_=this.prefix?this.value.replace(this.prefix,""):this.value},mixins:[ms],components:{Options:xu}},_u=ku,Cu=Object(I["a"])(_u,pu,fu,!1,null,null,null),wu=Cu.exports,Iu={name:"urlfield",component:wu};const $u={bigText:vs,category:rl,collection:Cl,collectionWithKey:Ml,color:Kl,date:tn,datetime:dn,email:gn,file:Dn,hidden:Mn,imageFile:xo,computed:Eo,mediumText:Jo,number:tr,password:rr,price:gr,readOnly:Cr,sourceCode:Dr,subcategory:td,switchBoolean:kd,tags:Vd,time:Xd,tinyText:mu,url:Iu},Tu=Object.entries($u),Su=Object.fromEntries(Tu.filter(([,e])=>!!e.formatForDisplay).map(([e,t])=>[e,t.formatForDisplay])),Ou=Object.fromEntries(Tu.filter(([,e])=>!!e.headerFilterComponent).map(([e,t])=>[e,t.headerFilterComponent]));var Du=Object.fromEntries(Tu.map(([,e])=>[e.name,e.component])),ju={name:"TableList",props:{data:Object},data:()=>({loading:!0,search:"",selecteds:[],totalItems:0,items:[],action:"item.action",itemsPerPage:30,filtersOptions:{},filtersQuery:{}}),computed:{fields(){return this.data.fields},fieldsMap(){return Object.fromEntries(this.fields.map(e=>[e.key,e]))},listHeaders(){return this.data.viewOptions.listHeaders},headers(){if(!this.fields||!this.listHeaders)return[];const e=this.listHeaders.map(this.createHeaderFromField);return[...e,this.createHeader({text:"",value:"action",align:"right"})]},headersWithFilter(){return this.headers.filter(e=>!!e.fieldFilterComponent)},columnsWithDisplay(){return this.fields.filter(e=>e.typeKey in Su)},sm(){return this.$vuetify.breakpoint.smAndDown},moduleKey(){return this.data.key}},methods:{get(e=1,t=null){const a=this.listHeaders.join(","),i={fields:"id,active"+(a?","+a:""),itemsPerPage:t||this.itemsPerPage,page:e,search:this.search,returnTotalItems:1,...this.filtersQuery};return this.$rest(this.moduleKey).get({params:i,save:async(e,{list:t,totalItems:a})=>{this.totalItems=parseInt(a),e.list=t,await this.parseItems(t),this.loading=!1}}).catch(()=>this.$router.replace("/"))},async parseItems(e){this.items=[];for(let t of e){const e=await this.parseItem(t);this.items.push(e)}},async parseItem(e){const t={};for(let a in e){const i=this.fieldsMap[a];!i&&["showFrom","showUp"].includes(a)?t[a]=Su["datetime"]({value:e[a]}):i&&Su[i.typeKey]?t[a]=await Su[i.typeKey]({id:e.id,item:e,component:this,value:e[a],fieldData:this.fields.find(e=>e.key===a),moduleId:this.data.id}):t[a]=e[a]}return t},showItem(e){const t=this.$route.path+"/"+e.id;this.$router.push(t)},changePage(e){this.loading=!0,this.get(e)},filter(){const e=new URLSearchParams;function t(e,t){const a=e.get("filters")?e.get("filters").split(","):[];a.includes(t)||a.push(t),e.set("filters",a.join(","))}for(let a in this.filtersOptions){const i=this.filtersOptions[a];if(i.active){t(e,a);for(let[t,a]of i.query)e.set(t,a)}}this.filtersQuery=Object.fromEntries(e.entries()),this.loading=!0,this.get()},findFieldByKey(e){return this.fields.find(t=>t.key==e)},createHeader(e){const t={align:"left",sortable:!1,filterable:!1},a=Object.assign(t,e);return a},createHeaderFromField(e){const t={id:"Id",showFrom:"Começo",showUp:"Fim"};if(e in t)return this.createHeader({value:e,text:t[e]});const a=this.fieldsMap[e],i=Ou[a.typeKey];return i&&(this.filtersOptions[e]={active:!1}),this.createHeader({value:e,text:a.name,field:a,fieldFilterComponent:i})}},created(){this.loading=!0,this.get()},components:{AddItemButton:Ga,RemoveItemButton:ti,ToggleActiveButton:oi,PrintButton:pi,ExportButton:yi,ModuleTemplate:Jt,Loading:ne}},Au=ju,qu=Object(I["a"])(Au,Ha,Ua,!1,null,null,null),Lu=qu.exports,Fu=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:e.data.name+" / Alterar",width:"800px","max-width":"100%"},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("RangeDateButton",{attrs:{item:e.item,"item-id":e.itemId,data:e.data}})]},proxy:!0}])},[t(h["a"],{staticClass:"pa-2 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form"},[e._l(e.sectionedFields,(function(a,i){return t("div",{key:i,staticClass:"mb-6"},["null"!==i?[t("div",{staticClass:"text-body-1 text-uppercase font-weight-bold"},[e._v(" "+e._s(i)+" ")]),t("div",{staticClass:"table-module-edit-form mt-2 primary lighten-2 pa-2 rounded"},e._l(a,(function({id:a,name:i,key:s,typeKey:l,options:n},o){return t(l.toLowerCase()+"field",{key:o,tag:"component",attrs:{value:e.item[s]||"",label:i,name:s,"field-id":parseInt(a),"field-type-key":l,"field-options":n,item:e.item,"item-id":e.itemId,"module-id":e.moduleId,"module-key":e.moduleKey}})})),1)]:t("div",{staticClass:"table-module-edit-form mt-2 rounded"},e._l(a,(function({id:a,name:i,key:s,typeKey:l,options:n},o){return t(l.toLowerCase()+"field",{key:o,tag:"component",attrs:{value:e.item[s]||"",label:i,name:s,"field-id":parseInt(a),"field-type-key":l,"field-options":n,item:e.item,"item-id":e.itemId,"module-id":e.moduleId,"module-key":e.moduleKey}})})),1)],2)})),t("div",{staticClass:"d-flex justify-end"},[t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed"},on:{click:e.send}},[e._v(e._s(e.isPublished?"Alterar":"Publicar"))])],1)],2)],1)],1)},Mu=[],Ru=function(){var e=this,t=e._self._c;return t("div",[t("ToolbarButton",{attrs:{tip:"Começo/Fim",icon:"fas fa-calendar-alt"},on:{click:function(t){e.rangeDateActiveDialog=!0}}}),t($t["a"],{attrs:{"max-width":"330px"},model:{value:e.rangeDateActiveDialog,callback:function(t){e.rangeDateActiveDialog=t},expression:"rangeDateActiveDialog"}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title mb-4 text-center"},[e._v("Alterar período ativo")]),t(Me["a"],{ref:"rangeDateActiveForm",staticClass:"table-module-edit-rangedateactived"},[t(Re["a"],{staticClass:"mb-3",attrs:{label:"Começo",type:"datetime-local",name:"showFrom",value:e.item.showFrom&&e.item.showFrom.replace(" ","T"),clearable:!0,"clear-icon":"fas fa-times",outlined:"outlined",dense:"dense","hide-details":"hide-details"}}),t(Re["a"],{staticClass:"mb-3",attrs:{label:"Fim",type:"datetime-local",name:"showUp",value:e.item.showUp&&e.item.showUp.replace(" ","T"),clearable:!0,"clear-icon":"fas fa-times",outlined:"outlined",dense:"dense","hide-details":"hide-details"}})],1),t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",loading:e.updatingRangeDateActived,disabled:e.updatingRangeDateActived,block:"block",depressed:"depressed"},on:{click:e.setRangeDateActived}},[e._v("Alterar")])],1)],1)],1)},Pu=[],Nu={props:{data:{type:Object,required:!0},item:{type:Object,required:!0},itemId:{type:String,required:!0}},data:()=>({rangeDateActiveDialog:!1,updatingRangeDateActived:!1}),methods:{setRangeDateActived(){this.updatingRangeDateActived=!0;const e=Object.fromEntries(new FormData(this.$refs.rangeDateActiveForm.$el).entries());this.$rest(this.data.key).put({id:this.itemId,save:()=>!1,data:e}).finally(()=>this.updatingRangeDateActived=!1)}},components:{ToolbarButton:Et}},Bu=Nu,Eu=(a("fe61"),Object(I["a"])(Bu,Ru,Pu,!1,null,null,null)),Hu=Eu.exports,Uu={name:"TableAdd",props:{data:Object},computed:{itemId(){return this.$route.params.sub},item(){return this.$rest(this.data.key).item},isPublished(){return this.item.alteredAt&&parseInt(this.item.active)},sectionedFields(){return B(this.data.fields,"modules_sections_fields_title")},moduleId(){return this.$rest("modules").item.id},moduleKey(){return this.$route.params.module}},methods:{send(){const e=this.$refs.form;if(e.validate()){const t=Object.fromEntries(new FormData(e.$el).entries());for(let e in t)"object"===typeof t[e]&&delete t[e];this.isPublished||(t.active=1),this.$rest(this.data.key).put({id:this.itemId,data:t}).then(()=>this.$router.push("/"+this.data.key))}}},created(){this.$rest(this.data.key).get({id:this.itemId}).catch(()=>this.$router.replace("/"+this.data.key))},components:{ModuleTemplate:Jt,...Du,RangeDateButton:Hu}},Ku=Uu,zu=(a("95ea"),Object(I["a"])(Ku,Fu,Mu,!1,null,null,null)),Vu=zu.exports,Wu=a("cc20"),Ju=a("ef9a"),Gu=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticClass:"d-flex align-center mb-2"},[t("div",{staticClass:"white--text font-weight-bold text-body-1"},[e._v("Campos")]),t("tooltip",{attrs:{tip:"Adicionar",top:"top"}},[t(f["a"],{staticClass:"ml-2",attrs:{color:"secondary",fab:"fab",depressed:"depressed","x-small":"x-small"},on:{click:e.addField}},[t(v["a"],[e._v("fas fa-plus")])],1)],1)],1),e.fields.length?t("field-list",{ref:"fieldList",attrs:{items:e.fields},on:{changefieldkey:e.updateListHeaders}}):t("div",{staticClass:"pa-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum campo foi adicionado! ")])],1),t("div",{staticClass:"mt-6"},[e._m(0),t(Ju["a"],{attrs:{column:"column",multiple:"multiple"},model:{value:e.listHeaders,callback:function(t){e.listHeaders=t},expression:"listHeaders"}},[t(Wu["a"],{attrs:{value:"id",filter:"",outlined:""}},[e._v("Id")]),e._l(e.fields,(function({name:a,key:i},s){return[a?t(Wu["a"],{key:s,attrs:{value:i,filter:"",outlined:""}},[e._v(e._s(a))]):e._e()]})),t(Wu["a"],{attrs:{value:"showFrom",filter:"",outlined:""}},[e._v("Começo")]),t(Wu["a"],{attrs:{value:"showUp",filter:"",outlined:""}},[e._v("Fim")])],2),e.noListHeaders?t("div",{staticClass:"pt-8 text-body-2 text-center font-weight-bold red--text"},[e._v(" Deve haver no mínimo um cabeçalho. ")]):e._e()],1)])},Zu=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex align-center mb-2"},[t("div",{staticClass:"white--text font-weight-bold text-body-1"},[e._v(" Cabeçalhos da lista ")])])}],Yu=function(){var e=this,t=e._self._c;return t("div",[t("div",{ref:"fieldList",staticClass:"field-list"},e._l(e.items,(function(a,i){return t("field-item",{key:i,attrs:{types:e.fieldsTypes,data:a,"unique-option":e.uniqueOption},on:{remove:function(t){return e.removeField(i)},changekey:function(t){return e.$emit("changefieldkey")}}})})),1),e.repeteadKey?t("div",{staticClass:"pt-8 text-body-2 text-center font-weight-bold red--text"},[e._v(" Não pode existir alguma chave de campo repetida. ")]):e._e()])},Qu=[],Xu=function(){var e=this,t=e._self._c;return t(h["a"],{staticClass:"pa-3",attrs:{color:"primary"}},[t(Me["a"],{ref:"form",staticClass:"field-item"},[t("div",{staticClass:"field-item-inputs"},[t(Re["a"],{attrs:{rules:[e.rules.required],label:"Nome",dense:"dense",solo:"solo"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),t(Re["a"],{attrs:{rules:[e.rules.required,e.rules.alphaNumUnderline],label:"Chave",dense:"dense",solo:"solo"},on:{input:function(t){return e.$emit("changekey")}},model:{value:e.data.key,callback:function(t){e.$set(e.data,"key",t)},expression:"data.key"}}),t(ha["a"],{attrs:{items:e.types,rules:[e.rules.required],label:"Tipo",dense:"dense",solo:"solo"},model:{value:e.data.type,callback:function(t){e.$set(e.data,"type",t)},expression:"data.type"}})],1),t("div",{staticClass:"field-item-switches d-flex"},[e.uniqueOption?t("tooltip",{attrs:{tip:"Único",top:"top"}},[t(f["a"],{attrs:{icon:"icon"},on:{click:function(t){e.data.unique=!e.data.unique}}},[t(v["a"],{attrs:{color:"cyan",disabled:!e.data.unique}},[e._v("fas fa-fingerprint")])],1)],1):e._e()],1),t("div",{staticClass:"field-item-btns d-flex align-center justify-end"},[t(f["a"],{attrs:{color:"secondary darken-2",small:"small"},on:{click:function(t){return e.$emit("remove")}}},[t(v["a"],{attrs:{left:"left"}},[e._v("fas fa-trash")]),t("span",{staticClass:"text-none"},[e._v("Remover")])],1)],1)])],1)},ec=[],tc={props:{data:{type:Object,default:()=>({name:null,key:null,type:null,unique:!1})},types:{type:Array,required:!0},uniqueOption:{type:Boolean,default:!0}},data:()=>({rules:{required:Be,alphaNumUnderline:He}}),computed:{},methods:{validate(){return this.$refs.form.validate()}},components:{Tooltip:Rt}},ac=tc,ic=(a("6426"),Object(I["a"])(ac,Xu,ec,!1,null,null,null)),sc=ic.exports,lc={props:{items:{type:Array,default:()=>[]},uniqueOption:{type:Boolean,default:!0}},data:()=>({selected:null,repeteadKey:!1}),computed:{fieldsTypes(){return this.$rest("modulesFieldsTypes").list.map(({id:e,name:t})=>({text:t,value:e}))}},methods:{removeField(e){this.items.splice(e,1)},validate(){const e=[];if(this.$children.forEach(t=>e.push(t.validate())),e.includes(!1))return!1;const t=[];this.repeteadKey=!1;for(const{key:a}of this.items){if(t.includes(a))return this.repeteadKey=!0,!1;t.push(a)}return!0}},beforeCreate(){this.$rest("modulesFieldsTypes").get()},components:{FieldItem:sc}},nc=lc,oc=(a("5cef"),Object(I["a"])(nc,Yu,Qu,!1,null,null,null)),rc=oc.exports,dc={data:()=>({fields:[],listHeaders:[],noListHeaders:null}),computed:{data(){return{fields:this.fields,viewOptions:{listHeaders:this.listHeaders}}},fieldsTypes(){return this.$rest("modulesFieldsTypes").list.map(({id:e,name:t})=>({text:t,value:e}))}},methods:{addField(){this.fields.push({name:null,key:null,type:null,unique:!1})},validate(){const e=this.$refs.fieldList;return!!e&&(this.listHeaders.length?(this.noListHeaders=!1,e.validate()):(this.noListHeaders=!0,!1))},updateListHeaders(){for(let e of this.listHeaders)this.fields.find(({key:t})=>t===e)||this.listHeaders.splice(this.listHeaders.indexOf(e),1)}},watch:{listHeaders(e){e.length&&(this.noListHeaders=!1)}},beforeCreate(){this.$rest("modulesFieldsTypes").get()},components:{FieldList:rc,Tooltip:Rt}},uc=dc,cc=(a("e840"),Object(I["a"])(uc,Gu,Zu,!1,null,null,null)),mc=cc.exports,pc=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticClass:"d-flex align-center mb-2"},[t("div",{staticClass:"white--text font-weight-bold text-body-1"},[e._v("Campos")]),t("tooltip",{attrs:{tip:"Adicionar",top:"top"}},[t(f["a"],{staticClass:"ml-2",attrs:{color:"secondary",fab:"fab",depressed:"depressed","x-small":"x-small"},on:{click:function(t){e.addDialog=!0}}},[t(v["a"],[e._v("fas fa-plus")])],1)],1)],1),e.data.fields&&e.data.fields.length?t("field-list",{ref:"fieldList",attrs:{items:e.data.fields},on:{changefieldkey:e.updateListHeaders}}):t("div",{staticClass:"pa-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum campo foi adicionado! ")])],1),t("div",{staticClass:"mt-6 mb-4"},[e._m(0),t(Ju["a"],{attrs:{column:"column",multiple:"multiple"},model:{value:e.listHeaders,callback:function(t){e.listHeaders=t},expression:"listHeaders"}},[t(Wu["a"],{attrs:{value:"id",filter:"",outlined:""}},[e._v("Id")]),e._l(e.data.fields,(function({name:a,key:i},s){return t(Wu["a"],{key:s,attrs:{value:i,filter:"filter",outlined:"outlined"}},[e._v(e._s(a))])})),t(Wu["a"],{attrs:{value:"showFrom",filter:"",outlined:""}},[e._v("Começo")]),t(Wu["a"],{attrs:{value:"showUp",filter:"",outlined:""}},[e._v("Fim")]),t(f["a"],{attrs:{loading:e.sendingListHeaders,color:"secondary darken-1",fab:"fab",small:"small",depressed:"depressed"},on:{click:e.sendListHeaders}},[t(v["a"],[e._v("fas fa-save")])],1)],2),e.noListHeaders?t("div",{staticClass:"pt-8 text-body-2 text-center font-weight-bold red--text"},[e._v(" Deve haver no mínimo um cabeçalho. ")]):e._e(),t("add-field",{attrs:{types:e.fieldsTypes},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}})],1)])},fc=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex align-center mb-2"},[t("div",{staticClass:"white--text font-weight-bold text-body-1"},[e._v(" Cabeçalhos da lista ")])])}],hc=function(){var e=this,t=e._self._c;return t("div",[t("div",{ref:"fieldList",staticClass:"field-list"},e._l(e.items,(function(a,i){return t("field-item",{key:i,attrs:{types:e.fieldsTypes,data:a},on:{remove:function(t){return e.removeField(i)},changekey:function(t){return e.$emit("changefieldkey")}}})})),1),e.repeteadKey?t("div",{staticClass:"pt-8 text-body-2 text-center font-weight-bold red--text"},[e._v(" Não pode existir alguma chave de campo repetida. ")]):e._e()])},gc=[],vc=function(){var e=this,t=e._self._c;return t(h["a"],{staticClass:"pa-3",attrs:{color:"primary"}},[t(Me["a"],{ref:"form",staticClass:"field-item"},[t("div",{staticClass:"field-item-inputs align-center"},[t(Re["a"],{attrs:{value:e.data.name,loading:e.updating.name,disabled:e.updating.name||e.updating.typeId||e.removing,label:"Nome",dense:"dense",solo:"solo","hide-details":"hide-details"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateProperty(t.target.value,"name")},blur:function(t){return e.updateProperty(t.target.value,"name")}}}),t(ha["a"],{attrs:{value:e.data.typeId,items:e.types,loading:e.updating.typeId,disabled:e.updating.name||e.updating.typeId||e.removing,label:"Tipo",dense:"dense",solo:"solo","hide-details":"hide-details"},on:{input:function(t){return e.updateProperty(t,"typeId")}}}),t(f["a"],{attrs:{small:"small",icon:"icon"},on:{click:function(t){e.dialog=!0}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-cog")])],1),t(f["a"],{attrs:{loading:e.removing,color:"secondary darken-2",small:"small",icon:"icon"},on:{click:e.remove}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-trash")])],1)],1)]),t($t["a"],{attrs:{"max-width":"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title d-flex"},[e._v("Seção")]),t(It["a"],{staticClass:"py-4",attrs:{headers:e.sectionsTableHeaders,items:e.sections,loading:e.sectionDataTableLoading,"single-select":"single-select","show-select":"show-select","hide-default-header":"hide-default-header","hide-default-footer":"hide-default-footer"},scopedSlots:e._u([{key:"item.title",fn:function({item:a}){return[t(ks["a"],{attrs:{dark:"dark"},on:{save:e.updateSectionTitle,open:function(t){return e.openDialogUpdateSectionTitle(a)}},scopedSlots:e._u([{key:"input",fn:function(){return[t(Re["a"],{attrs:{value:a.title,label:"Editar","single-line":"single-line",counter:"counter"},model:{value:e.editUpdateSectionTitle,callback:function(t){e.editUpdateSectionTitle=t},expression:"editUpdateSectionTitle"}})]},proxy:!0}],null,!0)},[e._v(e._s(a.title)+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t(f["a"],{attrs:{disabled:e.sectionDataTableLoading,color:"secondary darken-2",small:"small",icon:"icon"},on:{click:function(t){return e.removeSection(a.id)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-trash")])],1)]}}]),model:{value:e.settedSectionField,callback:function(t){e.settedSectionField=t},expression:"settedSectionField"}}),t("div",{staticClass:"add-section py-1"},[t(v["a"],{staticClass:"pa-3",attrs:{small:"small"}},[e._v("fas fa-plus")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.addSectionValue,expression:"addSectionValue"}],attrs:{placeholder:"Adicionar Seção"},domProps:{value:e.addSectionValue},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSection.apply(null,arguments)},input:function(t){t.target.composing||(e.addSectionValue=t.target.value)}}})],1)],1)],1)],1)},bc=[],yc={props:{data:{type:Object,default:()=>({id:null,name:null,key:null,type:null,required:!1,unique:!1,modules_sections_fields_id:null})},types:{type:Array,required:!0}},data:()=>({rules:{required:Be,alphaNumUnderline:He},removing:!1,updating:{name:!1,typeId:!1},dialog:!1,sectionsTableHeaders:[{text:"Título",value:"title",align:"start"},{text:"Ações",value:"actions",align:"end"}],selectedUpdateSection:null,editUpdateSectionTitle:null,sectionDataTableLoading:!1,addSectionValue:null}),computed:{moduleId(){return this.$route.params.module},sections(){return this.$rest("modulesSectionsFields").list},settedSectionField:{get(){if(!this.data)return[];const e=this.sections.find(({id:e})=>e===this.data.modules_sections_fields_id);return e?[e]:[]},set(e){e[0]?this.updateProperty(e[0].id,"modules_sections_fields_id"):this.updateProperty(null,"modules_sections_fields_id")}}},methods:{validate(){return this.$refs.form.validate()},remove(){this.removing=!0,this.$rest("modulesFields").delete({id:this.data.id,params:{moduleId:this.moduleId}}).then(()=>this.$emit("remove")).finally(()=>this.removing=!1)},updateProperty(e,t){if(this.data[t]===e)return!1;this.updating[t]=!0,this.sectionDataTableLoading=!0,this.$rest("modulesFields").put({id:this.data.id,data:{value:e},prop:t,params:{moduleId:this.moduleId}}).then(()=>this.data[t]=e).finally(()=>{this.updating[t]=!1,this.sectionDataTableLoading=!1})},addSection(){this.sectionDataTableLoading=!0,this.$rest("modulesSectionsFields").post({data:{title:this.addSectionValue,moduleId:this.moduleId}}).then(e=>{"error"!==e.status&&(this.addSectionValue="")}).finally(()=>{this.sectionDataTableLoading=!1})},removeSection(e){this.sectionDataTableLoading=!0,this.$rest("modulesSectionsFields").delete({id:e,params:{moduleId:this.moduleId}}).finally(()=>this.sectionDataTableLoading=!1)},openDialogUpdateSectionTitle(e){this.selectedUpdateSection=e,this.editUpdateSectionTitle=e.title},updateSectionTitle(){if(this.selectedUpdateSection.title===this.editUpdateSectionTitle)return!1;this.sectionDataTableLoading=!0,this.$rest("modulesSectionsFields").put({id:this.selectedUpdateSection.id,data:{title:this.editUpdateSectionTitle},params:{moduleId:this.moduleId}}).then(()=>{this.selectedUpdateSection.title=this.editUpdateSectionTitle,this.sectionDataTableLoading=!1})}}},xc=yc,kc=(a("3ed8"),Object(I["a"])(xc,vc,bc,!1,null,null,null)),_c=kc.exports,Cc={props:{items:{type:Array,default:()=>[]}},data:()=>({selected:null,repeteadKey:!1}),computed:{fieldsTypes(){return this.$rest("modulesFieldsTypes").list.map(({id:e,name:t})=>({text:t,value:e}))},moduleId(){return this.$route.params.module}},methods:{removeField(e){this.items.splice(e,1)},validate(){const e=[];if(this.$children.forEach(t=>e.push(t.validate())),e.includes(!1))return!1;const t=[];this.repeteadKey=!1;for(const{key:a}of this.items){if(t.includes(a))return this.repeteadKey=!0,!1;t.push(a)}return!0}},created(){this.$rest("modulesFieldsTypes").get(),this.$rest("modulesSectionsFields").get({params:{moduleId:this.moduleId}})},components:{FieldItem:_c}},wc=Cc,Ic=(a("3de7"),Object(I["a"])(wc,hc,gc,!1,null,null,null)),$c=Ic.exports,Tc=function(){var e=this,t=e._self._c;return t($t["a"],{attrs:{value:e.value,"max-width":"340px"},on:{input:t=>e.$emit("input",t)}},[t(h["a"],{staticClass:"pa-4",attrs:{dark:"dark"}},[t("div",{staticClass:"title text-center mb-4"},[e._v("Adicionar campo")]),t(Me["a"],{ref:"form"},[t(Ta["a"],[t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(Re["a"],{attrs:{rules:[e.rules.required],label:"Nome",dense:"dense",outlined:"outlined"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(Re["a"],{attrs:{rules:[e.rules.required,e.rules.alphaNumUnderline],label:"Chave",dense:"dense",outlined:"outlined"},on:{input:function(t){return e.$emit("changekey")}},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(ha["a"],{attrs:{items:e.types,rules:[e.rules.required],label:"Tipo",dense:"dense",outlined:"outlined"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t("div",{staticClass:"field-item-switches d-flex"},[t("tooltip",{attrs:{tip:"Único",top:"top"}},[t(f["a"],{attrs:{icon:"icon"},on:{click:function(t){e.unique=!e.unique}}},[t(v["a"],{attrs:{color:"cyan",disabled:!e.unique}},[e._v("fas fa-fingerprint")])],1)],1)],1)]),t($a["a"],{staticClass:"py-0 mt-2 mt-sm-0",attrs:{cols:"12"}},[t(f["a"],{attrs:{loading:e.sending,color:"secondary darken-2",depressed:"depressed",block:"block"},on:{click:e.send}},[t("span",{staticClass:"text-none"},[e._v("Adicionar")])])],1)],1)],1)],1)],1)},Sc=[],Oc={props:{value:{type:Boolean,default:!1},types:{type:Array,required:!0}},data:()=>({rules:{required:Be,alphaNumUnderline:He},name:null,key:null,type:null,unique:!1,sending:!1}),computed:{moduleId(){return this.$route.params.module}},methods:{send(){const e=this.$refs.form;e.validate()&&(this.sending=!0,this.$rest("modulesFields").post({data:{name:this.name,key:this.key,type:this.type,unique:this.unique},params:{moduleId:this.moduleId}}).then(()=>this.$rest("modules").get({id:this.moduleId}).then(()=>{this.$emit("input",!1),this.sending=!1})).catch(()=>this.sending=!1))}},components:{Tooltip:Rt}},Dc=Oc,jc=(a("0e26"),Object(I["a"])(Dc,Tc,Sc,!1,null,null,null)),Ac=jc.exports,qc={props:{data:{type:Object,required:!0}},data:()=>({noListHeaders:null,sendingListHeaders:!1,addDialog:!1}),computed:{moduleId(){return this.$route.params.module},fieldsTypes(){return this.$rest("modulesFieldsTypes").list.map(({id:e,name:t})=>({text:t,value:e}))},listHeaders:{get(){return this.data.viewOptions.listHeaders},set(e){this.data.viewOptions.listHeaders=e}}},methods:{validate(){const e=this.$refs.fieldList;return!!e&&(this.listHeaders.length?this.noListHeaders=!1:this.noListHeaders=!0,e.validate())},updateListHeaders(){for(let e of this.listHeaders)this.fields.find(({key:t})=>t===e)||this.listHeaders.splice(this.listHeaders.indexOf(e),1)},sendListHeaders(){this.sendingListHeaders=!0,this.$rest("modules").put({id:this.moduleId,data:{value:{listHeaders:this.data.viewOptions.listHeaders}},prop:"viewOptions"}).finally(()=>{this.sendingListHeaders=!1})}},watch:{listHeaders(e){e.length&&(this.noListHeaders=!1)}},components:{FieldList:$c,AddField:Ac,Tooltip:Rt}},Lc=qc,Fc=(a("b294"),Object(I["a"])(Lc,pc,fc,!1,null,null,null)),Mc=Fc.exports,Rc={moduleConfig:{components:{add:mc,edit:Mc}},routes:[{name:"{name}",path:"/{key}",component:Lu},{name:"{name} / Alterar",path:"/{key}/:sub",component:Vu}]},Pc=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:e.data.name+" / Alterar",width:"800px","max-width":"100%"}},[t(h["a"],{staticClass:"pa-4 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form"},[e._l(e.sectionedFields,(function(a,i){return t("div",{key:i,staticClass:"mb-6"},["null"!==i?[t("div",{staticClass:"text-body-1 text-uppercase font-weight-bold"},[e._v(" "+e._s(i)+" ")]),t("div",{staticClass:"item-module-add-form mt-2 primary lighten-2 pa-2 rounded"},e._l(a,(function({id:a,name:i,key:s,typeKey:l,options:n},o){return t(l.toLowerCase()+"field",{key:o,tag:"component",attrs:{value:e.item[s]||"",label:i,name:s,"field-id":parseInt(a),"field-type-key":l,"field-options":n,item:e.item,"item-id":e.itemId,"module-id":e.moduleId,"module-key":e.moduleKey}})})),1)]:t("div",{staticClass:"item-module-add-form mt-2 rounded"},e._l(a,(function({id:a,name:i,key:s,typeKey:l,options:n},o){return t(l.toLowerCase()+"field",{key:o,tag:"component",attrs:{value:e.item[s]||"",label:i,name:s,"field-id":parseInt(a),"field-type-key":l,"field-options":n,item:e.item,"item-id":e.itemId,"module-id":e.moduleId,"module-key":e.moduleKey}})})),1)],2)})),t("div",{staticClass:"d-flex justify-end"},[t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed"},on:{click:e.send}},[e._v("Alterar")])],1)],2)],1)],1)},Nc=[],Bc={name:"ItemIndex",props:{data:Object},data:()=>({itemId:1}),computed:{item(){return this.$rest(this.data.key).item},sectionedFields(){return B(this.data.fields,"modules_sections_fields_title")},moduleId(){return this.$rest("modules").item.id},moduleKey(){return this.$route.params.module}},methods:{send(){const e=this.$refs.form;if(e.validate()){const t=Object.fromEntries(new FormData(e.$el).entries());for(let e in t)"object"===typeof t[e]&&delete t[e];this.$rest(this.data.key).put({id:this.itemId,data:t}).then(()=>this.$router.push("/"))}}},created(){this.$rest(this.data.key).get({save:(e,t)=>e.item=t}).catch(()=>this.$router.replace("/"))},components:{ModuleTemplate:Jt,...Du}},Ec=Bc,Hc=(a("53b3"),Object(I["a"])(Ec,Pc,Nc,!1,null,null,null)),Uc=Hc.exports,Kc=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticClass:"d-flex align-center mb-2"},[t("div",{staticClass:"white--text font-weight-bold text-body-1"},[e._v("Campos")]),t("tooltip",{attrs:{tip:"Adicionar",top:"top"}},[t(f["a"],{staticClass:"ml-2",attrs:{color:"secondary",fab:"fab",depressed:"depressed","x-small":"x-small"},on:{click:e.addField}},[t(v["a"],[e._v("fas fa-plus")])],1)],1)],1),e.fields.length?t("field-list",{ref:"fieldList",attrs:{items:e.fields,"unique-option":!1}}):t("div",{staticClass:"pa-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum campo foi adicionado! ")])],1)])},zc=[],Vc={data:()=>({fields:[],noListHeaders:null}),computed:{data(){return{fields:this.fields}},fieldsTypes(){return this.$rest("modulesFieldsTypes").list.map(({id:e,name:t})=>({text:t,value:e}))}},methods:{addField(){this.fields.push({name:null,key:null,type:null,unique:!1})},validate(){const e=this.$refs.fieldList;return!!e&&e.validate()}},beforeCreate(){this.$rest("modulesFieldsTypes").get()},components:{FieldList:rc,Tooltip:Rt}},Wc=Vc,Jc=(a("cc97"),Object(I["a"])(Wc,Kc,zc,!1,null,null,null)),Gc=Jc.exports,Zc=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mb-4"},[t("div",{staticClass:"d-flex align-center mb-2"},[t("div",{staticClass:"white--text font-weight-bold text-body-1"},[e._v("Campos")]),t("tooltip",{attrs:{tip:"Adicionar",top:"top"}},[t(f["a"],{staticClass:"ml-2",attrs:{color:"secondary",fab:"fab",depressed:"depressed","x-small":"x-small"},on:{click:function(t){e.addDialog=!0}}},[t(v["a"],[e._v("fas fa-plus")])],1)],1)],1),e.data.fields&&e.data.fields.length?t("field-list",{ref:"fieldList",attrs:{items:e.data.fields}}):t("div",{staticClass:"pa-4 text-body-2 text-center font-weight-bold"},[e._v(" Nenhum campo foi adicionado! ")]),t("add-field",{attrs:{types:e.fieldsTypes},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}})],1)])},Yc=[],Qc={props:{data:{type:Object,required:!0}},data:()=>({addDialog:!1}),computed:{moduleId(){return this.$route.params.module},fieldsTypes(){return this.$rest("modulesFieldsTypes").list.map(({id:e,name:t})=>({text:t,value:e}))}},methods:{validate(){const e=this.$refs.fieldList;return!!e&&e.validate()}},components:{FieldList:$c,AddField:Ac,Tooltip:Rt}},Xc=Qc,em=(a("a193"),Object(I["a"])(Xc,Zc,Yc,!1,null,null,null)),tm=em.exports,am={moduleConfig:{components:{add:Gc,edit:tm}},routes:[{name:"{name} / Alterar",path:"/{key}",component:Uc}]},im=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:e.data.name},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("toolbar-button",{attrs:{to:e.$route.path+"/broadcast",tip:"Transmitir",icon:"fas fa-paper-plane",dark:"dark"}}),t("toolbar-button",{attrs:{disabled:!e.selecteds.length,tip:"Remover",icon:"fas fa-trash",dark:"dark"},on:{click:e.remove}}),t("print-button"),t("export-button",{attrs:{"module-key":e.data.key,fields:e.fields}})]},proxy:!0}])},[t("div",[t("div",{staticClass:"pa-2 primary lighten-1 module-search"},[t(Re["a"],{attrs:{"append-icon":"fas fa-search",label:"Pesquisar","single-line":"single-line","hide-details":"hide-details",dense:"dense",outlined:"outlined",dark:"dark"},on:{"click:append":function(t){return e.get(1)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.get(1)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(It["a"],{attrs:{headers:e.headers,items:e.items,loading:e.loading,"server-items-length":e.totalItems,"items-per-page":e.itemsPerPage,height:"calc(100vh - 226px)","sort-by":"id","loading-text":"Carregado dados.","no-data-text":"Não há registros.","no-results-text":"Não há registros.","show-select":"show-select","sort-desc":"sort-desc","fixed-header":"fixed-header",dark:"dark"},on:{"update:page":e.changePage},scopedSlots:e._u([e._l(e.listHeaders,(function(a,i){return{key:"item."+a,fn:function({item:i}){return["string"===typeof i[a]?[t("span",[e._v(e._s(i[a]))])]:i[a]&&"object"===typeof i[a]?[i[a].innerHTML?t("div",{domProps:{innerHTML:e._s(i[a].innerHTML)}}):i[a].component?t(i[a].component,{tag:"component",attrs:{value:i[a].value}}):e._e()]:e._e()]}}})),{key:"item.action",fn:function({item:a}){return[t("div",{staticClass:"d-flex justify-end"},[parseInt(a.active)?t(f["a"],{attrs:{color:"green",icon:"icon",small:"small"},on:{click:function(t){return t.stopPropagation(),e.toggleActive(a.id,!1)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-eye")])],1):t(f["a"],{attrs:{color:"blue",icon:"icon",small:"small"},on:{click:function(t){return t.stopPropagation(),e.toggleActive(a.id,!0)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-eye-slash")])],1)],1)]}}],null,!0),model:{value:e.selecteds,callback:function(t){e.selecteds=t},expression:"selecteds"}})],1),t(Gt["a"],{attrs:{absolute:"absolute"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("loading")],1)],1)},sm=[],lm={name:"NewsletterList",props:{data:Object},data:()=>({loading:!0,search:"",selecteds:[],totalItems:0,items:[],action:"item.action",itemsPerPage:30}),computed:{fields(){return this.data.fields},listHeaders(){return this.data.viewOptions.listHeaders},headers(){if(!this.listHeaders||!this.fields)return[];const e=this.listHeaders.map(e=>{const t={value:e,align:"left",sortable:!1};switch(e){case"showFrom":t.text="Começo";break;case"showUp":t.text="Fim";break;default:t.text=this.fields.find(({key:t})=>t==e).name;break}return t});return e.unshift({text:"Id",value:"id",align:"left",sortable:!1,filterable:!1}),e.push({text:"",value:"action",align:"right",sortable:!1,filterable:!1}),e},sm(){return this.$vuetify.breakpoint.smAndDown}},methods:{get(e=1,t=null){return this.$rest(this.data.key).get({params:{fields:"id,active,"+this.listHeaders.join(","),itemsPerPage:t||this.itemsPerPage,page:e,search:this.search,returnTotalItems:1},save:async(e,{list:t,totalItems:a})=>{this.totalItems=parseInt(a),e.list=t,this.items=[];const i=Object.fromEntries(this.fields.map(({key:e,typeKey:t})=>[e,t]));for(let s of t){const e={};for(let t in s){const a=i[t];if(i[t])if(Su[a]){const i=Su[a]({component:this,value:s[t],fieldData:this.fields.find(e=>e.key===t),moduleId:this.data.id});e[t]=i instanceof Promise?await i:i}else e[t]=s[t];else"showFrom"!==t&&"showUp"!==t||!s[t]?e[t]=s[t]:e[t]=new Date(s[t]).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})}this.items.push(e)}this.loading=!1}}).catch(()=>this.$router.replace("/"))},remove(){this.loading=!0,Promise.all(this.selecteds.map(({id:e})=>this.$rest(this.data.key).delete({id:e}).then(()=>{this.items.splice(this.items.findIndex(t=>t.id==e),1),this.loading=!1}))).finally(()=>this.loading=!1)},toggleActive(e,t){this.$rest(this.data.key).put({id:e,prop:"active",data:{value:0|t}}).then(()=>this.items.find(t=>t.id==e).active=0|t)},changePage(e){this.loading=!0,this.get(e).finally(()=>{this.loading=!1})},broadcast(){console.log("ok")}},created(){this.loading=!0,this.get()},components:{ToolbarButton:Et,PrintButton:pi,ExportButton:yi,ModuleTemplate:Jt,Loading:ne}},nm=lm,om=Object(I["a"])(nm,im,sm,!1,null,null,null),rm=om.exports,dm=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:e.data.name+" / Transmissão",width:"800px","max-width":"100%"}},[t(h["a"],{staticClass:"pa-4 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form"},[t("div",{staticClass:"table-module-edit-form"},[t("tiny-text",{attrs:{name:"subject",label:"Assunto"}}),t("big-text",{ref:"text",attrs:{name:"text",label:"Texto"}})],1),t("div",{staticClass:"d-flex justify-end"},[t(f["a"],{staticClass:"text-none",attrs:{loading:e.loading,color:"secondary",depressed:"depressed"},on:{click:e.send}},[e._v("Transmitir")])],1)])],1)],1)},um=[],cm={name:"NewsletterBroadcast",props:{data:Object},data:()=>({loading:!1}),methods:{async send(){const e=this.$refs.form,t=e&&new FormData(e.$el);this.loading=!0,await this.$rest(this.data.key).post({prop:"broadcast",data:t}),this.loading=!1}},components:{ModuleTemplate:Jt,TinyText:cu,BigText:gs}},mm=cm,pm=(a("8f25"),Object(I["a"])(mm,dm,um,!1,null,null,null)),fm=pm.exports,hm=function(){var e=this,t=e._self._c;return t("div")},gm=[],vm={data:()=>({data:{fields:[{name:"E-mail",key:"email",type:"1",unique:!1}],viewOptions:{listHeaders:["email"]}}}),methods:{validate:()=>!0}},bm=vm,ym=Object(I["a"])(bm,hm,gm,!1,null,null,null),xm=ym.exports,km=function(){var e=this,t=e._self._c;return t("div")},_m=[],Cm={},wm=Object(I["a"])(Cm,km,_m,!1,null,null,null),Im=wm.exports,$m={moduleConfig:{components:{add:xm,edit:Im}},routes:[{name:"{name}",path:"/{key}",component:rm},{name:"{name} / Transmissão",path:"/{key}/broadcast",component:fm}]};const Tm={custom:Ea,table:Rc,item:am,newsletter:$m},{viewAddModuleComponents:Sm,viewEditModuleComponents:Om}=Object.entries(Tm).reduce((e,[t,a])=>(e.viewAddModuleComponents[t]=a.moduleConfig.components.add,e.viewEditModuleComponents[t]=a.moduleConfig.components.edit,e),{viewAddModuleComponents:{},viewEditModuleComponents:{}});let Dm=[];for(let Df in Tm)Dm="custom"===Df?[...Dm,...Tm[Df].modules.flatMap(({routes:e})=>e)]:[...Dm,...Tm[Df].routes];Dm=Object.fromEntries(Dm.map(({component:e})=>[e.name,e]));var jm={name:"ModuleAdd",data:()=>({name:null,icon:null,key:null,viewSelected:null,rules:{required:Be,alphaNumUnderline:He},loading:!1}),computed:{views(){return this.$rest("modulesViews").list.map(({key:e,name:t})=>({text:t,value:e}))}},methods:{add(){const e=this.$refs.form,t=this.$refs.view;let a=null,i=null;if(e&&(a=e.validate()),t&&(i=t.validate()),!a||!i)return;const s=this.$rest("modulesViews").list.find(({key:e})=>e===this.viewSelected).id;this.loading=!0,this.$rest("modules").post({data:{name:this.name,icon:this.icon,key:this.key,viewId:s,...t.data}}).then(()=>this.$router.push("/modules")).finally(()=>{this.loading=!1})}},beforeCreate(){this.$rest("modulesViews").get()},created(){1==this.$store.state.user.type||this.$router.replace("/error404")},components:{ModuleTemplate:Jt,...Object.fromEntries(Object.entries(Sm).map(e=>(e[0]=e[0].toLowerCase()+"-add",e)))}},Am=jm,qm=(a("59eb"),Object(I["a"])(Am,Sa,Oa,!1,null,null,null)),Lm=qm.exports,Fm=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:`Alterar módulo '${e.module.name}'`}},[t("template",{slot:"toolbar"},[e.moduleId?t("export-module-button",{attrs:{"module-id":e.moduleId}}):e._e()],1),t(h["a"],{staticClass:"pa-4 pb-0 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form",staticClass:"pt-4"},[t(Ta["a"],[t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"12",lg:"3"}},[t(Re["a"],{attrs:{value:e.module.name,rules:[e.rules.required],loading:e.updating.name,label:"Nome",outlined:"outlined",dense:"dense"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateProperty(t,"name")},blur:function(t){return e.updateProperty(t,"name")}}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[t(Re["a"],{attrs:{value:e.module.icon,rules:[e.rules.required],loading:e.updating.icon,label:"Ícone",outlined:"outlined",dense:"dense"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateProperty(t,"icon")},blur:function(t){return e.updateProperty(t,"icon")}}})],1)],1)],1),e.loaded?t(e.module.viewKey+"-edit",{tag:"component",attrs:{data:e.module}}):t(n["a"],{staticClass:"d-flex justify-center align-center py-8",attrs:{width:"100%",color:"transparent"}},[t("loading")],1)],1)],2)},Mm=[],Rm=function(){var e=this,t=e._self._c;return t("div",[t("toolbar-button",{attrs:{tip:"Exportar",icon:"fas fa-file-export",dark:"dark"},on:{click:e.exportation}}),t("a",{ref:"link",attrs:{download:"export"}})],1)},Pm=[],Nm={props:{moduleId:{type:String,required:!0}},data:()=>({dialog:!1,rules:{required:Be},loading:!1}),components:{ToolbarButton:Et},methods:{async exportation(){this.loading=!0;const e={moduleId:this.moduleId},t=await fetch(`${this.server}/rest/modules/${this.moduleId}/export`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:localStorage.getItem("token")}});if(this.loading=!1,t.ok){const e=await t.blob(),a=URL.createObjectURL(e),i=this.$refs.link;i.href=a,i.click(),i.href="",URL.revokeObjectURL(a)}else{const e=await t.json();this.$store.dispatch("endRequest",e)}}}},Bm=Nm,Em=Object(I["a"])(Bm,Rm,Pm,!1,null,null,null),Hm=Em.exports,Um={data:()=>({rules:{required:Be},loaded:!1,updating:{name:!1,icon:!1}}),computed:{modules(){return this.$rest("modules").list},moduleId(){return this.$route.params.module},module(){return this.modules.find(({id:e})=>e==this.moduleId)||{}}},methods:{updateProperty({target:{value:e}},t){if(this.module[t]===e)return!1;this.updating[t]=!0,this.$rest("modules").put({id:this.moduleId,data:{value:e},prop:t}).finally(()=>{this.updating[t]=!1})}},created(){1==this.$store.state.user.type?(this.loaded=!1,this.$rest("modules").get({id:this.moduleId}).finally(()=>this.loaded=!0)):this.$router.replace("/error404")},components:{ModuleTemplate:Jt,Loading:ne,ExportModuleButton:Hm,...Object.fromEntries(Object.entries(Om).map(e=>(e[0]=e[0].toLowerCase()+"-edit",e)))}},Km=Um,zm=Object(I["a"])(Km,Fm,Mm,!1,null,null,null),Vm=zm.exports,Wm=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:"Contas"},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("toolbar-button",{attrs:{to:e.$route.path+"/adicionar",tip:"Adicionar",icon:"fas fa-plus",dark:"dark"}})]},proxy:!0}])},[t(It["a"],{attrs:{headers:e.headers,items:e.accounts,loading:e.loading,height:"calc(100vh - 114px)","sort-by":"id","loading-text":"Carregado dados.","no-data-text":"Não há registros.","no-results-text":"Não há registros.","sort-desc":"sort-desc","fixed-header":"fixed-header","disable-pagination":"disable-pagination","hide-default-footer":"hide-default-footer",dark:"dark"},on:{"click:row":t=>e.$router.push(e.$route.path+"/"+t.id)},scopedSlots:e._u([{key:"item.action",fn:function({item:a}){return[t(f["a"],{attrs:{disabled:a.id==e.userId,color:"red",icon:"icon",small:"small"},on:{click:function(t){return t.stopPropagation(),e.remove(a.id)}}},[t(v["a"],{attrs:{small:"small"}},[e._v("fas fa-trash")])],1)]}}])})],1)},Jm=[],Gm={name:"AccountList",data:()=>({loading:!1,headers:[{text:"Id",value:"id",align:"left"},{text:"Nome",value:"name"},{text:"E-mail",value:"email"},{text:"",value:"action",align:"right"}]}),computed:{accounts(){return this.$rest("accounts").list},userId(){return this.$store.state.user.id},sm(){return this.$vuetify.breakpoint.smAndDown}},methods:{remove(e){this.$rest("accounts").delete({id:e})}},created(){1==this.$store.state.user.type?(this.loading=!0,this.$rest("accounts").get().finally(()=>this.loading=!1)):this.$router.replace("/error404")},components:{ToolbarButton:Et,ModuleTemplate:Jt}},Zm=Gm,Ym=Object(I["a"])(Zm,Wm,Jm,!1,null,null,null),Qm=Ym.exports,Xm=a("eb2a"),ep=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:"Contas / Adicionar",width:"800px","max-width":"100%"}},[t(h["a"],{staticClass:"pa-4 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form",staticClass:"pt-4"},[t(Ta["a"],[t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(Re["a"],{attrs:{label:"Nome",name:"name",rules:[e.rules.required],outlined:"outlined",dense:"dense"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(Re["a"],{attrs:{label:"E-mail",name:"email",rules:[e.rules.required,e.rules.email],outlined:"outlined",dense:"dense"}})],1)],1),t(Re["a"],{attrs:{label:"Senha",name:"password",rules:[e.rules.required],outlined:"outlined",dense:"dense"}}),t("div",[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold"},[e._v(" Permissões ")]),t(Xm["a"],{attrs:{items:e.modulesPermissions,selectable:"selectable","open-all":"open-all"},model:{value:e.userPermissions,callback:function(t){e.userPermissions=t},expression:"userPermissions"}})],1),t("div",{staticClass:"d-flex justify-end"},[t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed"},on:{click:e.send}},[e._v("Adicionar")])],1)],1)],1)],1)},tp=[],ap={name:"AccountAdd",data:()=>({rules:{required:Be,email:Ee},userPermissions:[]}),computed:{modules(){return this.$rest("modules").list.map(e=>{const t=this.modulesViews.find(t=>t.key===e.viewKey);return e.permissions=t&&t.permissions,e})},modulesViews(){return this.$rest("modulesViews").list},modulesPermissions(){let e=this.modules.map(e=>{let t={...e};return t.menuId||(t.menuTitle="$"),t.submenuId||(t.submenuTitle="$"),t});const t=B(e,"menuTitle");let a={};for(let s in t)a[s]=B(t[s],"submenuTitle");const i=Object.entries(a).map(([e,t])=>{const a=Object.entries(t).map(([e,t])=>{const a=t.map(e=>{const t=e.permissions.map(({id:t,title:a})=>({id:`${e.id}:${t}`,name:a}));return{id:e.id,name:e.name,children:t}});return"$"===e?a:[{id:Symbol(),name:e,children:a}]}).flat();return"$"===e?a:[{id:Symbol(),name:e,children:a}]}).flat();return i}},methods:{send(){const e=this.$refs.form;if(e.validate()){const t=Object.fromEntries(new FormData(e.$el).entries());t.permissions=this.userPermissions.map(e=>{const[t,a]=e.split(":");return{modules_id:t,modules_views_permissions_id:a}}),this.$rest("accounts").post({data:t}).then(()=>this.$router.push("/accounts"))}}},beforeCreate(){1==this.$store.state.user.type?this.$rest("modulesViews").get():this.$router.replace("/error404")},components:{ModuleTemplate:Jt}},ip=ap,sp=Object(I["a"])(ip,ep,tp,!1,null,null,null),lp=sp.exports,np=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:"Contas / Alterar",width:"800px"}},[t(h["a"],{staticClass:"pa-4 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form",staticClass:"pt-4"},[t(Ta["a"],[t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(Re["a"],{attrs:{value:e.account.name,rules:[e.rules.required],label:"Nome",name:"name",outlined:"outlined",dense:"dense"}})],1),t($a["a"],{staticClass:"py-0",attrs:{cols:"12",sm:"6"}},[t(Re["a"],{attrs:{value:e.account.email,rules:[e.rules.required,e.rules.email],label:"E-mail",name:"email",outlined:"outlined",dense:"dense"}})],1)],1),t(Re["a"],{attrs:{label:"Senha",name:"password",outlined:"outlined",dense:"dense"}}),1!=e.account.type&&e.userPermissions?t("div",[t("div",{staticClass:"grey--text text--lighten-1 font-weight-bold"},[e._v(" Permissões ")]),t(Xm["a"],{attrs:{items:e.modulesPermissions,selectable:"selectable","open-all":"open-all"},model:{value:e.userPermissions,callback:function(t){e.userPermissions=t},expression:"userPermissions"}})],1):e._e(),t("div",{staticClass:"d-flex justify-end"},[t(f["a"],{staticClass:"text-none",attrs:{color:"secondary",depressed:"depressed"},on:{click:e.send}},[e._v("Salvar")])],1)],1)],1)],1)},op=[],rp={name:"AccountItem",data:()=>({rules:{required:Be,email:Ee},userPermissions:null}),computed:{accountId(){return parseInt(this.$route.params.account)},account(){return this.$rest("accounts").item},modules(){return this.$rest("modules").list.map(e=>{const t=this.modulesViews.find(t=>t.key===e.viewKey);return e.permissions=t&&t.permissions,e})},modulesViews(){return this.$rest("modulesViews").list},modulesPermissions(){let e=this.modules.map(e=>{let t={...e};return t.menuId||(t.menuTitle="$"),t.submenuId||(t.submenuTitle="$"),t});const t=B(e,"menuTitle");let a={};for(let s in t)a[s]=B(t[s],"submenuTitle");const i=Object.entries(a).map(([e,t])=>{const a=Object.entries(t).map(([e,t])=>{const a=t.map(e=>{const t=e.permissions.map(({id:t,title:a})=>({id:`${e.id}:${t}`,name:a}));return{id:e.id,name:e.name,children:t}});return"$"===e?a:[{id:Symbol(),name:e,children:a}]}).flat();return"$"===e?a:[{id:Symbol(),name:e,children:a}]}).flat();return i}},methods:{send(){const e=this.$refs.form;if(e.validate()){const t=Object.fromEntries(new FormData(e.$el).entries());t.permissions=this.userPermissions.map(e=>{const[t,a]=e.split(":");return{modules_id:t,modules_views_permissions_id:a}}),this.$rest("accounts").put({id:this.accountId,data:t}).then(()=>{this.accountId==this.$store.state.user.id&&this.$store.dispatch("setInfoUser",this.$rest("accounts").item),this.$rest("modules").get(),this.$router.push("/accounts")})}}},async created(){if(1==this.$store.state.user.type){await this.$rest("modulesViews").get();try{const{permissions:e}=await this.$rest("accounts").get({id:this.accountId});e&&(this.userPermissions=e.map(({modules_id:e,modules_views_permissions_id:t})=>`${e}:${t}`))}catch{this.$router.replace("/accounts")}}else this.$router.replace("/error404")},components:{ModuleTemplate:Jt}},dp=rp,up=Object(I["a"])(dp,np,op,!1,null,null,null),cp=up.exports,mp=function(){var e=this,t=e._self._c;return t("module-template",{attrs:{title:"E-mail","max-width":"400px"}},[t(h["a"],{staticClass:"pa-4 pb-0 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form",staticClass:"pt-4 d-flex flex-column"},[t(Re["a"],{attrs:{value:e.configuration.user,rules:[e.rules.required,e.rules.email],disabled:e.loading,loading:e.loading,label:"Usuário",name:"user",type:"email",outlined:"outlined",dense:"dense"}}),t(Re["a"],{attrs:{value:e.configuration.password,rules:[e.rules.required],disabled:e.loading,loading:e.loading,label:"Senha",name:"password",type:"password",outlined:"outlined",dense:"dense"}}),t(Re["a"],{attrs:{value:e.configuration.name,rules:[e.rules.required],disabled:e.loading,loading:e.loading,label:"Nome",name:"name",outlined:"outlined",dense:"dense"}}),t(Re["a"],{attrs:{value:e.configuration.host,rules:[e.rules.required],disabled:e.loading,loading:e.loading,label:"Host",name:"host",outlined:"outlined",dense:"dense"}}),t(Re["a"],{attrs:{value:e.configuration.smtpPort,rules:[e.rules.required],disabled:e.loading,loading:e.loading,label:"Porta SMTP",name:"smtpPort",type:"number",outlined:"outlined",dense:"dense"}}),t(Re["a"],{attrs:{value:e.configuration.recipient,rules:[e.rules.required,e.rules.email],disabled:e.loading,loading:e.loading,label:"Destinatário",name:"recipient",outlined:"outlined",dense:"dense"}})],1),t(wt["a"],[t(f["a"],{staticClass:"text-none ml-auto",attrs:{disabled:e.loading,loading:e.loading,color:"secondary",depressed:"depressed"},on:{click:e.submit}},[e._v("Salvar")])],1)],1)],1)},pp=[],fp={data:()=>({rules:{required:Be,email:Ee},loading:!0}),computed:{configuration(){return this.$rest("configuration").item}},methods:{submit(){const e=this.$refs.form;e.validate()&&(this.loading=!0,this.$rest("configuration").put({id:"email",data:new FormData(e.$el)}).finally(()=>this.loading=!1))}},created(){1==this.$store.state.user.type?(this.loading=!0,this.$rest("configuration").get({id:"email",save:(e,t)=>e.item=t}).finally(()=>this.loading=!1)):this.$router.replace("/error404")},components:{ModuleTemplate:Jt}},hp=fp,gp=Object(I["a"])(hp,mp,pp,!1,null,null,null),vp=gp.exports,bp=function(){var e=this,t=e._self._c;return t("module-template",{staticClass:"page-tags",attrs:{title:"Tags","max-width":"800px"}},[t(h["a"],{staticClass:"pa-4 pb-0 rounded-t-0",attrs:{outlined:"outlined",dark:"dark"}},[t(Me["a"],{ref:"form",staticClass:"pt-4 d-flex flex-column"},[t(ml["a"],{attrs:{value:e.configuration.head_after_begin,disabled:e.loading,loading:e.loading,rows:10,label:"HEAD - Depois de começar",name:"head_after_begin",outlined:"outlined",dense:"dense"}}),t(ml["a"],{attrs:{value:e.configuration.head_before_end,disabled:e.loading,loading:e.loading,rows:10,label:"HEAD - Antes do fim",name:"head_before_end",outlined:"outlined",dense:"dense"}}),t(ml["a"],{attrs:{value:e.configuration.body_after_begin,disabled:e.loading,loading:e.loading,rows:10,label:"BODY - Depois de começar",name:"body_after_begin",outlined:"outlined",dense:"dense"}}),t(ml["a"],{attrs:{value:e.configuration.body_before_end,disabled:e.loading,loading:e.loading,rows:10,label:"BODY - Antes do fim",name:"body_before_end",outlined:"outlined",dense:"dense"}})],1),t(wt["a"],[t(f["a"],{staticClass:"text-none ml-auto",attrs:{disabled:e.loading,loading:e.loading,color:"secondary",depressed:"depressed"},on:{click:e.submit}},[e._v("Salvar")])],1)],1)],1)},yp=[],xp={data:()=>({loading:!0}),computed:{configuration(){return this.$rest("configuration").item}},methods:{submit(){const e=this.$refs.form;e.validate()&&(this.loading=!0,this.$rest("configuration").put({id:"tags",data:new FormData(e.$el)}).finally(()=>this.loading=!1))}},created(){1==this.$store.state.user.type?(this.loading=!0,this.$rest("configuration").get({id:"tags",save:(e,t)=>e.item=t}).finally(()=>this.loading=!1)):this.$router.replace("/error404")},components:{ModuleTemplate:Jt}},kp=xp,_p=(a("3853"),Object(I["a"])(kp,bp,yp,!1,null,null,null)),Cp=_p.exports,wp=function(){var e=this,t=e._self._c;return t(n["a"],{staticClass:"d-flex justify-center align-center",attrs:{color:"transparent",height:"600px"}},[t("h3",{staticClass:"white--text"},[e._v("Error 404")])])},Ip=[],$p={},Tp=Object(I["a"])($p,wp,Ip,!1,null,null,null),Sp=Tp.exports,Op=function(){var e=this,t=e._self._c;return t("div",[e.loading?t(n["a"],{staticClass:"d-flex justify-center align-center",attrs:{height:"calc(100vh - 48px)",width:"100%",color:"transparent"}},[t("loading")],1):t(e.component,{tag:"component",attrs:{data:e.module}})],1)},Dp=[],jp=a("bd11"),Ap=a.n(jp),qp={data:()=>({component:null,loading:!1,gettedModules:!1}),computed:{modules(){return this.$rest("modules").list},moduleKey(){return this.$route.params.module},module(){return this.modules.find(({key:e})=>e===this.moduleKey)},sub(){return this.$route.params.sub}},methods:{async get(){return this.loading=!0,this.gettedModules||await this.$rest("modules").get(),this.renderModule().then(()=>this.loading=!1)},mountRoutes(e,t){return e.map(e=>{let a={...e};return a.name=a.name.replace("{name}",t.name),a.path=a.path.replace("{key}",t.key),a})},async renderModule(){if(!this.module)return void this.$router.push("/error404");await this.$rest("modules").get({id:this.module.id});let e=[];if("custom"===this.module.viewKey){for(let t of Tm.custom)if(t.key===this.moduleKey){e=t.routes;break}}else e=this.mountRoutes(Tm[this.module.viewKey].routes,this.module);for(let{path:t,component:a}of e){const e=new RegExp(Ap()(t));if(e.test(this.$route.path)){this.component=a.name;break}}this.gettedModules=!0}},watch:{async moduleKey(){this.$auth.on&&await this.get()},async sub(){await this.get()},async $route(){this.$auth.on&&await this.renderModule()}},async created(){await this.get()},components:{Loading:ne,...Dm}},Lp=qp,Fp=Object(I["a"])(Lp,Op,Dp,!1,null,null,null),Mp=Fp.exports;i["default"].use(qe["a"]);const Rp="Painel de Administração",Pp=[{name:Rp,path:"/",component:ct},{name:"Instalar - "+Rp,path:"/setup",component:Ct},{name:"Entrar - "+Rp,path:"/entrar",component:Qe},{name:"Contas",path:"/accounts",component:Qm},{name:"Adicionar conta",path:"/accounts/adicionar",component:lp},{name:"Alterar conta",path:"/accounts/:account",component:cp},{name:"E-mail",path:"/email",component:vp},{name:"Tags",path:"/tags",component:Cp},{name:"Módulos",path:"/modules",component:Ia},{name:"Adicionar módulo",path:"/modules/adicionar",component:Lm},{name:"Alterar módulo",path:"/modules/:module",component:Vm},{name:"Error404",path:"/error404",component:Sp},{name:"Módulo - "+Rp,path:"/:module",component:Mp},{name:"Módulo - "+Rp,path:"/:module/:sub",component:Mp},{path:"*",beforeEnter:(e,t,a)=>{a("/error404")}}],Np=new qe["a"]({mode:"history",base:"/",routes:Pp});Np.afterEach(e=>{document.title=e.name,window.scrollTo(0,0)});var Bp=Np,Ep={connectionStatusChange:({commit:e},{ok:t,error:a})=>{window.console.warn("VuexRest: ",{ok:t,error:a}),e("function",e=>{e.connectionOk=t,e.connectionError=a})},startRequest:({commit:e,dispatch:t,state:a})=>{a.connectionOk||t("connectionStatusChange",{ok:!0}),e("function",e=>{e.loading=!0})},endRequest:({commit:e},{status:t,error:a,success:i})=>{t&&window.console.warn("VuexRest: ",{status:t,error:a,success:i}),e("function",e=>{e.loading=!1,t&&(e.lastRequestStatus=t,e.lastRequestError=a,e.lastRequestSuccess=i)}),t&&window.setTimeout(()=>{e("function",e=>{e.lastRequestStatus=null,e.lastRequestError=null,e.lastRequestSuccess=null})},4e3)},setInfoUser({commit:e},t){e("function",e=>{for(let a in t)e.user[a]=t[a];e.user={...e.user}})}},Hp={function:(e,t)=>t(e)};const Up={state:{connectionOk:null,connectionError:null,loading:!1,lastRequestStatus:null,lastRequestError:null,lastRequestSuccess:null,user:{}},mutations:Hp,actions:Ep};i["default"].use(Se["a"]);var Kp=new Se["a"].Store(Up),zp=a("f309");i["default"].use(zp["a"]);var Vp=new zp["a"]({icons:{iconfont:"fa"},theme:{options:{customProperties:!0},themes:{light:{primary:"#000000",secondary:"#e93751",accent:"#00a7bc"}}}}),Wp=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid-container",class:e.classes,style:e.style},[e._l(e.gridAreas,(function(a){return t("div",{key:a,class:"grid-area-"+a,style:{gridArea:a}},[e._t(a)],2)})),e._t("default")],2)},Jp=[];const Gp={computed:{style(){const e={},t=/(Sm|Md|Xl|Lg)$/;for(let a in this.$options.propsData){const i=a.match(t),s=i?a.slice(0,-2):a;e["--grid-"+a.replace(/([A-Z])/g,"-$1").toLowerCase()]=this.propsCSS[s].parse?this.propsCSS[s].parse(this[a]):this[a]}return e},classes(){const e=[];for(let t in this.$options.propsData)e.push("grid-"+t.replace(/([A-Z])/g,"-$1").toLowerCase());return e}}};var Zp=Gp;const Yp=["sm","md","xl","lg"],Qp=e=>{const t={};for(let a in e){t[a]={type:e[a].type,default:e[a].default};for(let i of Yp)t[`${a}-${i}`]={type:e[a].type,default:e[a].default}}return t};var Xp=Qp;const ef={cols:{type:String},rows:{type:String},autoRows:{type:String},autoCols:{type:String},gap:{type:String},autoFlow:{type:String},justify:{type:String},alignItems:{type:String},alignContent:{type:String},layout:{type:Array,default:()=>[],parse:e=>e.map(e=>e.join(" ")).map(e=>`"${e}"`).join(" ")}};var tf={name:"grid-container",props:Xp(ef),data:()=>({propsCSS:ef}),computed:{gridAreas(){return[...new Set(this.layout.flat())]}},mixins:[Zp]},af=tf,sf=(a("706c"),Object(I["a"])(af,Wp,Jp,!1,null,null,null)),lf=sf.exports,nf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid-item",class:e.classes,style:e.style},[e._t("default")],2)},of=[];const rf={colStart:{type:String},colEnd:{type:String},rowStart:{type:String},rowEnd:{type:String}};var df={name:"grid-item",props:Xp(rf),data:()=>({propsCSS:rf}),mixins:[Zp]},uf=df,cf=(a("a9c2"),Object(I["a"])(uf,nf,of,!1,null,null,null)),mf=cf.exports,pf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid-list",class:e.classes,style:e.style},[e._t("default")],2)},ff=[];const hf={colWidth:{type:String},rowHeight:{type:String},gap:{type:String},justify:{type:String},alignItems:{type:String},alignContent:{type:String}};var gf={name:"grid-list",props:Xp(hf),data:()=>({propsCSS:hf}),mixins:[Zp]},vf=gf,bf=(a("25b8"),Object(I["a"])(vf,pf,ff,!1,null,null,null)),yf=bf.exports,xf={GridContainer:lf,GridItem:mf,GridList:yf};const kf=e=>{for(let t in xf)e.component(t,xf[t])};var _f=kf;const Cf={install:_f};var wf=Cf,If=a("6930"),$f=a.n(If);const Tf=e=>{const t=e.observable({on:!1,checking:!0});e.prototype.$auth={login(e){return Ce.post("/auth/login",e).then(({data:e})=>(window.localStorage.setItem("token",e.token),e))},checkIn:()=>{const e=window.localStorage.getItem("token");return window.sessionStorage.setItem("token",e),e?Ce.post("/auth/check-in").then(({data:e})=>(t.checking=!1,t.on=!0,e)):(t.checking=!1,t.on=!1,Promise.reject())},logout:()=>Ce.post("/auth/logout").finally(()=>{t.on=!1,window.localStorage.removeItem("token")}),setStateProp(e,a){t[e]=a},get on(){return t.on},get checking(){return t.checking}}};i["default"].use(Tf),i["default"].use(wf),i["default"].use($f.a);const Sf=JSON.parse(document.getElementById("config").textContent),Of=location.origin+Sf.prefixPath;i["default"].config.productionTip=!1,i["default"].use(Te,{base:Of+"/rest"}),i["default"].mixin({data:()=>({server:Of,files:Of,...Sf,version:"2.6.0"})}),new i["default"]({router:Bp,vuetify:Vp,store:Kp,render:e=>e(Ae)}).$mount("#app")},"56e7":function(e,t,a){"use strict";a("966d")},"59eb":function(e,t,a){"use strict";a("22dd")},"5cef":function(e,t,a){"use strict";a("f011")},6273:function(e,t,a){"use strict";a("d62c")},6426:function(e,t,a){"use strict";a("dd35")},"68ce":function(e,t,a){"use strict";a("28ca")},"6e6c":function(e,t,a){"use strict";a("986c")},"6ebb":function(e,t,a){},"706c":function(e,t,a){"use strict";a("ce12")},7160:function(e,t,a){},7991:function(e,t,a){},"7b2a":function(e,t,a){"use strict";a("e1e5")},"7b98":function(e,t,a){},8078:function(e,t,a){},"828c":function(e,t,a){},8420:function(e,t,a){"use strict";a("8538")},8538:function(e,t,a){},"85f4":function(e,t,a){"use strict";a("6ebb")},"86d7":function(e,t,a){},"8f25":function(e,t,a){"use strict";a("a0d0")},9088:function(e,t,a){"use strict";a("55d0")},"95ea":function(e,t,a){"use strict";a("8078")},"966d":function(e,t,a){},"986c":function(e,t,a){},a0d0:function(e,t,a){},a10f:function(e,t,a){"use strict";a("0006")},a193:function(e,t,a){"use strict";a("48e3")},a4d7:function(e,t,a){},a7c3:function(e,t,a){},a9c2:function(e,t,a){"use strict";a("13bc")},b294:function(e,t,a){"use strict";a("e490")},b6e6:function(e,t,a){},b940:function(e,t,a){},b96f:function(e,t,a){"use strict";a("b940")},cc97:function(e,t,a){"use strict";a("06df")},ccf5:function(e,t,a){"use strict";a("eadf")},ce12:function(e,t,a){},d060:function(e,t,a){},d62c:function(e,t,a){},daca:function(e,t,a){},dd35:function(e,t,a){},e05c:function(e,t,a){},e1e5:function(e,t,a){},e490:function(e,t,a){},e4f4:function(e,t,a){"use strict";a("2d82")},e840:function(e,t,a){"use strict";a("2ab1")},eadf:function(e,t,a){},ed62:function(e,t,a){},f011:function(e,t,a){},fe61:function(e,t,a){"use strict";a("4e04")}});
//# sourceMappingURL=index.b7bb2185.js.map